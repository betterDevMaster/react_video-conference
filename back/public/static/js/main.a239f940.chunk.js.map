{"version":3,"sources":["../node_modules/peerjs/dist sync","reducers/buttons.js","reducers/users.js","reducers/chats.js","reducers/screen.js","reducers/index.js","components/dialog/index.js","components/dialog/Spinner.js","components/dialog/roomdlg.js","config.js","components/footer/index.js","views/home.js","webrtc/index.js","components/button/index.js","utils/position.js","components/dialog/videodlg.js","components/dialog/imagedlg.js","components/navbar/index.js","components/draggable/DragBox/index.js","RTCMulti/index.js","components/screen/index.js","components/youtubeupload/index.js","components/imageupload/index.js","components/draggable/DragContainer/index.js","components/screenshare/index.js","views/conference.js","views/room.js","App.js","index.js","images/closevideo.svg","images/youtube.svg","images/uploadimage.svg","images/screenshare-off.svg","images/stopvideo-1.svg","images/stopaudio-1.svg","images/mic-mute.svg","images/success.svg","images/error.svg","images/youtube1.svg","images/users.svg","images/screenshare-on.svg","images/stopvideo-0.svg","images/stopaudio-0.svg","images/logo.svg","images/logo-small.svg","images/support.svg","images/close.svg","images/mic-mute1.svg","images/map-small@2x.0c2a372b.png","images/map-big@2x.44a3f15c.png","images/joinbtn.svg"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","buttons","state","chat","camera","fullscreen","mic","screenshare","action","type","value","users","find","user","console","log","media","filter","map","status","chats","setTimeout","messages","document","getElementsByClassName","length","scrollIntoView","behavior","key","screens","bgMoving","videos","images","screenshares","peer","new_videos","remove_videos","x","name","video","peerId","moved_videos","play_videos","new_images","img","remove_images","moved_images","image","changed_screenshares","userid","moved_screenshares","remove_screenshares","rootReducer","combineReducers","Dialog","window","$","plainModal","props","className","spinning","icon","faSync","size","RoomDialog","useState","sendingEmail","setSendingEmail","mailStatus","setMailStatus","email","setEmail","space","setSpace","form","setForm","errors","setErrors","validEmailRegex","RegExp","handleChange","event","preventDefault","target","test","handleCancel","useEffect","content1","data-v-9deb956c","onSubmit","fetch","method","headers","aCcePt","body","JSON","stringify","then","res","json","data","reset","catch","err","ref","noValidate","input","onChange","onClick","disabled","count","Object","values","forEach","val","countErrors","Spinner","content2","src","successsvg","alt","content3","errorsvg","style","color","data-v-5c9875d0","aria-expanded","data-modal","role","aria-modal","Footer","React","memo","data-v-3de1367d","href","rel","Home","show","WebRTC","client","roomName","userName","myPosition","y","youtubes","enableScreenShare","enableCamera","enableMic","stopTrack","screenStream","width","height","videoQualities","text","frameRate","currentVideoQuality","this","audioQualities","sampleSize","channelCount","currentAudioQuality","_instance","Login","_browserCompatCheck","username","localStorage","getItem","setItem","generateRoomName","token","location","getUserName","localstream","audioContext","AudioContext","mediaStreamSource","createMediaStreamSource","processor","createScriptProcessor","connect","destination","onaudioprocess","evt","buffer","inputBuffer","numberOfChannels","inputData","getChannelData","inputDataLength","total","i","Math","abs","rms","sqrt","easyrtc","sendPeerMessage","targetRoom","getInstance","enable","handleHeaderToogle","room","enableMicrophone","push","defX","defY","content","youtube","videoplay","videoplaying","curtime","rec","cusId","dispatch","disconnect","peerName","fileInput","one","file","files","pow","alert","reader","FileReader","onload","txData","binaryContents","result","align","time","Date","now","sendDataWS","readAsDataURL","click","mode","audio","currentVideoDevice","deviceId","currentAudioDevice","currentContraintMode","local","getLocalStream","onStreamConfigurationChange","getTracks","stop","updateStreamMode","navigator","mediaDevices","getUserMedia","stream","track","addTrack","video_me","getElementById","setVideoObjectSrc","peers","getPeerConnections","cancelled","pc","getSenders","sender","replaceTrack","kind","enumerateDevices","devices","dev","found","ele","indexOf","label","videoDevices","audioDevices","updateDevices","owner","removeItem","enableDataChannels","VTCCore","initialize","cameraIsEnabled","micIsEnabled","onError","config","onPeerMessage","msgType","idToName","updatePeerPosition","videoId","imageid","imageId","enabled","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","blob","Blob","html","URL","createObjectURL","onStreamAccept","sendServerMessage","position","defPosX","defPosY","errorCode","errorText","rtcId","onStreamClose","clientId","getId","sWidth","sHeight","updateMyPosition","container","videoEl","removeChild","message","Button","data-v-2f32af68","title","toast","info","autoClose","hideProgressBar","POSITION","BOTTOM_RIGHT","Utils","pos","pos1","mul","posArr","transform","Number","error","scale","offsetLeft","offsetTop","left","top","attrName","getAttribute","rect","right","bottom","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","VideoDialog","useDispatch","setVideo","valid","setValid","url","$1","ytVidId","element","textContent","data-v-6a2f6b36","data-v-6e496afa","elementInput","replace","draggableBack","posMe","getPositionFromStyle","scaleMe","getValueFromAttr","calc_def_x","calc_def_y","youtubeAdd","handleSubmit","ImageDialog","imagePreviewUrl","setImagePreviewUrl","uploadClick","setUploadClick","fileName","setFileName","imgSize","setImgSize","URLChangedHandler","isImageUrl","image_url","http","XMLHttpRequest","open","send","imageExists","uploadComputer","data-v-bd733764","data-id","Image","onloadend","fileChangedHandler","htmlFor","preview","linkURL","elementUpload","elementLink","handleUpload","handleLink","imageWidth","parseInt","imageHeight","imageAdd","Navbar","useSelector","self","toggleChange","type1","value1","toggleCamera","toggleMic","data-v-2db9ff64","data-v-12a888fb","logosvg","display","logosmallsvg","data-v-261ef19f","userssvg","on","off","no","uploadimage","sharedscreen_on","sharedscreen_off","hasOwnProperty","call","stopvideo0","stopvideo1","stopaudio0","stopaudio1","support","close","closeClient","query","uname","DragBox","onMouseDown","stopPropagation","draggable","elementFromPoint","clientX","clientY","dragType","button","moveRef","current","resizeXRef","resizeYRef","resizeXYRef","myRef","setState","dragging","pageX","pageY","w","zoom","h","onMouseUp","newPos","onMouseMove","max","min","parentNode","aspect","initialRect","xy_w","xy_h","handleClickSmall","onClickSmall","createRef","tipState","addEventListener","removeEventListener","onMouseEnter","onMouseLeave","sizable","children","tip","small","borderColor","angle","offset","calcStyle","PureComponent","zIndex","stage","parentRect","smallCircleSize","calcOffest","PI","atan2","MyPeer","host","path","port","secure","debug","Peer","Screen","videoRef","useRef","process","onGoToFirstPosition","sceneZoom","opt","screenShareAdd","volume","node","onDrag","borderRadius","border","tabIndex","controls","loop","muted","YoutubeUpload","dbRef","youtubeMute","setYoutubeMute","youtubeMuteAudio","realCurTime","internalPlayer","unMute","seekTo","playVideo","pauseVideo","setVolume","handleDragMeForYoutube","youtubePosition","onResize","data-v-c1f79ed4","data-v-7e3fe256","data-v-a995c326","opts","playerVars","autoplay","origin","enablejsapi","autohide","showinfo","onPlay","youtubePlay","onPause","onStateChange","getCurrentTime","MicMute1","MicMute0","svg-inline","youtubeRemove","closevideo","ImageUpload","imageHandle","imagePosition","imageRemove","closeimage","DragContainer","onMove","positionToParent","onWheel","ev","cursor_x","cursor_y","newZoom","maxZoom","minZoom","deltaY","zoomToParent","onZoom","background","backgroundSize","curzoom","Component","fitParent","ScreenShare","videoShareRef","isNavigatorSelect","setIsNavigatorSelect","_mediaStream","conn","getDisplayMedia","mediaStream","srcObject","play","screenShareChange","getVideoTracks","onended","answer","incoming","active","onaddtrack","handleScreenShareDragAndResize","screenSharePosition","Conference","qs","search","userClose","setUserClose","setPos","mePos","setMePos","setSceneZoom","startConference","smallPos","handleGoToFirstPosition","handleDragMe","me","calcZoom","dist","calcVolume","getDistanceByRectAndPosition","getDistanceByPosition","p1","p2","distance","overflow","backgroundImage","img_small","onSetUserClose","img_big","dom","Room","isVerified","setIsVerified","setUserName","data-v-a74c9690","history","placeholder","joinbtn","App","component","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.a239f940.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 122;","const buttons = (state = {chat:'on', camera:'on', fullscreen:'on', mic: 'on', screenshare: 'off'}, action) => {\r\n    switch(action.type){\r\n        case \"click_chat\":\r\n            return {\r\n                ...state,\r\n                chat: action.value\r\n            }\r\n        case \"click_camera\":\r\n            return {\r\n                ...state,\r\n                camera: action.value\r\n            }\r\n        case \"click_fullscreen\":\r\n            return {\r\n                ...state,\r\n                fullscreen: action.value\r\n            }\r\n        case \"click_mic\":\r\n            return {\r\n                ...state,\r\n                mic: action.value\r\n            }\r\n        case \"click_screenshare\":\r\n            return {\r\n                ...state,\r\n                screenshare: action.value\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default buttons;","const users = (state = [], action) => {\r\n    switch (action.type) {\r\n        case \"user_add\":\r\n            // console.log('reducer user_add : ', state, action)\r\n            if (state.find((user) => user.id === action.value.id)) {\r\n                console.log('Duplicate user error!', action.value)\r\n                return state;\r\n            }\r\n            return [\r\n                ...state,\r\n                { ...action.value, media: { mic: 'on', camera: 'on', screenshare: 'off' } }\r\n            ]\r\n        case \"user_remove\":\r\n            return state.filter((user) => user.id !== action.value.id);\r\n        case \"user_media\":\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                if (action.value.type === 'mic')\r\n                    return { ...user, media: { ...user.media, mic: action.value.status } }\r\n                if (action.value.type === 'camera')\r\n                    return { ...user, media: { ...user.media, camera: action.value.status } }\r\n                // if (action.value.type === 'screenshare')\r\n                //     return { ...user, media: { ...user.media, screenshare: action.value.status } }\r\n            });\r\n        case \"user_position\":\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                return { ...user, ...action.value }\r\n            });\r\n        \r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport default users;","const chats = (state = [], action) => {\r\n    switch(action.type){\r\n        case \"chat_add\":\r\n            // scroll\r\n            setTimeout(()=>{\r\n                    const messages = document.getElementsByClassName('chatitemparent');\r\n                    if (messages.length>0) {\r\n                        messages[messages.length-1].scrollIntoView({behavior: 'smooth'});\r\n                    }\r\n                }, 200);\r\n            return [\r\n                ...state,\r\n                { ...action.value, key: state.length}\r\n            ]\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default chats;","const screens = (state = {bgMoving:false, videos: [], images: [], screenshares: [], peer: {}}, action) => {\r\n    switch(action.type){\r\n        case \"backgound_moving\":\r\n            return {\r\n                ...state,\r\n                bgMoving: action.value\r\n            }\r\n        case \"youtube_add\":\r\n            const new_videos = [...state.videos, action.value];\r\n            return {\r\n                ...state,\r\n                videos: new_videos\r\n            }\r\n        case \"youtube_remove\":\r\n            const remove_videos = state.videos.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                videos: remove_videos\r\n            }\r\n        case \"youtube_remove_by_id\":\r\n            return { ...state, videos: state.videos.filter((video)=>{\r\n                return video.id !== action.peerId;\r\n            })}\r\n        case \"youtube_position\":\r\n            const moved_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: moved_videos\r\n            }\r\n        case \"youtube_play\":\r\n            const play_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: play_videos\r\n            }\r\n        case \"image_add\":\r\n            const new_images = [...state.images, action.value];\r\n            return {\r\n                ...state,\r\n                images: new_images\r\n            }\r\n        case \"image_remove_by_id\":\r\n            return { ...state, images: state.images.filter((img)=>{\r\n                return img.id !== action.peerId;\r\n            })}\r\n        case \"image_remove\":\r\n            const remove_images = state.images.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                images: remove_images\r\n            }\r\n        case \"image_position\":\r\n            const moved_images = state.images.map((image) => {\r\n                if (image.name !== action.value.name)\r\n                    return image;\r\n                return {...image, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                images: moved_images\r\n            }\r\n        case \"set_peer\":\r\n            // console.log('reducer setPeer : ------- ', state, action, { \r\n            //     ...state,\r\n            //     peer: action.value\r\n            // })\r\n            return { \r\n                ...state,\r\n                peer: action.value\r\n            }\r\n        case \"screenshare_add\":\r\n            return { \r\n                ...state,\r\n                screenshares: [...state.screenshares, action.value]\r\n            }\r\n        case \"screenshare_change\":\r\n            const changed_screenshares = state.screenshares.map((screenshare) => {\r\n                if (screenshare.userid !== action.value.userid)\r\n                    return screenshare;\r\n                return {...screenshare, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                screenshares: changed_screenshares\r\n            }\r\n        case \"screenshare_position\":\r\n            const moved_screenshares = state.screenshares.map((screenshare) => {\r\n                if (screenshare.name !== action.value.name)\r\n                    return screenshare;\r\n                return {...screenshare, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                screenshares: moved_screenshares\r\n            }\r\n        case \"screenshare_remove\":\r\n            const remove_screenshares = state.screenshares.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                screenshares: remove_screenshares\r\n            }\r\n        case \"screenshare_remove_by_id\":\r\n            return { ...state, screenshares: state.screenshares.filter((screenshare)=>{\r\n                return screenshare.userid !== action.peerId;\r\n            })}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default screens;","import {combineReducers} from 'redux'\r\nimport buttons from './buttons'\r\nimport users from './users'\r\nimport chats from './chats'\r\nimport screens from './screen'\r\n// import mediadevices from './medias'\r\n\r\nconst rootReducer = combineReducers({\r\n    buttons,\r\n    users,\r\n    chats,\r\n    screens\r\n})\r\n\r\nexport default rootReducer","import './index.css';\r\n\r\nclass Dialog{\r\n    static show(id) {\r\n        const ele = window.$('#'+id);\r\n        ele.plainModal('open')\r\n    }\r\n}\r\nexport default Dialog;","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSync } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport default props =>\r\n  <div className={`fadeIn ${props.spinning}`}>\r\n    <FontAwesomeIcon icon={faSync} size={props.size} />\r\n  </div>","import React, {useEffect, useState } from 'react';\r\n// import ReactDOM from 'react-dom'\r\n// import Recaptcha from 'react-recaptcha';\r\n\r\nimport Spinner from './Spinner'\r\nimport './index.css';\r\nimport successsvg from '../../images/success.svg'\r\nimport errorsvg from '../../images/error.svg'\r\nimport { API_URL } from '../../config'\r\n\r\n\r\nfunction RoomDialog(props){\r\n    // const [isVerified, setIsVerified] = useState(true);\r\n    const isVerified = true;\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [mailStatus, setMailStatus] = useState(2);\r\n    const [email, setEmail] = useState('');\r\n    const [space, setSpace] = useState('');\r\n    const [form, setForm] = useState(null);\r\n    const [errors, setErrors] = useState({\r\n        email: 'Enter your Email!',\r\n        space: 'Enter your Sspace Name!',\r\n    })\r\n\r\n    const validEmailRegex = RegExp(/^(([^<>()\\],;:\\s@]+([^<>()\\],;:\\s@]+)*)|(.+))@(([^<>()[\\],;:\\s@]+)+[^<>()[\\],;:\\s@]{2,})$/i);\r\n\r\n    const countErrors = (errors) => {\r\n        let count = 0;\r\n        delete errors.name\r\n        Object.values(errors).forEach(\r\n            (val) => {\r\n                val.length > 0 && (count = count+1)\r\n            }\r\n        );\r\n        return count;\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n\r\n        switch (name) {\r\n            case 'space':\r\n                errors.space =\r\n                value.length < 5\r\n                    ? 'Space Name must be 5 characters long!'\r\n                    : '';\r\n                break;\r\n            case 'email':\r\n                errors.email =\r\n                validEmailRegex.test(value)\r\n                    ? ''\r\n                    : 'Email is not valid!';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        setErrors({\r\n            ...errors,\r\n            name: value\r\n        })\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n\r\n        fetch(`${API_URL}/email`, {\r\n            method: 'pOSt',\r\n            headers: {\r\n                aCcePt: 'aPpliCaTIon/JsOn',\r\n                'cOntENt-type': 'applicAtion/JSoN'\r\n            },\r\n            body: JSON.stringify({ email: email.value, space: space.value })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            setSendingEmail(false)\r\n            setMailStatus(data.status)\r\n            form.reset()\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#roomdialog').plainModal('close')\r\n\r\n        setTimeout(()=>{\r\n            setSendingEmail(false)\r\n            setMailStatus(2)\r\n            // setIsVerified(false);\r\n        }, 100);\r\n    }\r\n    // const onLoadCallback = function () {\r\n    // };\r\n    // const onVerifyCallback = function () {\r\n    //     // setIsVerified(true);\r\n    // };\r\n    useEffect(()=>{\r\n        if (mailStatus === 2) {\r\n            // ReactDOM.render(\r\n            //     <Recaptcha\r\n            //         sitekey=\"6LdpQwEVAAAAAGM4w3LS9xsD-Hd6yAP_DhIce0nz\"\r\n            //         render=\"explicit\"\r\n            //         onloadCallback={onLoadCallback}\r\n            //         verifyCallback={onVerifyCallback}\r\n            //     />,\r\n            //     document.getElementById('recaptcha')\r\n            // );\r\n        }\r\n    },[mailStatus])\r\n\r\n    const content1 =\r\n        <form data-v-9deb956c=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)} ref={form => setForm(form)} noValidate>\r\n            <div data-v-9deb956c=\"\" className=\"label\" >Your Email</div>\r\n            <input data-v-9deb956c=\"\" type=\"email\" name='email' className=\"email\" ref={input => setEmail(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.email.length > 0 &&\r\n                <span className='error'>{errors.email}</span>}\r\n            <div data-v-9deb956c=\"\" className=\"label\">Space Name</div>\r\n            <input data-v-9deb956c=\"\" type=\"text\" name='space' className=\"space-name\" ref={input => setSpace(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.space.length > 0 &&\r\n                <span className='error'>{errors.space}</span>}\r\n            <div id='recaptcha'/>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    CANCEL\r\n                </button>\r\n                <button data-v-9deb956c=\"\" type='submit' className='create'\r\n                    disabled={ countErrors(errors)===0 && isVerified ? false : true}>\r\n                    {sendingEmail\r\n                    ? <Spinner size='lg' spinning='spinning' />\r\n                    : \"CREATE\"\r\n                    }\r\n                </button>\r\n            </div>\r\n        </form>\r\n    const content2 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={successsvg} alt='successsvg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\">Email sent!\r\n                    <h4 data-v-9deb956c=\"\">Please check your inbox to confirm.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n    const content3 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={errorsvg} alt='error.svg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\" style={{color: '#ff0000'}}>Whoops!\r\n                    <h4 data-v-9deb956c=\"\">Already registered.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n\r\n    return (\r\n        <div data-v-9deb956c=\"\" data-v-5c9875d0=\"\" id ='roomdialog' aria-expanded=\"true\" data-modal=\"create-space\" className=\"create-space-modal v--modal-overlay roomdialog\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal m-dialog\">\r\n                    <div data-v-9deb956c=\"\" className=\"header\">Create Space</div>\r\n                    {mailStatus === 2\r\n                    ? content1\r\n                    : mailStatus === 0\r\n                    ? content2\r\n                    : content3\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default RoomDialog;","// export const API_URL = process.env.NODE_ENV === 'production'\r\n//   ? 'http://ec2-18-222-23-198.us-east-2.compute.amazonaws.com:3113/'\r\n  // : 'http://localhost:3113'\r\nexport const API_URL = process.env.NODE_ENV === 'production'\r\n  ? 'https://webrtc.bcisummit.com'\r\n  : 'https://webrtc.bcisummit.com'\r\n  // : 'localhost:3011' //tesing port","import React from 'react';\r\n\r\nconst Footer = React.memo(props => {\r\n    return (\r\n        <div data-v-3de1367d=\"\" className=\"footer\">\r\n            <div data-v-3de1367d=\"\" className=\"links\">\r\n                <a data-v-3de1367d=\"\" href=\"https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to=seniordev119@gmail.com\" className=\"support-link\" target=\"_blank\" rel=\"noopener noreferrer\">seniordev119@gmail.com</a>\r\n                <span data-v-3de1367d=\"\" className=\"phone-hidden\">&nbsp;&nbsp;&nbsp;&nbsp;∙&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                <div data-v-3de1367d=\"\" className=\"legal\">\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/SpatialChat-Privacy-Policy-899c953609d24d3ebbd619506becaa7f\" target=\"_blank\" rel=\"noopener noreferrer\">Privacy Policy</a>\r\n                    <span data-v-3de1367d=\"\">&nbsp;&nbsp;&nbsp;&nbsp;∙&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/Terms-of-Service-6f9243e5e25346cfa73df618c90de4fb\" target=\"_blank\" rel=\"noopener noreferrer\">Terms of Service</a>\r\n                </div>\r\n            </div>\r\n            {/* <div data-v-3de1367d=\"\" className=\"copyright\">Designed by FunCorp Lab</div> */}\r\n        </div>\r\n    );\r\n})\r\nexport default Footer;","import React from \"react\";\r\n\r\n// import marksvg from '../images/logo-mark.svg'\r\nimport Dialog from '../components/dialog';\r\nimport RoomDialog from '../components/dialog/roomdlg';\r\nimport Footer from '../components/footer';\r\n\r\nfunction Home(props) {\r\n    return (\r\n    <div data-v-5c9875d0=\"\" className=\"home\">\r\n        <div data-v-5c9875d0=\"\" className=\"buttons\">\r\n            <button data-v-5c9875d0=\"\" onClick={()=>{Dialog.show('roomdialog')}} className=\"button\">Create Space</button>\r\n        </div>\r\n        <Footer />\r\n        <RoomDialog />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","class WebRTC {\r\n    static _instance = null;\r\n    client = null;\r\n    roomName = '';\r\n    userName = '';\r\n    myPosition = { x: 0, y: 0 };\r\n    youtubes = [];\r\n    images = [];\r\n    screenshares = [];\r\n    enableScreenShare = true;\r\n    enableCamera = true;\r\n    enableMic = true;\r\n    stopTrack = false;\r\n    screenStream = {};\r\n    width = 3000;\r\n    height = 2000;\r\n\r\n    videoQualities = [\r\n        { text: 'SSM (30p - 128Kb/s)', value: { width: 160, height: 120, frameRate: 10 } },\r\n        { text: 'SM (120p - 256Kb/s)', value: { width: 320, height: 240, frameRate: 10 } },\r\n        { text: 'SD (360p - 1Mb/s)', value: { width: 480, height: 360, frameRate: 10 } },\r\n        { text: 'HD (720p - 2Mb/s)', value: { width: 1280, height: 720, frameRate: 10 } },\r\n        { text: 'Full HD (1080p - 4Mb/s)', value: { width: 1920, height: 1080, frameRate: 15 } }\r\n    ];\r\n    currentVideoQuality = this.videoQualities[1];\r\n    audioQualities = [\r\n        { text: 'Narrow Band (16Kb/s)', value: { sampleSize: 8, channelCount: 1 } },\r\n        { text: 'Wide Band (64Kb/s)', value: { sampleSize: 8, channelCount: 2 } },\r\n        { text: 'Full Band (256Kb/s)', value: { sampleSize: 16, channelCount: 2 } }\r\n    ];\r\n    currentAudioQuality = this.audioQualities[1];\r\n\r\n    static getInstance() {\r\n        if (WebRTC._instance === null) {\r\n            WebRTC._instance = new WebRTC();\r\n        }\r\n        return WebRTC._instance;\r\n    }\r\n\r\n    constructor() {\r\n        console.log('WebRTC class was initialized.');\r\n    }\r\n\r\n    checkBrowser() {\r\n        return window.Login._browserCompatCheck();\r\n    }\r\n    getUserName() {\r\n        const username = window.localStorage.getItem('userName');\r\n        return username ? username : '';\r\n    }\r\n    setUserName(name) {\r\n        window.localStorage.setItem('userName', name);\r\n    }\r\n    getRoomName() {\r\n        return this.roomName;\r\n    }\r\n    generateRoomName() {\r\n        return window.generateRoomName();\r\n    }\r\n    createRoom(token, roomName) {\r\n        window.localStorage.setItem('o', true);\r\n        window.localStorage.setItem('t', 'video-conference');\r\n        window.localStorage.setItem('r', roomName);\r\n        window.location.href = '/room?username=' + this.getUserName();\r\n    }\r\n    joinRoom(token, roomName) {\r\n        window.localStorage.setItem('o', false);\r\n        window.localStorage.setItem('t', 'video-conference');\r\n        window.localStorage.setItem('r', roomName);\r\n        window.location.href = '/room?username=' + this.getUserName();\r\n    }\r\n    createAudioMeter(localstream) {\r\n        var kSampleSize = 16384;\r\n        var kSampleAverageInterval = 16;\r\n        var audioContext = new AudioContext();\r\n        var mediaStreamSource = audioContext.createMediaStreamSource(localstream);\r\n        var processor = audioContext.createScriptProcessor(kSampleSize, 1, 1);\r\n\r\n        mediaStreamSource.connect(processor);\r\n        processor.connect(audioContext.destination);\r\n\r\n        processor.onaudioprocess = function (evt) {\r\n            var buffer = evt.inputBuffer;\r\n            if (buffer.numberOfChannels > 0) {\r\n                var inputData = buffer.getChannelData(0);\r\n                var inputDataLength = inputData.length;\r\n                var total = 0;\r\n\r\n                // We calculate the average of every X to prevent CPU fans from kicking in\r\n                // on laptops!\r\n                for (var i = 0; i < inputDataLength; i += kSampleAverageInterval) {\r\n                    total += Math.abs(inputData[i]);\r\n                }\r\n\r\n                var rms = Math.sqrt((kSampleAverageInterval * total) / inputDataLength);\r\n                // WebRTC.getInstance().client.sendPeerMessage();\r\n\r\n                window.easyrtc.sendPeerMessage(\r\n                    {\r\n                        targetRoom: WebRTC.getInstance().roomName\r\n                    },\r\n                    'audio-meter',\r\n                    {\r\n                        rms: rms\r\n                    }\r\n                );\r\n            }\r\n        };\r\n    }\r\n    toggleCamera(enable) {\r\n        window.easyrtc.enableCamera(enable);\r\n        this.enableCamera = enable\r\n        this.handleHeaderToogle();\r\n        if (this.client)\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'media-presence', { type: 'camera', status: enable ? 'on' : 'off' });\r\n    }\r\n    toggleMic(enable) {\r\n        window.easyrtc.enableMicrophone(enable);\r\n        this.enableMic = enable\r\n        this.handleHeaderToogle();\r\n        if (this.client)\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'media-presence', { type: 'mic', status: enable ? 'on' : 'off' });\r\n    }\r\n\r\n    screenShareAdd(value) {\r\n        WebRTC.getInstance().screenshares.push(value);\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'screenshare-add', value);\r\n    }\r\n    screenSharePosition(value) {\r\n        this.screenshares.forEach((screenshare) => {\r\n            if (screenshare.name === value.name) {\r\n                screenshare.defX = value.defX;\r\n                screenshare.defY = value.defY;\r\n                screenshare.width = value.width;\r\n                screenshare.height = value.height;\r\n            }\r\n        });\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'screenshare-position', value);\r\n    }\r\n    screenShareChange(content) {\r\n        this.enableScreenShare = content.status;\r\n        this.screenshares.forEach((screenshare) => {\r\n            if (screenshare.name === content.name) {\r\n                screenshare.status = content.status ? 'on' : 'off';\r\n            }\r\n        });\r\n        if (this.client)\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'screenshare-change', { status: content.status ? 'on' : 'off' });\r\n    }\r\n    screenShareRemove(value) {\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'screenshare-remove', value);\r\n        WebRTC.getInstance().screenshares = WebRTC.getInstance().screenshares.filter((screenshare) => {\r\n            return screenshare.name !== value.name;\r\n        });\r\n    }\r\n    youtubePosition(value) {\r\n        this.youtubes.forEach((youtube) => {\r\n            if (youtube.name === value.name) {\r\n                youtube.defX = value.defX;\r\n                youtube.defY = value.defY;\r\n                youtube.width = value.width;\r\n                youtube.height = value.height;\r\n            }\r\n        });\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'youtube-position', value);\r\n    }\r\n    youtubePlay(value) {\r\n        this.youtubes.forEach((youtube) => {\r\n            if (youtube.name === value.name) {\r\n                youtube.videoplay = value.videoplay;\r\n                youtube.videoplaying = value.videoplaying;\r\n                youtube.curtime = value.curtime;\r\n            }\r\n        });\r\n\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'youtube-play', value);\r\n    }\r\n    youtubeAdd(value) {\r\n        WebRTC.getInstance().youtubes.push(value);\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'youtube-add', value);\r\n    }\r\n    youtubeRemove(value) {\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'youtube-remove', value);\r\n        WebRTC.getInstance().youtubes = WebRTC.getInstance().youtubes.filter((rec) => {\r\n            return rec.name !== value.name;\r\n        });\r\n    }\r\n    imageAdd(value) {\r\n        WebRTC.getInstance().images.push(value);\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'image-add', value);\r\n    }\r\n    imagePosition(value) {\r\n        this.images.forEach((image) => {\r\n            if (image.name === value.name) {\r\n                image.defX = value.defX;\r\n                image.defY = value.defY;\r\n                image.width = value.width;\r\n                image.height = value.height;\r\n            }\r\n        });\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'image-position', value);\r\n    }\r\n    imageRemove(value) {\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'image-remove', value);\r\n        WebRTC.getInstance().images = WebRTC.getInstance().images.filter((rec) => {\r\n            return rec.name !== value.name;\r\n        });\r\n    }\r\n\r\n    closeClient(cusId) {\r\n        this.dispatch({ type: 'user_remove', value: { id: cusId } });\r\n        window.easyrtc.disconnect();\r\n    }\r\n    sendFile(peerId, peerName, dispatch) {\r\n        const fileInput = window.$('#file');\r\n        fileInput.one('change', function () {\r\n            const file = fileInput[0].files[0];\r\n            if (file.size === 0) {\r\n                alert('Empty file selected.');\r\n                return;\r\n            }\r\n            if (file.size > Math.pow(2, 21)) {\r\n                alert(\"File size can't be larger than 2MB.\");\r\n                return;\r\n            }\r\n            var reader = new FileReader();\r\n            // Closure to capture the file information.\r\n            reader.onload = function (e) {\r\n                var txData = {\r\n                    name: file.name,\r\n                    type: file.type,\r\n                    size: file.size,\r\n                    binaryContents: e.target.result\r\n                };\r\n                dispatch({\r\n                    type: 'chat_add',\r\n                    value: {\r\n                        username: 'Me',\r\n                        userid: 'me',\r\n                        text: `Send a file \"${file.name}\" to \"${peerName}\".`,\r\n                        align: 'right',\r\n                        time: Date.now()\r\n                    }\r\n                });\r\n                window.easyrtc.sendDataWS(peerId, 'file', txData);\r\n            };\r\n            // Read in the image file as a data URL.\r\n            reader.readAsDataURL(file);\r\n            fileInput[0].value = '';\r\n        });\r\n        fileInput[0].click();\r\n        // .trigger('click');\r\n    }\r\n    updateStreamMode() {\r\n        // get getUserMedia mode\r\n        let mode = { video: false, audio: false };\r\n        if (this.currentVideoDevice) {\r\n            mode.video = {};\r\n            mode.video.deviceId = this.currentVideoDevice.value;\r\n            mode.video.width = this.currentVideoQuality.value.width;\r\n            mode.video.height = this.currentVideoQuality.value.height;\r\n            mode.video.frameRate = this.currentVideoQuality.value.frameRate;\r\n        }\r\n        if (this.currentAudioDevice) {\r\n            mode.audio = {};\r\n            mode.audio.deviceId = this.currentAudioDevice.value;\r\n            mode.audio.sampleSize = this.currentAudioQuality.value.sampleSize;\r\n            mode.audio.channelCount = this.currentAudioQuality.value.channelCount;\r\n        }\r\n        this.currentContraintMode = mode;\r\n    }\r\n    handleHeaderToogle() {\r\n        const local = window.easyrtc.getLocalStream();\r\n        // console.log('handleHaaderToogle : ', local.getTracks(), WebRTC.getInstance().enableCamera, WebRTC.getInstance().enableMic)\r\n        if (!WebRTC.getInstance().enableCamera && !WebRTC.getInstance().enableMic) {\r\n            for (const track of local.getTracks()) {\r\n                track.stop();\r\n            }\r\n            this.stopTrack = true\r\n            return\r\n        }\r\n        if (this.stopTrack && WebRTC.getInstance().enableCamera) {\r\n            this.stopTrack = false\r\n            this.onStreamConfigurationChange()\r\n        }\r\n    }\r\n    onStreamConfigurationChange() {\r\n        this.updateStreamMode();\r\n        const local = window.easyrtc.getLocalStream();\r\n        navigator.mediaDevices.getUserMedia(this.currentContraintMode).then((stream) => {\r\n            // replace local stream\r\n            stream.getTracks().forEach((track) => {\r\n                local.addTrack(track);\r\n            });\r\n\r\n            const video_me = document.getElementById(local.id);\r\n            window.easyrtc.setVideoObjectSrc(video_me, stream);\r\n\r\n            // send it to remote\r\n            const peers = window.easyrtc.getPeerConnections();\r\n            for (const id in peers) {\r\n                const peer = peers[id];\r\n                if (peer.cancelled) continue;\r\n                peer.pc.getSenders().map((sender) => {\r\n                    // console.log('sender : ---- ', sender)\r\n                    sender.replaceTrack(\r\n                        stream.getTracks().find((track) => {\r\n                            return track.kind === sender.track.kind;\r\n                        })\r\n                    );\r\n                });\r\n            }\r\n        });\r\n    }\r\n    \r\n    async updateDevices() {\r\n        try {\r\n            let audio = [];\r\n            let video = [];\r\n            const devices = await navigator.mediaDevices.enumerateDevices();\r\n            for (const dev of devices) {\r\n                if (dev.kind === 'audioinput') {\r\n                    const found = audio.filter((ele) => ele.text.indexOf(dev.label) === 0);\r\n                    if (found.length > 0) audio = [...audio, { text: dev.label + '-' + found.length, value: dev.deviceId }];\r\n                    else audio = [...audio, { text: dev.label, value: dev.deviceId }];\r\n                }\r\n                if (dev.kind === 'videoinput') {\r\n                    const found = video.filter((ele) => ele.text.indexOf(dev.label) === 0);\r\n                    if (found.length > 0) video = [...video, { text: dev.label + '-' + found.length, value: dev.deviceId }];\r\n                    else video = [...video, { text: dev.label, value: dev.deviceId }];\r\n                }\r\n            }\r\n            this.videoDevices = video;\r\n            this.audioDevices = audio;\r\n        } catch (e) {}\r\n    }\r\n\r\n    async startConference(dispatch, token, room, userName) {\r\n        console.log('start conference: ', room, userName);\r\n        this.userName = userName;\r\n        this.roomName = room ? room : window.localStorage.getItem('r');\r\n\r\n        if (!this.roomName) {\r\n            window.location.href = '/room?space=' + this.roomName;\r\n            return;\r\n        }\r\n        this.dispatch = dispatch;\r\n        await this.updateDevices();\r\n        this.currentVideoDevice = this.videoDevices.length === 0 ? null : this.videoDevices[0];\r\n        this.currentAudioDevice = this.audioDevices.length === 0 ? null : this.audioDevices[0];\r\n\r\n        this.owner = window.localStorage.getItem('o');\r\n        this.token = window.localStorage.getItem('t');\r\n\r\n        window.localStorage.removeItem('o');\r\n        window.localStorage.removeItem('t');\r\n        window.localStorage.removeItem('r');\r\n\r\n        window.easyrtc.enableDataChannels(true);\r\n\r\n        window.VTCCore.initialize({\r\n            cameraIsEnabled: this.enableCamera,\r\n            micIsEnabled: this.enableMic,\r\n        })\r\n            .onError(function (config) {\r\n                // console.log('error---', config);\r\n            })\r\n            .onPeerMessage(function (client, peerId, msgType, content) {\r\n                if (msgType === 'chat') {\r\n                    dispatch({\r\n                        type: 'chat_add',\r\n                        value: { username: client.idToName(peerId), userid: peerId, text: content, align: 'left', time: Date.now() }\r\n                    });\r\n                } else if (msgType === 'user_remove') {\r\n                    dispatch({\r\n                        type: 'user_remove',\r\n                        value: {\r\n                            id: content.id\r\n                        }\r\n                    });\r\n                } else if (msgType === 'set_peer_position') {\r\n                    WebRTC.getInstance().updatePeerPosition(content);\r\n                } else if (msgType === 'youtube-position') {\r\n                    dispatch({\r\n                        type: 'youtube_position',\r\n                        value: {\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            videoId: peerId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'youtube-play') {\r\n                    dispatch({\r\n                        type: 'youtube_play',\r\n                        value: {\r\n                            name: content.name,\r\n                            videoplay: content.videoplay,\r\n                            curtime: content.curtime,\r\n                            videoplaying: content.videoplaying\r\n                        }\r\n                    });\r\n                } else if (msgType === 'youtube-add') {\r\n                    dispatch({\r\n                        type: 'youtube_add',\r\n                        value: {\r\n                            name: content.name,\r\n                            id: peerId,\r\n                            username: client.idToName(peerId),\r\n                            value: content.videoId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY,\r\n                            videoplay: true\r\n                        }\r\n                    });\r\n                } else if (msgType === 'youtube-remove') {\r\n                    dispatch({ type: 'youtube_remove', name: content.name });\r\n                    // Image Handle\r\n                } else if (msgType === 'image-position') {\r\n                    dispatch({\r\n                        type: 'image_position',\r\n                        value: {\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            imageid: peerId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'image-add') {\r\n                    dispatch({\r\n                        type: 'image_add',\r\n                        value: {\r\n                            name: content.name,\r\n                            id: peerId,\r\n                            username: client.idToName(peerId),\r\n                            value: content.imageId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'image-remove') {\r\n                    dispatch({ type: 'image_remove', name: content.name });\r\n                } else if (msgType === 'screenshare-add') {\r\n                    dispatch({\r\n                        type: 'screenshare_add',\r\n                        value: {\r\n                            userid: peerId,\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            // peer: content.peer,\r\n                            defX: content.defX,\r\n                            defY: content.defY,\r\n                            status: content.status\r\n                        }\r\n                    });\r\n                } else if (msgType === 'screenshare-position') {\r\n                    dispatch({\r\n                        type: 'screenshare_position',\r\n                        value: {\r\n                            id: peerId,\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'screenshare-change') {\r\n                    dispatch({\r\n                        type: 'screenshare_change',\r\n                        value: {\r\n                            userid: peerId,\r\n                            username: client.idToName(peerId),\r\n                            status: content.status\r\n                        }\r\n                    });\r\n                } else if (msgType === 'screenshare-remove') {\r\n                    dispatch({ type: 'screenshare_remove', name: content.name });\r\n                    // Navbar Handle\r\n                } else if (msgType === 'media-presence' && typeof content.type === 'string' && typeof content.status === 'string') {\r\n                    // console.log('WebRTC : ---------', content, msgType);\r\n                } else if (msgType === 'debug') {\r\n                    // console.log(msgType, peerId, content);\r\n                } else if (msgType === 'mic-control' && typeof content.enabled === 'boolean') {\r\n                    // console.log(client, peerId, msgType, content);\r\n                    return;\r\n                } else if (msgType === 'audio-meter') {\r\n                    // dispatch({type:'user_audio', value: {audio: content.rms});\r\n                    // AudioMeter.handlePeerMessage(peerId, content);\r\n                } else if (msgType === 'file') {\r\n                    var arr = content.binaryContents.split(','),\r\n                        mime = arr[0].match(/:(.*?);/)[1],\r\n                        bstr = atob(arr[1]),\r\n                        n = bstr.length,\r\n                        u8arr = new Uint8Array(n);\r\n                    while (n--) {\r\n                        u8arr[n] = bstr.charCodeAt(n);\r\n                    }\r\n                    var blob = new Blob([u8arr], { type: mime });\r\n                    dispatch({\r\n                        type: 'chat_add',\r\n                        value: {\r\n                            username: client.idToName(peerId),\r\n                            userid: peerId,\r\n                            html: `\"${client.idToName(peerId)}\" sent a file.<br><a href='${URL.createObjectURL(\r\n                                blob\r\n                            )}' target='_blank'>Click here to download ${content.name}(${content.size}bytes)`,\r\n                            align: 'left',\r\n                            time: Date.now()\r\n                        }\r\n                    });\r\n                } else {\r\n                    // @todo FIXME: right now we don't have other messages to take care of\r\n                    // console.log('peerMessage => got a peer message that is unexpected');\r\n                    // console.log('            => peerId:  ' + peerId);\r\n                    // console.log('            =>   name: ' + client.idToName(peerId));\r\n                    // console.log('            => msgType: ' + msgType);\r\n                    // console.log('            => content: ' + JSON.stringify(content));\r\n                }\r\n            })\r\n            .onStreamAccept(function (client, peerId, stream) {\r\n                var peerName = client.idToName(peerId);\r\n\r\n                window.easyrtc.sendServerMessage(\r\n                    'get_peer_position',\r\n                    peerId,\r\n                    function (msgType, position) {\r\n                        console.log('onStreamAccept: ', peerName, WebRTC.getInstance().roomName);\r\n                        dispatch({\r\n                            type: 'user_add',\r\n                            value: { id: peerId, name: peerName, stream, defPosX: position.x, defPosY: position.y }\r\n                        });\r\n                    },\r\n                    function (errorCode, errorText) {}\r\n                );\r\n                WebRTC.getInstance().youtubes.forEach((youtube) => {\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'youtube-add', youtube);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'youtube-position', youtube);\r\n                });\r\n                WebRTC.getInstance().images.forEach((image) => {\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'image-add', image);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'image-position', image);\r\n                });\r\n                WebRTC.getInstance().screenshares.forEach((screenshare) => {\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'screenshare-add', screenshare);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'screenshare-position', screenshare);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'screenshare-change', screenshare);\r\n                });\r\n\r\n                // if (WebRTC.getInstance().client)\r\n                //     WebRTC.getInstance().client.sendPeerMessage({ room: WebRTC.getInstance().roomName }, 'media-presence', {\r\n                //         type: 'screenshare',\r\n                //         status: WebRTC.getInstance().enableScreenShare ? 'on' : 'off'\r\n                //     });\r\n\r\n                return;\r\n            })\r\n            .onStreamClose(function (client, peerId) {\r\n                dispatch({ type: 'image_remove_by_id', peerId });\r\n                dispatch({ type: 'youtube_remove_by_id', peerId });\r\n                dispatch({ type: 'screenshare_remove_by_id', peerId });\r\n                dispatch({ type: 'user_remove', value: { id: peerId } });\r\n\r\n                return;\r\n            })\r\n            .connect(userName, this.roomName, (client) => {\r\n                var stream = client.getLocalStream();\r\n                console.log('start local stream: ', userName, this.roomName);\r\n\r\n                window.easyrtc.sendServerMessage(\r\n                    'get_my_position',\r\n                    { clientId: client.getId(), sWidth: this.width, sHeight: this.height },\r\n                    function (msgType, position) {\r\n                        dispatch({ type: 'user_add', value: { id: 'me', name: 'Me', stream, defPosX: position.x, defPosY: position.y } });\r\n                        WebRTC.getInstance().onStreamConfigurationChange();\r\n                        // WebRTC.getInstance().onStreamConnect();\r\n                        WebRTC.getInstance().client = client;\r\n\r\n                        WebRTC.getInstance().updateMyPosition(position);\r\n                    },\r\n                    function (errorCode, errorText) {}\r\n                );\r\n\r\n                return;\r\n            });\r\n    }\r\n\r\n    removeChild(peer, client) {\r\n        var container = document.getElementById('screen_' + peer);\r\n        var videoEl = peer.videoEl; //it got video element\r\n        if (container && videoEl) {\r\n            container.removeChild(videoEl); // my code is breaking here\r\n        }\r\n    }\r\n\r\n    sendMessage(message) {\r\n        this.client.sendPeerMessage({ room: this.roomName }, 'chat', message);\r\n    }\r\n\r\n    updatePeerPosition(content) {\r\n        WebRTC.getInstance().dispatch({\r\n            type: 'user_position',\r\n            value: { id: content.id, defPosX: content.position.x, defPosY: content.position.y }\r\n        });\r\n    }\r\n    updateMyPosition(position) {\r\n        if (this.client) {\r\n            if (!position) position = this.myPosition;\r\n            this.myPosition = position;\r\n\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'set_peer_position', {\r\n                id: this.client.getId(),\r\n                position: this.myPosition\r\n            });\r\n        }\r\n    }\r\n}\r\nexport default WebRTC;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport { ToastContainer, toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n\r\nconst Button = React.memo(props => {\r\n    const toggleStatus = () => {\r\n        if(props.onClick && props.status !== 'no')\r\n            props.onClick();\r\n        else {\r\n            toast.info('Session initializing. Wait a moment.')\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <img id={props.id} data-v-2f32af68=\"\" className=\"stopvideo pointer has-tooltip\" src={props[props.status]} alt={props.alt} title={props.alt} onClick={ toggleStatus } />\r\n            <ToastContainer\r\n                autoClose={3000}\r\n                hideProgressBar={true}\r\n                position={toast.POSITION.BOTTOM_RIGHT}\r\n            />\r\n        </>\r\n    );\r\n})\r\nexport default Button;","export default class Utils{\r\n    static addPosition(pos, pos1){\r\n        return {x: pos.x+pos1.x, y: pos.y+pos1.y}\r\n    }\r\n    static multiplyPosition(pos, mul){\r\n        return {x: pos.x*mul, y: pos.y*mul}\r\n    }\r\n    static getPositionFromTransform(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromTransformWithScale(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1], scale: posArr[2]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromStyle(ele){\r\n        try{\r\n            return {x: ele.offsetLeft, y: ele.offsetTop}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionAndSizeFromStyle(ele){\r\n        try{\r\n            var left = ele.style.left.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            var top = ele.style.top.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            var width = ele.style.width.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            var height = ele.style.height.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            return {x: left, y: top, width: width, height: height}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0, width: 0, height: 0}\r\n        }\r\n    }\r\n    static getValueFromAttr(ele, attrName){\r\n        try{\r\n            return {value: ele.getAttribute(attrName).match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {value: ''}\r\n        }\r\n    }\r\n    static setPositionOfHtmlElement(ele, pos){\r\n        try{\r\n            ele.style.left = pos.x + 'px';\r\n            ele.style.top = pos.y + 'px';\r\n            return true;\r\n        } catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static isInRect(rect, pos){\r\n        try{\r\n            if(pos.x >= rect.left && pos.x <= rect.right && pos.y >= rect.top && pos.y <= rect.bottom)\r\n                return true;\r\n            return false\r\n        }catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static width(){\r\n        return(window.innerWidth)?\r\n        window.innerWidth:\r\n        document.documentElement.clientWidth||document.body.clientWidth||0;\r\n    }\r\n    static height(){\r\n        return(window.innerHeight)?\r\n        window.innerHeight:\r\n        document.documentElement.clientHeight||document.body.clientHeight||0;\r\n    }\r\n}","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nimport youtube from '../../images/youtube1.svg'\r\n\r\nfunction VideoDialog(props){\r\n    const dispatch = useDispatch()\r\n    const [video, setVideo] = useState('');\r\n    const [valid, setValid] = useState(false);\r\n\r\n    const handleCancel = (event) => {\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n    const ytVidId = (url) => {\r\n        var p = /^(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\?(?=.*v=((\\w|-){11}))(?:\\S+)?$/;\r\n        return (url.match(p)) ? RegExp.$1 : false;\r\n    }\r\n    const getId = (url) => {\r\n        const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n        const match = url.match(regExp);\r\n\r\n        return (match && match[2].length === 11)\r\n        ? match[2]\r\n        : null;\r\n    }\r\n    const handleChange = (event) => {\r\n        var url = video.value;\r\n        if (ytVidId(url) !== false) {\r\n            setValid(true)\r\n        } else {\r\n            setValid(false)\r\n            var element = document.getElementsByClassName(\"input-text\");\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleSubmit = (event) => {\r\n        var elementInput = document.getElementsByClassName(\"input-text\");\r\n        elementInput[0].textContent = 'YouTube video link'\r\n        elementInput[0].className = elementInput[0].className.replace(/\\berror\\b/g, \"\");\r\n\r\n        const videoId = getId(video.value);\r\n\r\n        const videoWidth = 350\r\n        const videoHeight = 240\r\n        \r\n        const draggableBack = document.getElementsByClassName('drag-container')[0]\r\n        const posMe = Utils.getPositionFromStyle(draggableBack);\r\n        const scaleMe = Utils.getValueFromAttr(draggableBack, 'curzoom').value;\r\n        const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2 ) / scaleMe\r\n        const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2 ) / scaleMe\r\n\r\n        // console.log(calc_def_x, calc_def_y, posMe)  \r\n        dispatch({type: 'youtube_add', value:{name: videoId, id: 'me', username: 'me', value: videoId, width: videoWidth, \r\n            height: videoHeight, defX: calc_def_x, defY: calc_def_y, videoplay: true}})\r\n        WebRTC.getInstance().youtubeAdd({videoId: videoId, name: videoId, username: 'me', width: videoWidth, \r\n            height: videoHeight, defX: calc_def_x, defY: calc_def_y, videoplay: true})\r\n\r\n\r\n        video.value = ''\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n\r\n    return (\r\n        <div data-v-6a2f6b36=\"\" data-v-6e496afa=\"\" id ='videodialog' aria-expanded=\"true\" data-modal=\"add-youtube\" className=\"add-youtube-modal v--modal-overlay customDlgPos\" >\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal videodialog\" >\r\n                    <img data-v-6a2f6b36 className=\"logo\" src={youtube} alt='youtube.svg' />\r\n                    <div data-v-6a2f6b36=\"\" className=\"input-text\">YouTube video link</div>\r\n                    <input data-v-6a2f6b36=\"\" type=\"text\" name='video' className=\"url\" ref={input => setVideo(input)} onChange={(e)=>handleChange(e)} />\r\n                    <div data-v-6a2f6b36=\"\" className=\"buttons\">\r\n                        <input data-v-6a2f6b36=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        <input data-v-6a2f6b36=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}\r\n                            disabled={valid ? false : true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default VideoDialog;","import React, { useState } from 'react';\r\nimport isImageUrl from 'is-image-url'\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nfunction ImageDialog(props){\r\n    const [imagePreviewUrl, setImagePreviewUrl] = useState(null)\r\n    const [uploadClick, setUploadClick] = useState(true)\r\n    const [fileName, setFileName] = useState('')\r\n    const [imgSize, setImgSize] = useState({width: 0, height: 0})\r\n    const dispatch = useDispatch()\r\n\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#imagedialog').plainModal('close')\r\n        setImagePreviewUrl(null)\r\n    }\r\n    const handleSubmit = (event) => {\r\n        const imageWidth = parseInt(imgSize.width/3)\r\n        const imageHeight = parseInt(imgSize.height/3)\r\n        \r\n        const draggableBack = document.getElementsByClassName('drag-container')[0]\r\n        const posMe = Utils.getPositionFromStyle(draggableBack);\r\n        const scaleMe = Utils.getValueFromAttr(draggableBack, 'curzoom').value;\r\n\r\n        const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2 ) / scaleMe\r\n        const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2 ) / scaleMe\r\n\r\n        dispatch({type: 'image_add', value:{name: fileName, id: 'me', username: 'Me', value: imagePreviewUrl, width: imageWidth, height: imageHeight, defX: calc_def_x, defY: calc_def_y}})\r\n        WebRTC.getInstance().imageAdd({imageId: imagePreviewUrl, name: fileName, width: imageWidth, height: imageHeight, defX: calc_def_x, defY: calc_def_y})\r\n\r\n        setImagePreviewUrl(null)\r\n        window.$('#imagedialog').plainModal('close')\r\n    }\r\n    const fileChangedHandler = (event) => {\r\n        let reader = new FileReader();\r\n        setFileName(event.target.files[0].name)\r\n        reader.onload = function () {\r\n            var img = new Image();\r\n            img.onload = function() {\r\n                setImgSize({width: img.width, height: img.height})\r\n            };\r\n            img.src = reader.result;\r\n        }\r\n        reader.onloadend = (e) => {\r\n            setImagePreviewUrl(reader.result)\r\n        }\r\n        reader.readAsDataURL(event.target.files[0])\r\n    }\r\n    const imageExists = (image_url) => {\r\n        var http = new XMLHttpRequest();\r\n        http.open('HEAD', image_url, false);\r\n        http.send();\r\n        return http.status !== 404;\r\n    }\r\n    const URLChangedHandler = (event) => {\r\n        var element = document.getElementsByClassName(\"label\");\r\n        if (isImageUrl(event.target.value) || imageExists(event.target.value)) {\r\n            element[0].className = element[0].className.replace(/\\berror\\b/g, \"\");\r\n            element[0].textContent = 'Image link'\r\n            setImagePreviewUrl(event.target.value)\r\n            setFileName(event.target.value)\r\n        }\r\n        else {\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleUpload = (event) => {\r\n        setUploadClick(true)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementLink[0].className = elementLink[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementUpload[0].className += \" active\";\r\n    }\r\n    const handleLink = (event) => {\r\n        setUploadClick(false)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementUpload[0].className = elementUpload[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementLink[0].className += \" active\";\r\n    }\r\n    const uploadComputer =\r\n        <div data-v-bd733764=\"\" className=\"upload-computer tab-active drop-zone\" data-id=\"upload1\" >\r\n            <div data-v-bd733764=\"\" className=\"bold\">Drag and drop, paste image here</div>\r\n            <div data-v-bd733764=\"\" className=\"gray\">or</div>\r\n            <input type=\"file\" name=\"file-4\" id=\"file-4\" className=\"inputfile\" onChange={(e)=>fileChangedHandler(e)} />\r\n            <label htmlFor=\"file-4\">BROWSE...</label>\r\n        </div>\r\n    const preview =\r\n        <div data-v-bd733764=\"\" className=\"preview\">\r\n            <img className=\"imgPreview\" src={imagePreviewUrl} height=\"200\" alt=\"preview...\" />\r\n        </div>\r\n    const linkURL =\r\n        <div data-v-bd733764=\"\" className=\"upload-link\">\r\n            <div data-v-bd733764=\"\" className=\"label\">Image link</div>\r\n            <input data-v-bd733764=\"\" type=\"text\" className=\"link\" onChange={(e)=>URLChangedHandler(e)} />\r\n        </div>\r\n    return (\r\n        <div data-v-bd733764=\"\" data-v-6e496afa=\"\" id ='imagedialog' aria-expanded=\"true\" data-modal=\"add-image\" className=\"add-image-modal v--modal-overlay customDlgPos\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal imagedialog\" >\r\n                    <div data-v-bd733764=\"\" className=\"header\">\r\n                        <button data-v-bd733764=\"\" data-id=\"upload1\" className=\"image_upload active\" onClick={(e)=>handleUpload(e)} >Upload</button>\r\n                        <button data-v-bd733764=\"\" data-id=\"upload2\" className=\"image_link\" onClick={(e)=>handleLink(e)} >URL</button>\r\n                    </div>\r\n                    {\r\n                        uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : uploadClick && !imagePreviewUrl\r\n                        ? uploadComputer\r\n                        : null\r\n                    }\r\n                    {\r\n                        !uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : !uploadClick && !imagePreviewUrl\r\n                        ? linkURL\r\n                        : null\r\n                    }\r\n                    <div data-v-bd733764=\"\" className=\"buttons\">\r\n                        <input data-v-bd733764=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        { imagePreviewUrl && <input data-v-bd733764=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}/>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default ImageDialog;","import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport WebRTC from '../../webrtc';\r\nimport Button from '../button';\r\nimport Dialog from '../dialog';\r\nimport VideoDialog from '../dialog/videodlg';\r\nimport ImageDialog from '../dialog/imagedlg';\r\n\r\nimport userssvg from '../../images/users.svg';\r\nimport youtube from '../../images/youtube.svg';\r\nimport uploadimage from '../../images/uploadimage.svg';\r\nimport sharedscreen_on from '../../images/screenshare-on.svg';\r\nimport sharedscreen_off from '../../images/screenshare-off.svg';\r\nimport stopvideo0 from '../../images/stopvideo-0.svg';\r\nimport stopvideo1 from '../../images/stopvideo-1.svg';\r\nimport stopaudio0 from '../../images/stopaudio-0.svg';\r\nimport stopaudio1 from '../../images/stopaudio-1.svg';\r\nimport logosvg from '../../images/logo.svg';\r\nimport logosmallsvg from '../../images/logo-small.svg';\r\nimport support from '../../images/support.svg';\r\nimport close from '../../images/close.svg';\r\n\r\nimport './index.css';\r\n\r\nconst Navbar = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n    const users = useSelector((state) => state.users);\r\n    const camera = useSelector((state) => state.buttons.camera);\r\n    const mic = useSelector((state) => state.buttons.mic);\r\n    const screenshare = useSelector((state) => state.buttons.screenshare);\r\n    const self = useSelector((state) => state.screens.peer)\r\n\r\n    const toggleChange = (type1, value1) => {\r\n        dispatch({ type: type1, value: value1 === 'on' ? 'off' : 'on' });\r\n        // console.log('toogleChange: ', type1, value1)\r\n        if (type1 === 'click_camera') {\r\n            dispatch({ type: 'user_media', value: { id: 'me', type: 'camera', status: value1 === 'on' ? 'off' : 'on' } });\r\n            WebRTC.getInstance().toggleCamera(value1 === 'off');\r\n        } else if (type1 === 'click_mic') {\r\n            dispatch({ type: 'user_media', value: { id: 'me', type: 'mic', status: value1 === 'on' ? 'off' : 'on' } });\r\n            WebRTC.getInstance().toggleMic(value1 === 'off');\r\n        } else if (type1 === 'click_screenshare') {\r\n            dispatch({\r\n                type: 'screenshare_change',\r\n                value: { status: value1 === 'on' ? 'off' : 'on', userid: 'me' }\r\n            });\r\n        }\r\n    };\r\n    const handleClose = (event) => {\r\n        WebRTC.getInstance().closeClient('me');\r\n        window.location.href = '/room?space=' + props.query.space;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div data-v-2db9ff64='' className='app-header' data-v-12a888fb=''>\r\n                <a data-v-2db9ff64='' href='/' target='_blank'>\r\n                    <img data-v-2db9ff64='' className='logo' src={logosvg} alt='logosvg' style={{ display: 'none' }} />\r\n                    <img data-v-2db9ff64='' className='logo-small' src={logosmallsvg} alt='logosmallsvg' style={{ display: 'none' }} />\r\n                </a>\r\n                <div data-v-2f32af68='' className='controls'>\r\n                    <div data-v-2f32af68='' className='controls-main'>\r\n                        <div data-v-261ef19f='' data-v-2f32af68='' className='members-container'>\r\n                            <div data-v-2f32af68='' data-v-261ef19f='' className='members cus-dropdown'>\r\n                                <img data-v-2f32af68='' src={userssvg} alt='userssvg' />\r\n                                <span data-v-2f32af68='' data-v-261ef19f=''>\r\n                                    {users.length}\r\n                                </span>\r\n                                <div data-v-261ef19f='' className='cus-dropdown-content'>\r\n                                    {users.map((user) => (user.id !== 'me' ? <span key={user.id}>{user.name}</span> : null))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <Button\r\n                            on={youtube}\r\n                            off={youtube}\r\n                            no={youtube}\r\n                            alt='Youtube'\r\n                            status='on'\r\n                            onClick={() => {\r\n                                Dialog.show('videodialog');\r\n                            }}\r\n                        ></Button>\r\n                        <Button\r\n                            on={uploadimage}\r\n                            off={uploadimage}\r\n                            no={uploadimage}\r\n                            alt='Uploadimage'\r\n                            status='on'\r\n                            onClick={() => {\r\n                                Dialog.show('imagedialog');\r\n                            }}\r\n                        ></Button>\r\n                        <Button\r\n                            on={sharedscreen_on}\r\n                            off={sharedscreen_off}\r\n                            no={sharedscreen_off}\r\n                            id='screenshare'\r\n                            alt='Screenshare'\r\n                            status={ hasOwnProperty.call(self, 'peer') ? screenshare : 'no' }\r\n                            onClick={() => toggleChange('click_screenshare', screenshare)}\r\n                        ></Button>\r\n                        <Button\r\n                            on={stopvideo0}\r\n                            off={stopvideo1}\r\n                            no={stopvideo1}\r\n                            alt='Camera'\r\n                            status={camera}\r\n                            onClick={() => toggleChange('click_camera', camera)}\r\n                        ></Button>\r\n                        <Button\r\n                            on={stopaudio0}\r\n                            off={stopaudio1}\r\n                            no={stopaudio1}\r\n                            alt='Mic'\r\n                            status={mic}\r\n                            onClick={() => toggleChange('click_mic', mic)}\r\n                        ></Button>\r\n                    </div>\r\n                    <a data-v-2f32af68='' href='mailto:support@spatial.chat' className='support-link'>\r\n                        <img data-v-2f32af68='' className='support has-tooltip' src={support} alt='support' />\r\n                    </a>\r\n                    <img data-v-2f32af68='' className='close pointer' src={close} alt='close' onClick={(e) => handleClose(e)} />\r\n                </div>\r\n            </div>\r\n            <VideoDialog uname={props.query.uname} />\r\n            <ImageDialog uname={props.query.uname} />\r\n        </>\r\n    );\r\n});\r\n\r\nexport default Navbar;\r\n","import React, {PureComponent} from 'react';\r\nimport './index.css';\r\n\r\nexport default class DragBox extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.resizeXRef = React.createRef();\r\n        this.resizeYRef = React.createRef();\r\n        this.resizeXYRef = React.createRef();\r\n        this.moveRef = React.createRef();\r\n        this.myRef = React.createRef();\r\n        this.state = {\r\n            dragging: !props.draggable,\r\n            dragType: '',\r\n            rel: null, // position relative to the cursor\r\n            scale: props.scale,\r\n            position: {\r\n                x: props.initialRect.left | 0,\r\n                y: props.initialRect.top | 0\r\n            },\r\n            width: props.initialRect.width | 0,\r\n            height: props.initialRect.height | 0,\r\n            tipState: false\r\n        };\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.draggable) {\r\n            const newState = {\r\n                offset: props.offset,\r\n                scale: props.scale,\r\n                style: calcStyle(props, state)\r\n            };\r\n            return newState;\r\n        } else {\r\n            const newState = {\r\n                offset: props.offset,\r\n                scale: props.scale,\r\n                style: calcStyle(props, state),\r\n                position: {\r\n                    x: props.initialRect.left,\r\n                    y: props.initialRect.top\r\n                },\r\n                width: props.initialRect.width | 0,\r\n                height: props.initialRect.height | 0\r\n            };\r\n            return newState;\r\n        }\r\n    }\r\n\r\n    // we could get away with not having this (and just having the listeners on\r\n    // our div), but then the experience would be possibly be janky. If there's\r\n    // anything w/ a higher z-index that gets in the way, then you're toast,\r\n    // etc.\r\n    componentDidUpdate(props, state) {\r\n        if (this.state.dragging && !state.dragging) {\r\n            document.addEventListener('mousemove', this.onMouseMove);\r\n            document.addEventListener('mouseup', this.onMouseUp);\r\n        } else if (!this.state.dragging && state.dragging) {\r\n            document.removeEventListener('mousemove', this.onMouseMove);\r\n            document.removeEventListener('mouseup', this.onMouseUp);\r\n        }\r\n    }\r\n    // calculate relative position to the mouse and set dragging=true\r\n    onMouseDown = (e) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        // return;\r\n        // only left mouse button\r\n        if (!this.props.draggable) return;\r\n        const ele = document.elementFromPoint(e.clientX, e.clientY);\r\n        let dragType = '';\r\n        if (e.button === 0) {\r\n            switch (ele) {\r\n                case this.moveRef.current:\r\n                    dragType = 'move';\r\n                    break;\r\n                case this.resizeXRef.current:\r\n                    dragType = 'resize-x';\r\n                    break;\r\n                case this.resizeYRef.current:\r\n                    dragType = 'resize-y';\r\n                    break;\r\n                case this.resizeXYRef.current:\r\n                    dragType = 'resize-xy';\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        var pos = {\r\n            left: this.myRef.current.offsetLeft,\r\n            top: this.myRef.current.offsetTop\r\n        };\r\n        this.setState({\r\n            dragging: true,\r\n            dragType,\r\n            rel: {\r\n                x: e.pageX - pos.left,\r\n                y: e.pageY - pos.top,\r\n                w: (e.pageX / this.state.scale) * 2 - this.state.width * this.props.zoom,\r\n                h: (e.pageY / this.state.scale) * 2 - this.state.height * this.props.zoom\r\n            }\r\n        });\r\n    };\r\n    onMouseUp = (e) => {\r\n        const newPos = {\r\n            x: this.myRef.current.offsetLeft / this.state.scale,\r\n            y: this.myRef.current.offsetTop / this.state.scale\r\n        };\r\n        if (this.props.onMouseUp) this.props.onMouseUp(this.myRef.current, newPos, this.state.scale);\r\n\r\n        this.setState({ dragging: false });\r\n\r\n\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onMouseMove = (e) => {\r\n        if (e.button !== 0) return;\r\n        const newPos = {\r\n            x: (e.pageX - this.state.rel.x) / this.state.scale,\r\n            y: (e.pageY - this.state.rel.y) / this.state.scale\r\n        };\r\n        switch (this.state.dragType) {\r\n            case 'move':\r\n                newPos.x = Math.max(1, Math.min(this.myRef.current.parentNode.parentNode.clientWidth / this.state.scale - 1, newPos.x));\r\n                newPos.y = Math.max(\r\n                    1,\r\n                    Math.min(this.myRef.current.parentNode.parentNode.clientHeight / this.state.scale - 1, newPos.y)\r\n                );\r\n\r\n                this.setState({\r\n                    position: newPos\r\n                });\r\n                break;\r\n            case 'resize-x':\r\n                const w = Math.max(20, (e.pageX / this.state.scale) * 2 - this.state.rel.w);\r\n                if (this.props.aspect) {\r\n                    this.setState({\r\n                        width: w,\r\n                        height: (w / this.props.initialRect.width) * this.props.initialRect.height\r\n                    });\r\n                } else {\r\n                    this.setState({ width: w });\r\n                }\r\n                break;\r\n            case 'resize-y':\r\n                const h = Math.max(20, (e.pageY / this.state.scale) * 2 - this.state.rel.h);\r\n                if (this.props.aspect) {\r\n                    this.setState({\r\n                        height: h,\r\n                        width: (h / this.props.initialRect.height) * this.props.initialRect.width\r\n                    });\r\n                } else {\r\n                    this.setState({ height: h });\r\n                }\r\n                break;\r\n            case 'resize-xy':\r\n                const xy_w = Math.max(20, (e.pageX / this.state.scale) * 2 - this.state.rel.w);\r\n                const xy_h = Math.max(20, (e.pageY / this.state.scale) * 2 - this.state.rel.h);\r\n                if (this.props.aspect) {\r\n                    this.setState({\r\n                        width: xy_w,\r\n                        height: (xy_w / this.props.initialRect.width) * this.props.initialRect.height\r\n                    });\r\n                } else {\r\n                    this.setState({ width: xy_w, height: xy_h });\r\n                }\r\n                break;\r\n            default:\r\n        }\r\n        if (this.props.onMouseMove) this.props.onMouseMove(this.myRef.current, newPos, this.state.scale);\r\n\r\n        // e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n\r\n    handleClickSmall = (e) => {\r\n        const pos = {\r\n            x: this.state.position.x * this.props.scale,\r\n            y: this.state.position.y * this.props.scale\r\n        };\r\n        if (this.props.onClickSmall) this.props.onClickSmall(pos);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                onMouseEnter={(e) => {\r\n                    if (this.props.type === 'circle' && !this.state.tipState) {\r\n                        this.setState({ tipState: true });\r\n                    }\r\n                    if (this.props.type !== 'circle' && this.state.tipState) {\r\n                        this.setState({ tipState: false });\r\n                    }\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    if (this.state.tipState) this.setState({ tipState: false });\r\n                }}\r\n            >\r\n                <div\r\n                    ref={this.myRef}\r\n                    className={`drag-box ${this.props.type}`}\r\n                    style={this.state.style}\r\n                    onMouseUp={this.onMouseUp}\r\n                    onMouseDown={this.onMouseDown}\r\n                >\r\n                    {this.props.sizable && <div className=\"drag-size-x\" ref={this.resizeXRef} onMouseDown={this.onMouseDown} />}\r\n                    {this.props.sizable && <div className=\"drag-size-y\" ref={this.resizeYRef} onMouseDown={this.onMouseDown} />}\r\n                    {this.props.sizable && <div className=\"drag-size-xy\" ref={this.resizeXYRef} onMouseDown={this.onMouseDown} />}\r\n                    <div className={'drag-' + this.props.dragType} ref={this.moveRef} onMouseDown={this.onMouseDown} />\r\n                    {/* <div\r\n                        className={this.props.dragType === 'title' ? 'drag-title' : 'drag-move'}\r\n                        ref={this.moveRef}\r\n                        onMouseDown={this.onMouseDown}\r\n                    /> */}\r\n                    {this.props.children}\r\n                    {this.state.tipState && (\r\n                        <div className=\"tip\">\r\n                            <span className=\"tip-pan\"> {this.props.tip} </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {this.state.style.small && (\r\n                    <div\r\n                        className=\"circle-arrow\"\r\n                        style={{\r\n                            ...this.state.style,\r\n                            borderColor: this.props.draggable ? 'yellow' : 'white',\r\n                            transform: `translate(-50%, -50%) rotate(${this.state.style.angle}deg)`\r\n                        }}\r\n                        onMouseDown={this.handleClickSmall}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction calcStyle(props, state) {\r\n    const style = {\r\n        left: props.draggable ? state.position.x * props.scale : props.initialRect.left * props.scale,\r\n        top: props.draggable ? state.position.y * props.scale : props.initialRect.top * props.scale,\r\n        width: props.draggable ? state.width * props.zoom : props.initialRect.width * props.zoom,\r\n        height: props.draggable ? state.height * props.zoom : props.initialRect.height * props.zoom,\r\n        zIndex: props.zIndex | 0,\r\n        transform: `translate(-50%, -50%) scale(${props.scale})`\r\n    };\r\n    const stage = document.getElementById('stage');\r\n    if (props.type === 'circle' && stage) {\r\n        const smallCircleSize = 70;\r\n        const offset = calcOffest(\r\n            {\r\n                left: -props.offset.x,\r\n                top: -props.offset.y,\r\n                right: -props.offset.x + stage.clientWidth,\r\n                bottom: -props.offset.y + stage.clientHeight\r\n            },\r\n            { x: style.left, y: style.top },\r\n            smallCircleSize\r\n        );\r\n\r\n        if (offset) {\r\n            style.small = true;\r\n            style.angle =\r\n                -45 +\r\n                (180 / Math.PI) *\r\n                    Math.atan2(-props.offset.y + stage.clientHeight / 2 - style.top, -props.offset.x + stage.clientWidth / 2 - style.left);\r\n            style.width = smallCircleSize;\r\n            style.height = smallCircleSize;\r\n            style.left = offset.x;\r\n            style.top = offset.y;\r\n            style.transform = `translate(-50%, -50%)`;\r\n        }\r\n    }\r\n    return style;\r\n}\r\n\r\nfunction calcOffest(parentRect, pos, smallCircleSize) {\r\n    var offset = { x: pos.x, y: pos.y };\r\n    if (pos.x > parentRect.left && pos.x < parentRect.right && pos.y > parentRect.top && pos.y < parentRect.bottom) return null;\r\n    if (pos.x <= parentRect.left) offset.x = parentRect.left + smallCircleSize / 2 + 20;\r\n    if (pos.x >= parentRect.right) offset.x = parentRect.right - smallCircleSize / 2 - 20;\r\n    if (pos.y <= parentRect.top) offset.y = parentRect.top + smallCircleSize / 2 + 20;\r\n    if (pos.y >= parentRect.bottom) offset.y = parentRect.bottom - smallCircleSize / 2 - 20;\r\n    return offset;\r\n}\r\n","import Peer from 'peerjs';\r\n\r\nclass MyPeer extends Peer {\r\n  constructor(props) {\r\n    super({\r\n      host: 'screen-sharing-web.herokuapp.com',\r\n      path: '/myapp',\r\n      port: 443,\r\n      secure: true,\r\n      key: 'peerjs',\r\n      debug: 0,\r\n    });\r\n  }\r\n}\r\n\r\nexport default MyPeer;","import React, { useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport DragBox from '../draggable/DragBox';\r\nimport WebRTC from '../../webrtc';\r\nimport Peer from '../../RTCMulti';\r\n\r\nimport Utils from '../../utils/position';\r\n\r\nimport './index.css';\r\n\r\nconst Screen = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n    const videoRef = useRef(null);\r\n    \r\n    useEffect(() => {\r\n        const video = document.getElementById(props.user.stream.id);\r\n        const peer = new Peer(process.env.NODE_ENV === 'production');\r\n\r\n        if (video) {\r\n            window.easyrtc.setVideoObjectSrc(video, props.user.stream);\r\n        }\r\n\r\n        if (props.user.id === 'me') {\r\n            props.onGoToFirstPosition({\r\n                x: props.sceneZoom ? props.user.defPosX / props.sceneZoom : props.user.defPosX,\r\n                y: props.sceneZoom ? props.user.defPosY / props.sceneZoom : props.user.defPosX\r\n            });\r\n\r\n            if (peer) {\r\n                // Connect peer\r\n                peer.on('open', (id) => {\r\n                    // console.log('peer open : ---------', id, peer);\r\n\r\n                    const draggableBack = document.getElementsByClassName('drag-container')[0];\r\n                    const posMe = Utils.getPositionFromStyle(draggableBack);\r\n                    const scaleMe = Utils.getValueFromAttr(draggableBack, 'curzoom').value;\r\n\r\n                    const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2) / scaleMe;\r\n                    const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2) / scaleMe;\r\n\r\n                    const opt = { width: 600, height: 450 };\r\n                    dispatch({\r\n                        type: 'set_peer',\r\n                        value: { peer: peer, id: id }\r\n                    });\r\n                    dispatch({\r\n                        type: 'screenshare_add',\r\n                        value: {\r\n                            userid: 'me',\r\n                            username: 'Me',\r\n                            name: id,\r\n                            width: opt.width,\r\n                            height: opt.height,\r\n                            defX: calc_def_x,\r\n                            defY: calc_def_y,\r\n                            status: 'off'\r\n                        }\r\n                    });\r\n                    WebRTC.getInstance().screenShareAdd({\r\n                        name: id,\r\n                        width: opt.width,\r\n                        height: opt.height,\r\n                        defX: calc_def_x,\r\n                        defY: calc_def_y,\r\n                        status: 'off'\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) videoRef.current.volume = props.zoom === 0.5 ? 0 : props.zoom;\r\n    }, [props.zoom]);\r\n\r\n    const handleDrag = (node, pos, scale) => {\r\n        WebRTC.getInstance().updateMyPosition({ x: pos.x, y: pos.y });\r\n        dispatch({ type: 'user_position', value: { id: props.user.id, defPosX: pos.x * scale, defPosY: pos.y * scale } });\r\n\r\n        if (props.onDrag) props.onDrag(node, props.user, pos, scale);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <DragBox\r\n                type={'circle'}\r\n                offset={props.pos}\r\n                scale={props.sceneZoom}\r\n                initialRect={{\r\n                    left: props.user.defPosX,\r\n                    top: props.user.defPosY,\r\n                    width: 100,\r\n                    height: 100\r\n                }}\r\n                zIndex={50}\r\n                onClickSmall={props.onClickSmall}\r\n                onMouseMove={handleDrag}\r\n                tip={props.user.name}\r\n                draggable={props.user.id === 'me' ? true : false}\r\n                zoom={props.zoom ? props.zoom : 1}\r\n                dragType={'body'}\r\n            >\r\n                <div\r\n                    key={props.user.id}\r\n                    className='screen'\r\n                    id={props.user.id}\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        borderRadius: '50%',\r\n                        border: props.user.id === 'me' ? '2px solid #dcdb53' : '2px solid'\r\n                    }}\r\n                    tabIndex={0}\r\n                >\r\n                    <video\r\n                        ref={videoRef}\r\n                        className='video'\r\n                        style={{ borderRadius: '50%' }}\r\n                        id={props.user.stream.id}\r\n                        controls=''\r\n                        loop=''\r\n                        muted={'me' === props.user.id}\r\n                    ></video>\r\n                </div>\r\n            </DragBox>\r\n        </>\r\n    );\r\n});\r\n\r\nexport default Screen;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport YouTube from 'react-youtube';\r\nimport DragBox from '../draggable/DragBox';\r\nimport './index.css';\r\nimport MicMute1 from '../../images/mic-mute.svg';\r\nimport MicMute0 from '../../images/mic-mute1.svg';\r\nimport closevideo from '../../images/closevideo.svg';\r\nimport WebRTC from '../../webrtc';\r\n\r\nconst YoutubeUpload = React.memo((props) => {\r\n    const videoRef = useRef(null);\r\n    const dbRef = useRef(null);\r\n    const dispatch = useDispatch();\r\n    const [youtubeMute, setYoutubeMute] = useState('off');\r\n    const youtubeMuteAudio = 'youtubeAudio_' + props.video.value;\r\n\r\n    var realCurTime = 0;\r\n    const opts = {\r\n        playerVars: {\r\n            autoplay: 1,\r\n            origin: 'https://webrtc.bcisummit.com',\r\n            // origin: 'http://localhost:3000/conference',\r\n            enablejsapi: 1,\r\n            loop: 1,\r\n            autohide: 1,\r\n            showinfo: 0,\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) {\r\n            videoRef.current.internalPlayer.unMute();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) {\r\n            if (props.video.videoplay) {\r\n                videoRef.current.internalPlayer.seekTo(props.video.curtime);\r\n                videoRef.current.internalPlayer.playVideo();\r\n            } else videoRef.current.internalPlayer.pauseVideo();\r\n        }\r\n    }, [props.video.videoplay]);\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) videoRef.current.internalPlayer.setVolume(props.volume * 100 * (youtubeMute === 'off' ? 1 : 0));\r\n    }, [youtubeMute, props.volume]);\r\n\r\n    const handleDragMeForYoutube = (node, pos, scale) => {\r\n        dispatch({\r\n            type: 'youtube_position',\r\n            value: {\r\n                name: props.video.name,\r\n                width: node.clientWidth,\r\n                height: node.clientHeight,\r\n                defX: pos.x,\r\n                defY: pos.y\r\n            }\r\n        });\r\n        WebRTC.getInstance().youtubePosition({\r\n            name: props.video.name,\r\n            width: node.clientWidth,\r\n            height: node.clientHeight,\r\n            defX: pos.x,\r\n            defY: pos.y\r\n        });\r\n    };\r\n    const handleClose = (value) => {\r\n        dispatch({ type: 'youtube_remove', name: value });\r\n        WebRTC.getInstance().youtubeRemove({ name: value });\r\n    };\r\n    const handleYouTubePlay = (event) => {\r\n        dispatch({ type: 'youtube_play', value: { name: props.video.name, videoplay: true, curtime: realCurTime } });\r\n        WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: true });\r\n    };\r\n    const handleYouTubePause = (event) => {\r\n        dispatch({ type: 'youtube_play', value: { name: props.video.name, videoplay: false, curtime: realCurTime } });\r\n        WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: false, curtime: realCurTime, videoplaying: false });\r\n    };\r\n    const handleStateChange = (e) => {\r\n        const currentTime = videoRef.current.internalPlayer.getCurrentTime();\r\n        currentTime.then(function (result) {\r\n            realCurTime = result;\r\n        });\r\n    };\r\n    const toggleChange = () => {\r\n        // console.log(youtubeMute)\r\n        if (youtubeMute === 'on') {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute1;\r\n                setYoutubeMute('off');\r\n            }\r\n        } else {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute0;\r\n                setYoutubeMute('on');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <DragBox\r\n            type=\"rectangle\"\r\n            ref={dbRef}\r\n            offset={props.pos}\r\n            scale={props.sceneZoom}\r\n            initialRect={{ left: props.video.defX, top: props.video.defY, width: props.video.width, height: props.video.height }}\r\n            zIndex={props.video.id === 'me' ? 10 : 5}\r\n            onResize={handleDragMeForYoutube}\r\n            onMouseUp={handleDragMeForYoutube}\r\n            draggable={props.video.id === 'me' ? true : false}\r\n            sizable={props.video.id === 'me' ? true : false}\r\n            zoom={1}\r\n            aspect\r\n            dragType=\"title\"\r\n        >\r\n            <div\r\n                data-v-c1f79ed4=\"\"\r\n                data-v-6e496afa=\"\"\r\n                data-v-7e3fe256=\"\"\r\n                key={props.video.id}\r\n                className=\"youtube-el\"\r\n                style={{ width: '100%', zIndex: props.video.id === 'me' ? 10 : 5 }}\r\n            >\r\n                <div data-v-a995c326=\"\" data-v-c1f79ed4=\"\" className=\"header pointer hidden\">\r\n                    <div data-v-a995c326=\"\" className=\"title\">\r\n                        Pinned by {props.video.username}\r\n                    </div>\r\n                </div>\r\n\r\n                <div data-v-c1f79ed4=\"\" className={`player ${props.video.id === 'me' ? null : 'pointer-events-none'}`}>\r\n                    <YouTube\r\n                        ref={videoRef}\r\n                        videoId={props.video.value}\r\n                        opts={opts}\r\n                        onPlay={props.video.id === 'me' ? (e) => handleYouTubePlay(e) : null}\r\n                        onPause={props.video.id === 'me' ? (e) => handleYouTubePause(e) : null}\r\n                        onStateChange={(e) => handleStateChange(e)}\r\n                    />\r\n                </div>\r\n                {props.video.id === 'me' ? null : (\r\n                    <img\r\n                        onClick={() => toggleChange()}\r\n                        data-v-c1f79ed4=\"\"\r\n                        id={youtubeMuteAudio}\r\n                        svg-inline=\"\"\r\n                        src={MicMute1}\r\n                        className=\"mute\"\r\n                        alt=\"youtubeAudio\"\r\n                    ></img>\r\n                )}\r\n            </div>\r\n            {props.video.id === 'me' && (\r\n                <div onClick={() => handleClose(props.video.name)} className=\"cus_close\">\r\n                    <img data-v-6a2f6b36 src={closevideo} alt=\"closevideo.svg\" />\r\n                </div>\r\n            )}\r\n            \r\n        </DragBox>\r\n    );\r\n});\r\nexport default YoutubeUpload;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport DragBox from '../draggable/DragBox'\r\n\r\nimport './index.css';\r\nimport closeimage from '../../images/closevideo.svg'\r\nimport WebRTC from '../../webrtc';\r\n\r\nconst ImageUpload = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const handleImageDrag = (node, pos, scale) => {\r\n        imageHandle(node, pos, scale);\r\n    }\r\n    const handleImageResize = (node, pos, scale) => {\r\n        imageHandle(node, pos, scale);\r\n    }\r\n    function imageHandle (node, pos, scale) {\r\n        WebRTC.getInstance().imagePosition({ name: props.image.name, width: node.clientWidth, height: node.clientHeight, defX: pos.x, defY: pos.y })\r\n        dispatch({type: 'image_position', value: { name: props.image.name, width: node.clientWidth, height: node.clientHeight, defX: pos.x, defY: pos.y } })\r\n    }\r\n    const handleClose = (value) => {\r\n        dispatch({type: 'image_remove', name: value})\r\n        WebRTC.getInstance().imageRemove({name: value})\r\n    }\r\n\r\n    return (\r\n        <DragBox\r\n            type=\"rectangle\"\r\n            offset={ props.pos }\r\n            scale={ props.sceneZoom }\r\n            initialRect={{ left: props.image.defX, top: props.image.defY, width: props.image.width, height: props.image.height }}\r\n            zIndex={ props.image.id === 'me' ? 10 : 5 }\r\n            onMouseUp={handleImageDrag}\r\n            onResize={handleImageResize}\r\n            draggable = { props.image.id === 'me' ? true : false }\r\n            sizable = { props.image.id === 'me' ? true : false } \r\n            zoom={1}\r\n            aspect\r\n            dragType='all'\r\n        >\r\n            <div key={props.image.id} className='cus_content'>\r\n                <div className=\"cus_header pointer hidden\" style={{ zIndex: props.image.id === 'me' ? 10 : 5 }}>\r\n                    <div className=\"cus_title\">Pinned by {props.image.username}</div>\r\n                </div>\r\n                <img src={props.image.value} className=\"image-frame\" alt=\"map-transparent\" />\r\n            </div>\r\n            {props.image.id==='me' &&\r\n                <div onClick={() => handleClose(props.image.name)} className=\"cus_close\" >\r\n                    <img data-v-6a2f6b36 src={closeimage} alt='closevideo.svg' />\r\n                </div>\r\n            }\r\n        </DragBox>\r\n    );\r\n})\r\nexport default ImageUpload;","import React from 'react';\r\nimport './index.css';\r\n\r\nexport default class DragContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n    }\r\n    state = {\r\n        pos: { x: 0, y: 0 },\r\n        dragging: false,\r\n        rel: null, // position relative to the cursor\r\n        sceneZoom: 1\r\n    };\r\n    // we could get away with not having this (and just having the listeners on\r\n    // our div), but then the experience would be possibly be janky. If there's\r\n    // anything w/ a higher z-index that gets in the way, then you're toast,\r\n    // etc.\r\n    componentDidUpdate(props, state) {\r\n        if (this.state.dragging && !state.dragging) {\r\n            document.addEventListener('mousemove', this.onMouseMove);\r\n            document.addEventListener('mouseup', this.onMouseUp);\r\n        } else if (!this.state.dragging && state.dragging) {\r\n            document.removeEventListener('mousemove', this.onMouseMove);\r\n            document.removeEventListener('mouseup', this.onMouseUp);\r\n        }\r\n    }\r\n    // calculate relative position to the mouse and set dragging=true\r\n    onMouseDown = (e) => {\r\n        // only left mouse button\r\n        const ele = document.elementFromPoint(e.clientX, e.clientY);\r\n        if (e.button !== 0 && ele !== this.myRef.current) return;\r\n        var pos = {\r\n            left: e.target.offsetLeft,\r\n            top: e.target.offsetTop\r\n        };\r\n        this.setState({\r\n            dragging: true,\r\n            rel: {\r\n                x: e.pageX - pos.left,\r\n                y: e.pageY - pos.top\r\n            }\r\n        });\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onMouseUp = (e) => {\r\n        this.setState({ dragging: false });\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onMouseMove = (e) => {\r\n        if (!this.state.dragging) return;\r\n        const newPos = {\r\n            x: e.pageX - this.state.rel.x,\r\n            y: e.pageY - this.state.rel.y\r\n        };\r\n        if (this.props.onMove) {\r\n            this.props.onMove(this.myRef.current, DragContainer.positionToParent(this.props, this.props.sceneZoom, newPos));\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onWheel = (ev) => {\r\n        const stage = document.getElementById('stage');\r\n        var cursor_x = ev.clientX - stage.offsetLeft,\r\n            cursor_y = ev.clientY - stage.offsetTop;\r\n        // console.log(cursor_x, cursor_y);\r\n        var newZoom = Math.min(\r\n            this.props.maxZoom ? this.props.maxZoom : 3,\r\n            Math.max(this.props.minZoom ? this.props.minZoom : 0.5, this.state.sceneZoom + (ev.deltaY < 0 ? 0.1 : -0.1))\r\n        );\r\n        newZoom = DragContainer.zoomToParent(this.props, newZoom);\r\n        const newPos = {\r\n            x: this.myRef.current.offsetLeft,\r\n            y: this.myRef.current.offsetTop\r\n        };\r\n        newPos.x = newPos.x - ((cursor_x - newPos.x) * (newZoom - this.state.sceneZoom)) / this.state.sceneZoom;\r\n        newPos.y = newPos.y - ((cursor_y - newPos.y) * (newZoom - this.state.sceneZoom)) / this.state.sceneZoom;\r\n        \r\n        if (this.props.onZoom) {\r\n            this.props.onZoom(this.myRef.current, newZoom, DragContainer.positionToParent(this.props, newZoom, newPos));\r\n        }\r\n    };\r\n    static zoomToParent = (props, zoom) => {\r\n        if (props.fitParent) {\r\n            const stage = document.getElementById('stage');\r\n            if (stage) return Math.max(Math.max(zoom, stage.clientWidth / props.width), stage.clientHeight / props.height);\r\n        }\r\n        return zoom;\r\n    };\r\n    static positionToParent = (props, zoom, pos) => {\r\n        const newPos = { ...pos };\r\n        if (props.fitParent) {\r\n            const stage = document.getElementById('stage');\r\n            if (stage) {\r\n                newPos.x = Math.min(0, Math.max(-props.width * zoom + stage.clientWidth, pos.x));\r\n                newPos.y = Math.min(0, Math.max(-props.height * zoom + stage.clientHeight, pos.y));\r\n            }\r\n        }\r\n        return newPos;\r\n    };\r\n    static getDerivedStateFromProps(props, state) {\r\n        return {\r\n            pos: DragContainer.positionToParent(props, props.sceneZoom, props.position),\r\n            sceneZoom: DragContainer.zoomToParent(props, props.sceneZoom)\r\n        };\r\n    }\r\n    render() {\r\n        return (\r\n            <div\r\n                className=\"drag-container\"\r\n                onWheel={this.onWheel}\r\n                ref={this.myRef}\r\n                onMouseDown={this.onMouseDown}\r\n                style={{\r\n                    border: `${this.props.debug ? 3 : 0}px solid red`,\r\n                    position: 'relative',\r\n                    left: this.state.pos.x + 'px',\r\n                    top: this.state.pos.y + 'px',\r\n                    background: `url(${this.props.background})`,\r\n                    backgroundSize: 'cover',\r\n                    width: this.props.width * this.state.sceneZoom,\r\n                    height: this.props.height * this.state.sceneZoom,\r\n                    // transform: `scale(${this.state.zoom})`,\r\n                }}\r\n                curzoom={this.state.sceneZoom}\r\n            >\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DragBox from '../draggable/DragBox';\r\n\r\nimport './index.css';\r\n// import Peer from '../../RTCMulti';\r\nimport WebRTC from '../../webrtc';\r\n\r\nconst ScreenShare = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n    const self = useSelector((state) => state.screens.peer)\r\n    const screenshare = useSelector((state) => state.buttons.screenshare);\r\n    const videoShareRef = useRef(null);\r\n    const [isNavigatorSelect, setIsNavigatorSelect] = useState(false);\r\n    const _mediaStream = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (self.peer && props.screenshare.status === 'on') {\r\n            if (props.screenshare.userid === 'me') {\r\n                // console.log('share session : ---------', props.screenshare)\r\n                self.peer.on('connection', (conn) => {\r\n                    conn.on('data', (id) => {\r\n                        if (_mediaStream.current !== null && self.peer) {\r\n                            self.peer.call(id, _mediaStream.current);\r\n                        }\r\n                    });\r\n                    conn.on('error', () => {\r\n                        console.error('Connection with self.peer was broken');\r\n                    });\r\n                });\r\n\r\n                navigator.mediaDevices\r\n                    .getDisplayMedia({ video: { width: 1280, height: 720 } })\r\n                    .then((mediaStream) => {\r\n                        setIsNavigatorSelect(true);\r\n                        if (videoShareRef.current) {\r\n                            videoShareRef.current.srcObject = mediaStream;\r\n                            videoShareRef.current.play();\r\n                            _mediaStream.current = mediaStream;\r\n                        } else {\r\n                            console.error('No video tag reference!');\r\n                        }\r\n                        WebRTC.getInstance().screenShareChange({ status: props.screenshare.status === 'on', name: props.screenshare.name });\r\n\r\n                        _mediaStream.current.getVideoTracks()[0].onended = () => {\r\n                            dispatch({\r\n                                type: 'screenshare_change',\r\n                                value: { status: props.screenshare.status === 'on' ? 'off' : 'on', userid: 'me' }\r\n                            });\r\n                            dispatch({ type: 'click_screenshare', value: screenshare === 'on' ? 'off' : 'on' });\r\n\r\n                            WebRTC.getInstance().screenShareChange(props.screenshare.status === 'off');\r\n                            document.getElementById('screenshare').src = '/static/media/screenshare-off.44d81ce8.svg';\r\n                        };\r\n                    })\r\n                    .catch(function (err) {\r\n                        //log to console first\r\n                        // console.log(err);\r\n                        if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\r\n                            //required track is missing\r\n                            // console.log('NotFoundError, DevicesNotFoundError');\r\n                        } else if (err.name === 'NotReadableError' || err.name === 'TrackStartError') {\r\n                            //webcam or mic are already in use\r\n                            // console.log('NotReadableError, TrackStartError');\r\n                        } else if (err.name === 'OverconstrainedError' || err.name === 'ConstraintNotSatisfiedError') {\r\n                            //constraints can not be satisfied by avb. devices\r\n                            // console.log('OverconstrainedError, ConstraintNotSatisfiedError');\r\n                        } else if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n                            //permission denied in browser\r\n                            dispatch({\r\n                                type: 'screenshare_change',\r\n                                value: { status: 'off', userid: 'me' }\r\n                            });\r\n                            dispatch({ type: 'click_screenshare', value: screenshare === 'on' ? 'off' : 'on' });\r\n                            document.getElementById('screenshare').src = '/static/media/screenshare-off.44d81ce8.svg';\r\n                        } else if (err.name === 'TypeError' || err.name === 'TypeError') {\r\n                            //empty constraints object\r\n                            // console.log('TypeError');\r\n                        } else {\r\n                            //other errors\r\n                            // console.log('Error: ' + err.name);\r\n                        }\r\n                    });\r\n            } else {\r\n                // console.log('watch session : -------------', props.screenshare, props.screenshare.name)\r\n                const conn = self.peer.connect(props.screenshare.name);\r\n                if (conn) {\r\n                    conn.on('open', () => {\r\n                        // console.log('watch open : --------- ', self.peer, self.id)\r\n                        if (self.peer) {\r\n                            conn.send(self.id);\r\n                        }\r\n                    });\r\n\r\n                    self.peer &&\r\n                        self.peer.on('call', (call) => {\r\n                            call.answer();\r\n                            call.on('stream', (incoming) => {\r\n                                if (videoShareRef.current !== null) {\r\n                                    videoShareRef.current.srcObject = incoming;\r\n                                    if (incoming.active) {\r\n                                        videoShareRef.current.play();\r\n                                        incoming.getTracks().forEach((track) => {\r\n                                            track.addEventListener('ended', () => {\r\n                                                console.info('Stream ended.');\r\n                                            });\r\n                                        });\r\n                                    } else {\r\n                                        incoming.onaddtrack = () => {\r\n                                            if (videoShareRef.current) {\r\n                                                videoShareRef.current.play();\r\n                                            }\r\n                                        };\r\n                                    }\r\n                                }\r\n                                console.info('Connected');\r\n                            });\r\n\r\n                            call.on('error', (error) => {\r\n                                console.error(error);\r\n                            });\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        if (props.screenshare.status === 'off' && props.screenshare.userid === 'me' && _mediaStream.current) {\r\n            _mediaStream.current.getVideoTracks()[0].stop()\r\n            WebRTC.getInstance().screenShareChange(props.screenshare.status === 'off');\r\n        }\r\n    }, [props.screenshare.status, self.peer]);\r\n\r\n    const handleScreenShareDragAndResize = (node, pos, scale) => {\r\n        WebRTC.getInstance().screenSharePosition({\r\n            name: props.screenshare.name,\r\n            width: node.clientWidth,\r\n            height: node.clientHeight,\r\n            defX: pos.x,\r\n            defY: pos.y\r\n        });\r\n\r\n        dispatch({\r\n            type: 'screenshare_position',\r\n            value: { name: props.screenshare.name, width: node.clientWidth, height: node.clientHeight, defX: pos.x, defY: pos.y }\r\n        });\r\n    };\r\n\r\n    return props.screenshare.status === 'on' ? (\r\n        <DragBox\r\n            type=\"rectangle\"\r\n            offset={props.pos}\r\n            scale={props.sceneZoom}\r\n            initialRect={{\r\n                left: props.screenshare.defX,\r\n                top: props.screenshare.defY,\r\n                width: props.screenshare.width,\r\n                height: props.screenshare.height\r\n            }}\r\n            zIndex={props.screenshare.userid === 'me' ? 20 : 15}\r\n            onMouseUp={handleScreenShareDragAndResize}\r\n            onResize={handleScreenShareDragAndResize}\r\n            draggable={props.screenshare.userid === 'me' ? true : false}\r\n            sizable={props.screenshare.userid === 'me' ? true : false}\r\n            zoom={props.zoom ? props.zoom : 1}\r\n            aspect\r\n            dragType=\"all\"\r\n        >\r\n            <video\r\n                ref={videoShareRef}\r\n                className=\"screenshare\"\r\n                id={props.screenshare.name}\r\n                controls=\"\"\r\n                loop=\"\"\r\n                style={{ display: isNavigatorSelect ? 'block' : props.screenshare.userid !== 'me' ? 'block' : 'none' }}\r\n                muted={'me' === props.screenshare.userid}\r\n            ></video>\r\n        </DragBox>\r\n    ) : null;\r\n});\r\nexport default ScreenShare;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n// import { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport * as qs from 'query-string';\r\n\r\nimport Navbar from '../components/navbar';\r\nimport WebRTC from '../webrtc';\r\nimport Screen from '../components/screen';\r\nimport YoutubeUpload from '../components/youtubeupload';\r\nimport ImageUpload from '../components/imageupload';\r\nimport DragContainer from '../components/draggable/DragContainer';\r\nimport ScreenShare from '../components/screenshare';\r\n\r\nimport img_small from '../images/map-small@2x.0c2a372b.png';\r\nimport img_big from '../images/map-big@2x.44a3f15c.png';\r\n\r\nimport './index.css';\r\n\r\nfunction Conference(props) {\r\n    const dispatch = useDispatch();\r\n    const query = qs.parse(props.location.search);\r\n    const users = useSelector((state) => state.users);\r\n    const videos = useSelector((state) => state.screens.videos);\r\n    const images = useSelector((state) => state.screens.images);\r\n    const screenshares = useSelector((state) => state.screens.screenshares);\r\n    const [userClose, setUserClose] = useState(false);\r\n    const [pos, setPos] = useState({ x: 0, y: 0 });\r\n    const [mePos, setMePos] = useState({ x:0, y: 0 });\r\n    const [sceneZoom, setSceneZoom] = useState(1);\r\n\r\n    // console.log('Conference : ------------- ', query)\r\n    useEffect(() => {\r\n        WebRTC.getInstance().startConference(dispatch, null, query.space, query.uname);\r\n    }, []);\r\n \r\n    const handleSetUserClose = (value) => {\r\n        setUserClose(value);\r\n    };\r\n    const handleDrag = (dom, pos) => {\r\n        setPos(pos);\r\n    };\r\n    const handleZoom = (dom, zoom, position) => {\r\n        setSceneZoom(zoom);\r\n        setPos(position);\r\n    };\r\n    const handleClickSmall = (smallPos) => {\r\n        const stage = document.getElementById('stage');\r\n        setPos({\r\n            x: Math.max(Math.min(0, stage.clientWidth / 2 - smallPos.x)),\r\n            y: Math.min(0, stage.clientHeight / 2 - smallPos.y)\r\n        });\r\n    };\r\n    const handleGoToFirstPosition = (pos) => {\r\n        handleClickSmall(pos);\r\n    };\r\n    const handleDragMe = (node, me, pos, scale) => {\r\n        setMePos(pos);\r\n    };\r\n    const calcZoom = (user) => {\r\n        if (user.id === 'me' && mePos.x === 0 && mePos.y === 0) {\r\n            setMePos({ x: user.defPosX, y: user.defPosY });\r\n        } \r\n        if (user.id !== 'me') { \r\n            const dist = Math.max(\r\n                1,\r\n                Math.sqrt((mePos.x - user.defPosX) * (mePos.x - user.defPosX) + (mePos.y - user.defPosY) * (mePos.y - user.defPosY))\r\n            );\r\n            const scaleVal = Math.max(0.5, Math.min(1, 150 / dist));\r\n            return scaleVal;\r\n        }\r\n        return 1;\r\n    };\r\n    const calcVolume = (video) => {\r\n        const dist = getDistanceByRectAndPosition(\r\n            {\r\n                left: video.defX - video.width / 2,\r\n                right: video.defX + video.width / 2,\r\n                top: video.defY - video.height / 2,\r\n                bottom: video.defY + video.height / 2\r\n            }, mePos\r\n        );\r\n\r\n        const volume = dist === 0 ? 1 : Math.max(0, Math.min(1, Math.pow(100 / dist, 4)));\r\n        return volume < 0.01 ? 0 : volume;\r\n    }\r\n    const getDistanceByPosition = (p1, p2) => {\r\n        return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\r\n    };\r\n    const getDistanceByRectAndPosition = (rect, pos) => {\r\n        let distance = -1;\r\n        if (pos.x > rect.left && pos.x < rect.right) {\r\n            distance = Math.min(Math.abs(pos.y - rect.top), Math.abs(pos.y - rect.bottom));\r\n        }\r\n        if (pos.y > rect.top && pos.y < rect.bottom) {\r\n            if (distance === -1) distance = Math.min(Math.abs(pos.x - rect.left), Math.abs(pos.x - rect.right));\r\n            else distance = 0;\r\n        }\r\n        if (distance >= 0) return distance;\r\n        return Math.min(\r\n            Math.min(\r\n                getDistanceByPosition(pos, { x: rect.left, y: rect.top }),\r\n                getDistanceByPosition(pos, { x: rect.left, y: rect.bottom })\r\n            ),\r\n            Math.min(\r\n                getDistanceByPosition(pos, { x: rect.right, y: rect.top }),\r\n                getDistanceByPosition(pos, { x: rect.right, y: rect.bottom })\r\n            )\r\n        );\r\n    };\r\n    return (\r\n        <div className=\"App\">\r\n            <div\r\n                id=\"stage\"\r\n                style={{\r\n                    position: 'relative',\r\n                    overflow: 'hidden',\r\n                    backgroundImage: `url(${img_small})`,\r\n                    width: '100vw',\r\n                    height: '100vh',\r\n                    left: 0,\r\n                    top: 0\r\n                }}\r\n            >\r\n                <Navbar onSetUserClose={handleSetUserClose} videos={videos} images={images} query={query} />\r\n                <DragContainer\r\n                    // debug\r\n                    fitParent\r\n                    background={img_big}\r\n                    width={WebRTC.getInstance().width}\r\n                    height={WebRTC.getInstance().height}\r\n                    position={pos}\r\n                    sceneZoom={sceneZoom}\r\n                    onMove={handleDrag}\r\n                    onZoom={handleZoom}\r\n                    maxZoom={3}\r\n                    minZoom={0.2}\r\n                >\r\n                    {users.map((user) => (\r\n                        <Screen\r\n                            key={user.id}\r\n                            pos={pos}\r\n                            sceneZoom={sceneZoom}\r\n                            zoom={calcZoom(user)}\r\n                            user={user}\r\n                            onClickSmall={handleClickSmall}\r\n                            onDrag={user.id === 'me' ? handleDragMe : null}\r\n                            onGoToFirstPosition={handleGoToFirstPosition}\r\n                        />\r\n                    ))}\r\n                    {videos.map((video) => (\r\n                        <YoutubeUpload\r\n                            key={video.name}\r\n                            video={video}\r\n                            pos={pos}\r\n                            mePos={mePos}\r\n                            sceneZoom={sceneZoom}\r\n                            userClose={userClose}\r\n                            room={query.space}\r\n                            volume={calcVolume(video)}\r\n                        />\r\n                    ))}\r\n                    {images.map((image) => (\r\n                        <ImageUpload\r\n                            key={image.value}\r\n                            image={image}\r\n                            pos={pos}\r\n                            sceneZoom={sceneZoom}\r\n                            userClose={userClose}\r\n                            room={query.space}\r\n                        />\r\n                    ))}\r\n                    {screenshares.map((screenshare, key) => (\r\n                        <ScreenShare\r\n                            key={'share_' + key}\r\n                            screenshare={screenshare}\r\n                            pos={pos}\r\n                            sceneZoom={sceneZoom}\r\n                            room={query.space}\r\n                        />\r\n                    ))}\r\n                </DragContainer>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Conference;\r\n","import React, { useState } from \"react\";\r\nimport ReactSpinner from 'react-spinkit'\r\n// import {Redirect} from 'react-router-dom';\r\nimport * as qs from 'query-string'\r\n\r\nimport joinbtn from '../images/joinbtn.svg'\r\nimport Footer from '../components/footer';\r\nimport './index.css';\r\n\r\nfunction Room(props) {\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const query = qs.parse(props.location.search);\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n\r\n        const { value } = event.target;\r\n        if (value.length > 0) {\r\n            setIsVerified(true);\r\n            setUserName(value);\r\n        }\r\n        else\r\n            setIsVerified(false);\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n        \r\n        window.localStorage.setItem('o', true)\r\n        window.localStorage.setItem('t', 'video-meeting')\r\n        window.localStorage.setItem('r', query.space)\r\n        window.localStorage.setItem('r', 'tryme')\r\n        window.localStorage.setItem('userName', userName)\r\n\r\n        setTimeout(()=>{\r\n            props.history.push('/conference?space='+query.space+'&uname='+userName);\r\n        }, 2500);\r\n    }\r\n    \r\n    return (\r\n    <div data-v-12a888fb=\"\" className=\"space\">\r\n        <div data-v-2db9ff64=\"\" style={{ position: 'absolute', right: '10%', top: '5%'}} data-v-12a888fb=\"\">\r\n            <div data-v-2f32af68=\"\" >\r\n                {query.space}\r\n            </div>\r\n        </div>\r\n        <div data-v-a74c9690=\"\" data-v-12a888fb=\"\" className=\"entrance ent-div\">\r\n            <form data-v-a74c9690=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)}>\r\n                <input data-v-a74c9690=\"\" type=\"text\" placeholder=\"Your Name\" className=\"name\" onChange={(e)=>handleChange(e)}/>\r\n                <button data-v-a74c9690=\"\" type=\"submit\" disabled={!isVerified} className=\"pointer\">\r\n                    {sendingEmail\r\n                    ? <ReactSpinner name='three-bounce' />\r\n                    : <img src={joinbtn} alt='joinbtn' />\r\n                    }\r\n                </button>\r\n            </form>\r\n        </div>\r\n        <Footer />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Room;\r\n","import React from 'react'\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute\r\n} from 'react-router-dom'\r\nimport './App.css'\r\nimport Home from './views/home'\r\nimport Conference from './views/conference'\r\nimport Room from './views/room'\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Home}></Route>\r\n\t\t\t\t\t<Route path=\"/room\" component={Room}></Route>\r\n\t\t\t\t\t<Route path=\"/conference\" component={Conference}></Route>\r\n\t\t\t\t\t<Route path=\"/\" component={Home}></Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport rootReducer from './reducers';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nconst store = createStore (\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/closevideo.7b864b90.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube.43fef7ea.svg\";","module.exports = __webpack_public_path__ + \"static/media/uploadimage.a7edbc9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-off.44d81ce8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-1.e529fa66.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-1.7268da01.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute.9a8a5f6e.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e50007f4.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.c4f7f08f.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube1.3933bad6.svg\";","module.exports = __webpack_public_path__ + \"static/media/users.78454788.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-on.341a9dd8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-0.34d55c9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-0.e55d1c5b.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.da4bdda8.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-small.e1cf996c.svg\";","module.exports = __webpack_public_path__ + \"static/media/support.dc413a12.svg\";","module.exports = __webpack_public_path__ + \"static/media/close.81170d04.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute1.c0d28aa1.svg\";","module.exports = __webpack_public_path__ + \"static/media/map-small@2x.0c2a372b.0c2a372b.png\";","module.exports = __webpack_public_path__ + \"static/media/map-big@2x.44a3f15c.9880d0f9.png\";","module.exports = __webpack_public_path__ + \"static/media/joinbtn.d5e1ecf0.svg\";"],"sourceRoot":""}