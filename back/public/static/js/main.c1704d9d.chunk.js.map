{"version":3,"sources":["reducers/buttons.js","reducers/users.js","reducers/chats.js","reducers/screen.js","reducers/index.js","components/dialog/index.js","components/dialog/Spinner.js","components/dialog/roomdlg.js","config.js","components/footer/index.js","views/home.js","components/draggable/dragEvent.js","components/draggable/draggableContainer.js","webrtc/index.js","components/button/index.js","components/dialog/videodlg.js","components/dialog/imagedlg.js","components/navbar/index.js","utils/position.js","components/screen/index.js","components/youtubeupload/index.js","components/imageupload/index.js","components/tip/index.js","views/conference.js","views/room.js","App.js","index.js","images/logo.svg","images/logo-small.svg","images/closevideo.svg","images/youtube.svg","images/uploadimage.svg","images/screenshare-on.svg","images/stopvideo-1.svg","images/stopaudio-1.svg","images/mic-mute.svg","images/success.svg","images/error.svg","images/youtube1.svg","images/users.svg","images/screenshare-off.svg","images/stopvideo-0.svg","images/stopaudio-0.svg","images/support.svg","images/close.svg","images/mic-mute1.svg","images/map-small@2x.0c2a372b.png","images/map-big@2x.44a3f15c.png","images/joinbtn.svg","images/logo-mark.svg"],"names":["buttons","state","chat","camera","fullscreen","mic","screenshare","action","type","value","users","find","user","id","console","log","media","filter","map","status","chats","setTimeout","messages","document","getElementsByClassName","length","scrollIntoView","behavior","key","screens","bgMoving","videos","images","new_videos","remove_videos","x","name","video","peerId","moved_videos","play_videos","new_images","img","remove_images","moved_images","image","rootReducer","combineReducers","Dialog","window","$","plainModal","props","className","spinning","icon","faSync","size","RoomDialog","useState","isVerified","sendingEmail","setSendingEmail","mailStatus","setMailStatus","email","setEmail","space","setSpace","form","setForm","errors","setErrors","validEmailRegex","RegExp","handleChange","event","preventDefault","target","test","handleCancel","useEffect","content1","data-v-9deb956c","onSubmit","e","fetch","method","headers","aCcePt","body","JSON","stringify","then","res","json","data","reset","catch","err","ref","noValidate","input","onChange","onClick","disabled","count","Object","values","forEach","val","countErrors","Spinner","content2","src","successsvg","alt","content3","errorsvg","style","color","data-v-5c9875d0","aria-expanded","data-modal","role","aria-modal","Footer","React","memo","data-v-3de1367d","href","rel","Home","show","getZoom","ele","zoom","parseFloat","setCurrentDragElement","firstPos","y","currentDragElement","dragInfo","currPos","offsetLeft","offsetTop","getCurrentDragElement","calcCurrentPos","mousePos","pos1","pos2","addPoint","multiplyPoint","DraggableContainer","Promise","resolve","reject","getMyVideo","eleScreen","getElementById","eleMyVideo","backPosArr","parentElement","transform","match","Number","left","top","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","correctPos","setScreenPositionWithChildElement","elementId","zoomable","removeEventListener","onMouseDown","addEventListener","onMouseMove","onMouseUp","onWheel","error","attachDraggableEvent","isZoom","g_currScale","elementFromPoint","button","newPos","targetX","width","targetY","height","currZoom","deltaY","Math","min","max","handleWheelChangeValue","onWheelChange","position","backgroundImage","background","children","WebRTC","client","roomName","userName","myPosition","youtubes","sharedUserId","enableScreenShare","enableCamera","enableMic","visibleScreenWidth","offsetWidth","visibleScreenHeight","offsetHeight","videoQualities","text","frameRate","currentVideoQuality","this","audioQualities","sampleSize","channelCount","currentAudioQuality","_instance","Login","_browserCompatCheck","username","localStorage","getItem","setItem","generateRoomName","token","location","getUserName","localstream","audioContext","AudioContext","mediaStreamSource","createMediaStreamSource","processor","createScriptProcessor","connect","destination","onaudioprocess","evt","buffer","inputBuffer","numberOfChannels","inputData","getChannelData","inputDataLength","total","i","abs","rms","sqrt","easyrtc","sendPeerMessage","targetRoom","getInstance","enable","onStreamConfigurationChange","room","onSetScreenCapture","youtube","videoplay","videoplaying","curtime","push","rec","cusId","dispatch","disconnect","peerName","fileInput","one","file","files","pow","alert","reader","FileReader","onload","txData","binaryContents","result","userid","align","time","Date","now","sendDataWS","readAsDataURL","click","mode","audio","currentVideoDevice","deviceId","currentAudioDevice","currentContraintMode","updateStreamMode","local","getLocalStream","getTracks","track","stop","navigator","mediaDevices","getUserMedia","stream","addTrack","video_me","setVideoObjectSrc","enableMicrophone","peers","getPeerConnections","pc","getSenders","sender","kind","local_track","replaceTrack","enabled","screenStream","enumerateDevices","devices","dev","found","indexOf","label","videoDevices","audioDevices","updateDevices","owner","removeItem","enableDataChannels","VTCCore","initialize","cameraIsEnabled","micIsEnabled","onError","config","onPeerMessage","msgType","content","idToName","updatePeerPosition","videoId","defX","defY","imageid","imageId","setScreen","arr","split","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","blob","Blob","html","URL","createObjectURL","onStreamAccept","sendServerMessage","defPosX","defPosY","errorCode","errorText","rtcId","onStreamClose","clientId","getId","sWidth","sHeight","updateMyPosition","peer","container","videoEl","removeChild","message","_this","getDisplayMedia","a","audioStream","getVideoTracks","onended","toggleScreenShare","getAudioTracks","cancelled","Button","data-v-2f32af68","title","VideoDialog","useDispatch","setVideo","valid","setValid","url","$1","ytVidId","element","textContent","data-v-6a2f6b36","data-v-6e496afa","elementInput","replace","back_left","back_top","calc_def_x","calc_def_y","uname","youtubeAdd","handleSubmit","ImageDialog","imagePreviewUrl","setImagePreviewUrl","uploadClick","setUploadClick","fileName","setFileName","URLChangedHandler","isImageUrl","image_url","http","XMLHttpRequest","open","send","imageExists","uploadComputer","data-v-bd733764","data-id","onloadend","fileChangedHandler","htmlFor","preview","linkURL","elementUpload","elementLink","handleUpload","handleLink","imageAdd","Navbar","useSelector","toggleChange","type1","value1","toggleCamera","toggleMic","data-v-2db9ff64","data-v-12a888fb","logosvg","display","logosmallsvg","data-v-261ef19f","userssvg","on","off","no","uploadimage","sharedscreen_on","sharedscreen_off","stopvideo0","stopvideo1","stopaudio0","stopaudio1","support","close","closeClient","query","Utils","pos","mul","posArr","rect","right","bottom","Screen","screenid","smallScreenId","nodeRef","useRef","xPos","yPos","firstPosX","setFirstPosX","firstPosY","setFirstPosY","onTimer","getDistanceByRectAndPosition","me_ele","screenMePos","getPositionFromTransform","parentNode","screenCurrObjPos","dist","scale_val","vol","firstElementChild","volume","isFinite","setVolumeForNeighborhood","eleBack","eleFore","dragStart","posMe","posBack","getPositionFromStyle","videoScreen","eleSmall","viewRect","isInRect","appendChild","childNodes","smallPos","multiplyPosition","addPosition","setPositionOfHtmlElement","setScaleByPosition","current","noderef","default","onDragStart","d","detail","onDragStop","posX","posY","back","calculateEdge","scale","curScale","zIndex","lockAspectRatio","enableResizing","disableDragging","data-tip","data-for","borderRadius","marginLeft","marginTop","border","tabIndex","controls","loop","muted","screenX","screenY","innerHTML","onMouseOut","YoutubeUpload","realCurTime","videoRef","youtubeMute","setYoutubeMute","youtubeMuteAudio","videoid","getDistanceByPosition","p1","p2","videoPos","distance","internalPlayer","setVolume","undefined","handleStop","youtubePosition","vdoWidth","vdoHeight","unMute","youtubePlay","seekTo","playVideo","pauseVideo","numbers","cur","topRight","bottomRight","bottomLeft","topLeft","onResizeStop","direction","refval","delta","resizeWidth","parseInt","resizeHeight","data-v-c1f79ed4","data-v-7e3fe256","data-v-a995c326","youtubeRemove","closevideo","opts","origin","playerVars","autoplay","onPlay","onPause","onStateChange","getCurrentTime","svg-inline","MicMute0","MicMute1","ImageUpload","imagePosition","videoWidth","videoHeight","imageRemove","closeimage","Tip","backgroundColor","padding","Conference","startConference","qs","search","videoObj","imageObj","userClose","setUserClose","wheelChange","setWheelChange","onSetUserClose","overflow","img_small","img_big","Room","setIsVerified","setUserName","data-v-a74c9690","history","placeholder","joinbtn","App","path","component","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.c1704d9d.chunk.js","sourcesContent":["const buttons = (state = {chat:'on', camera:'on', fullscreen:'on', mic: 'on', screenshare: 'on'}, action) => {\r\n    switch(action.type){\r\n        case \"click_chat\":\r\n            return {\r\n                ...state,\r\n                chat: action.value\r\n            }\r\n        case \"click_camera\":\r\n            return {\r\n                ...state,\r\n                camera: action.value\r\n            }\r\n        case \"click_fullscreen\":\r\n            return {\r\n                ...state,\r\n                fullscreen: action.value\r\n            }\r\n        case \"click_mic\":\r\n            return {\r\n                ...state,\r\n                mic: action.value\r\n            }\r\n        case \"click_screenshare\":\r\n            return {\r\n                ...state,\r\n                screenshare: action.value\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default buttons;","const users = (state = [], action) => {\r\n    switch(action.type){\r\n        case \"user_add\":\r\n            // console.log('user_add: state ------', state, 'action---------',action)\r\n            if( state.find((user)=>user.id === action.value.id)){\r\n                console.log('Duplicate user error!', action.value)\r\n                return state;\r\n            }\r\n            return [\r\n                ...state,\r\n                { ...action.value, media: {mic:'on', camera:'on'}}\r\n            ]\r\n        case \"user_remove\":\r\n            // console.log('usre_remove: state----------', state, 'action----------', action, 'remove----------',state.filter((user)=>user.id !== action.value.id), '-------')\r\n            return state.filter((user)=>user.id !== action.value.id);\r\n        case \"user_media\":\r\n            // console.log(\"user_media\", action, state)\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                if (action.value.type === 'mic')\r\n                    return {...user, media:{...user.media, mic: action.value.status}}\r\n                if (action.value.type === 'camera')\r\n                    return {...user, media:{...user.media, camera: action.value.status}}\r\n                // console.log(\"user-media: screenshare changes: \", {...user, media:{...user.media, screenshare: action.value.status}})\r\n                return {...user, media:{...user.media, screenshare: action.value.status}}\r\n            });\r\n        case \"user_position\":\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                // console.log('----------user + action: ', user, action, {...user, ...action.value})\r\n                return {...user, ...action.value}\r\n            });\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport default users;","const chats = (state = [], action) => {\r\n    switch(action.type){\r\n        case \"chat_add\":\r\n            // scroll\r\n            setTimeout(()=>{\r\n                    const messages = document.getElementsByClassName('chatitemparent');\r\n                    if (messages.length>0) {\r\n                        messages[messages.length-1].scrollIntoView({behavior: 'smooth'});\r\n                    }\r\n                }, 200);\r\n            return [\r\n                ...state,\r\n                { ...action.value, key: state.length}\r\n            ]\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default chats;","const screens = (state = {bgMoving:false, videos: [], images: []}, action) => {\r\n    switch(action.type){\r\n        // case \"backgound_moving\":\r\n        //     return {\r\n        //         ...state,\r\n        //         bgMoving: action.value\r\n        //     }\r\n        case \"youtube_add\":\r\n            const new_videos = [...state.videos, action.value];\r\n            return {\r\n                ...state,\r\n                videos: new_videos\r\n            }\r\n        case \"youtube_remove\":\r\n            const remove_videos = state.videos.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                videos: remove_videos\r\n            }\r\n        case \"youtube_remove_by_id\":\r\n            return { ...state, videos: state.videos.filter((video)=>{\r\n                return video.id !== action.peerId;\r\n            })}\r\n        case \"youtube_position\":\r\n            const moved_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: moved_videos\r\n            }\r\n        case \"youtube_play\":\r\n            const play_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: play_videos\r\n            }\r\n        case \"image_add\":\r\n            const new_images = [...state.images, action.value];\r\n            return {\r\n                ...state,\r\n                images: new_images\r\n            }\r\n        case \"image_remove_by_id\":\r\n            return { ...state, images: state.images.filter((img)=>{\r\n                return img.id !== action.peerId;\r\n            })}\r\n        case \"image_remove\":\r\n            const remove_images = state.images.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                images: remove_images\r\n            }\r\n        case \"image_position\":\r\n            const moved_images = state.images.map((image) => {\r\n                // console.log(image, action, {...image, ...action.value})\r\n                if (image.name !== action.value.name)\r\n                    return image;\r\n                return {...image, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                images: moved_images\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default screens;","import {combineReducers} from 'redux'\r\nimport buttons from './buttons'\r\nimport users from './users'\r\nimport chats from './chats'\r\nimport screens from './screen'\r\n// import mediadevices from './medias'\r\n\r\nconst rootReducer = combineReducers({\r\n    buttons,\r\n    users,\r\n    chats,\r\n    screens\r\n})\r\n\r\nexport default rootReducer","import './index.css';\r\n\r\nclass Dialog{\r\n    static show(id) {\r\n        const ele = window.$('#'+id);\r\n        ele.plainModal('open')\r\n    }\r\n}\r\nexport default Dialog;","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSync } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport default props =>\r\n  <div className={`fadeIn ${props.spinning}`}>\r\n    <FontAwesomeIcon icon={faSync} size={props.size} />\r\n  </div>","import React, {useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport Recaptcha from 'react-recaptcha';\r\n\r\nimport Spinner from './Spinner'\r\nimport './index.css';\r\nimport successsvg from '../../images/success.svg'\r\nimport errorsvg from '../../images/error.svg'\r\nimport { API_URL } from '../../config'\r\n\r\n\r\nfunction RoomDialog(props){\r\n    const [isVerified, setIsVerified] = useState(true);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [mailStatus, setMailStatus] = useState(2);\r\n    const [email, setEmail] = useState('');\r\n    const [space, setSpace] = useState('');\r\n    const [form, setForm] = useState(null);\r\n    const [errors, setErrors] = useState({\r\n        email: 'Enter your Email!',\r\n        space: 'Enter your Sspace Name!',\r\n    })\r\n\r\n    const validEmailRegex = RegExp(/^(([^<>()\\],;:\\s@]+([^<>()\\],;:\\s@]+)*)|(.+))@(([^<>()[\\],;:\\s@]+)+[^<>()[\\],;:\\s@]{2,})$/i);\r\n\r\n    const countErrors = (errors) => {\r\n        let count = 0;\r\n        delete errors.name\r\n        Object.values(errors).forEach(\r\n            (val) => {\r\n                val.length > 0 && (count = count+1)\r\n            }\r\n        );\r\n        return count;\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n\r\n        switch (name) {\r\n            case 'space':\r\n                errors.space =\r\n                value.length < 5\r\n                    ? 'Space Name must be 5 characters long!'\r\n                    : '';\r\n                break;\r\n            case 'email':\r\n                errors.email =\r\n                validEmailRegex.test(value)\r\n                    ? ''\r\n                    : 'Email is not valid!';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        setErrors({\r\n            ...errors,\r\n            name: value\r\n        })\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n\r\n        fetch(`${API_URL}/email`, {\r\n            method: 'pOSt',\r\n            headers: {\r\n                aCcePt: 'aPpliCaTIon/JsOn',\r\n                'cOntENt-type': 'applicAtion/JSoN'\r\n            },\r\n            body: JSON.stringify({ email: email.value, space: space.value })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            setSendingEmail(false)\r\n            setMailStatus(data.status)\r\n            form.reset()\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#roomdialog').plainModal('close')\r\n\r\n        setTimeout(()=>{\r\n            setSendingEmail(false)\r\n            setMailStatus(2)\r\n            // setIsVerified(false);\r\n        }, 100);\r\n    }\r\n    const onLoadCallback = function () {\r\n    };\r\n    const onVerifyCallback = function () {\r\n        // setIsVerified(true);\r\n    };\r\n    useEffect(()=>{\r\n        if (mailStatus === 2) {\r\n            // ReactDOM.render(\r\n            //     <Recaptcha\r\n            //         sitekey=\"6LdpQwEVAAAAAGM4w3LS9xsD-Hd6yAP_DhIce0nz\"\r\n            //         render=\"explicit\"\r\n            //         onloadCallback={onLoadCallback}\r\n            //         verifyCallback={onVerifyCallback}\r\n            //     />,\r\n            //     document.getElementById('recaptcha')\r\n            // );\r\n        }\r\n    },[mailStatus])\r\n\r\n    const content1 =\r\n        <form data-v-9deb956c=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)} ref={form => setForm(form)} noValidate>\r\n            <div data-v-9deb956c=\"\" className=\"label\" >Your Email</div>\r\n            <input data-v-9deb956c=\"\" type=\"email\" name='email' className=\"email\" ref={input => setEmail(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.email.length > 0 &&\r\n                <span className='error'>{errors.email}</span>}\r\n            <div data-v-9deb956c=\"\" className=\"label\">Space Name</div>\r\n            <input data-v-9deb956c=\"\" type=\"text\" name='space' className=\"space-name\" ref={input => setSpace(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.space.length > 0 &&\r\n                <span className='error'>{errors.space}</span>}\r\n            <div id='recaptcha'/>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    CANCEL\r\n                </button>\r\n                <button data-v-9deb956c=\"\" type='submit' className='create'\r\n                    disabled={ countErrors(errors)===0 && isVerified ? false : true}>\r\n                    {sendingEmail\r\n                    ? <Spinner size='lg' spinning='spinning' />\r\n                    : \"CREATE\"\r\n                    }\r\n                </button>\r\n            </div>\r\n        </form>\r\n    const content2 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={successsvg} alt='successsvg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\">Email sent!\r\n                    <h4 data-v-9deb956c=\"\">Please check your inbox to confirm.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n    const content3 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={errorsvg} alt='error.svg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\" style={{color: '#ff0000'}}>Whoops!\r\n                    <h4 data-v-9deb956c=\"\">Already registered.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n\r\n    return (\r\n        <div data-v-9deb956c=\"\" data-v-5c9875d0=\"\" id ='roomdialog' aria-expanded=\"true\" data-modal=\"create-space\" className=\"create-space-modal v--modal-overlay roomdialog\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal m-dialog\">\r\n                    <div data-v-9deb956c=\"\" className=\"header\">Create Space</div>\r\n                    {mailStatus === 2\r\n                    ? content1\r\n                    : mailStatus === 0\r\n                    ? content2\r\n                    : content3\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default RoomDialog;","// export const API_URL = process.env.NODE_ENV === 'production'\r\n//   ? 'http://ec2-18-222-23-198.us-east-2.compute.amazonaws.com:3113/'\r\n  // : 'http://localhost:3113'\r\nexport const API_URL = process.env.NODE_ENV === 'production'\r\n  ? 'https://webrtc.bcisummit.com'\r\n  : 'https://webrtc.bcisummit.com'\r\n  // : 'localhost:3011' //tesing port","import React from 'react';\r\n\r\nconst Footer = React.memo(props => {\r\n    return (\r\n        <div data-v-3de1367d=\"\" className=\"footer\">\r\n            <div data-v-3de1367d=\"\" className=\"links\">\r\n                <a data-v-3de1367d=\"\" href=\"https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to=seniordev119@gmail.com\" className=\"support-link\" target=\"_blank\" rel=\"noopener noreferrer\">seniordev119@gmail.com</a>\r\n                <span data-v-3de1367d=\"\" className=\"phone-hidden\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                <div data-v-3de1367d=\"\" className=\"legal\">\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/SpatialChat-Privacy-Policy-899c953609d24d3ebbd619506becaa7f\" target=\"_blank\" rel=\"noopener noreferrer\">Privacy Policy</a>\r\n                    <span data-v-3de1367d=\"\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/Terms-of-Service-6f9243e5e25346cfa73df618c90de4fb\" target=\"_blank\" rel=\"noopener noreferrer\">Terms of Service</a>\r\n                </div>\r\n            </div>\r\n            {/* <div data-v-3de1367d=\"\" className=\"copyright\">Designed by FunCorp Lab</div> */}\r\n        </div>\r\n    );\r\n})\r\nexport default Footer;","import React from \"react\";\r\n\r\nimport marksvg from '../images/logo-mark.svg'\r\nimport Dialog from '../components/dialog';\r\nimport RoomDialog from '../components/dialog/roomdlg';\r\nimport Footer from '../components/footer';\r\n\r\nfunction Home(props) {\r\n    return (\r\n    <div data-v-5c9875d0=\"\" className=\"home\">\r\n        {/* <img src={marksvg} alt='marksvg' />\r\n\r\n        <div data-v-5c9875d0=\"\" className=\"slogan\">Your virtual party for up to 50 guests</div> */}\r\n        <div data-v-5c9875d0=\"\" className=\"buttons\">\r\n            <button data-v-5c9875d0=\"\" onClick={()=>{Dialog.show('roomdialog')}} className=\"button\">Create Space</button>\r\n        </div>\r\n        <Footer />\r\n        <RoomDialog />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","export function offsetPoint(pos1, pos2){return {x: pos1.x-pos2.x, y:pos1.y-pos2.y}}\r\nexport function addPoint (pos1, pos2){return {x: pos1.x+pos2.x, y:pos1.y+pos2.y}}\r\nexport function multiplyPoint (pos1, x){return {x: pos1.x*x, y:pos1.y*x}}\r\nexport function getZoom(ele){ return ele.style.zoom===''?1:parseFloat(ele.style.zoom)}\r\nexport function setCurrentDragElement(ele, firstPos={x:0,y:0}){\r\n    window.currentDragElement = ele\r\n    if(ele){\r\n        ele.dragInfo = {\r\n            currPos: {x: ele.offsetLeft, y: ele.offsetTop},\r\n            firstPos:{x: firstPos.x, y: firstPos.y},\r\n        }\r\n    }\r\n}\r\nexport function getCurrentDragElement(){\r\n    return window.currentDragElement;\r\n}\r\n\r\nexport function calcCurrentPos(ele, mousePos){\r\n    // console.log('calcCurrentPos --------------', getZoom(ele))\r\n    return addPoint(\r\n        ele.dragInfo.currPos, \r\n        multiplyPoint(\r\n            offsetPoint(mousePos, ele.dragInfo.firstPos), \r\n            1 / getZoom(ele)\r\n        )\r\n    );\r\n}","import React, { useEffect, useState } from 'react';\r\n// import ReactDOM from 'react-dom';\r\n// import WebRTC from '../../webrtc';\r\nimport {addPoint, offsetPoint, multiplyPoint, getZoom, calcCurrentPos, setCurrentDragElement, getCurrentDragElement,attachDraggableEvent} from './dragEvent'\r\n\r\nconst DraggableContainer = (props)=>{\r\n    useEffect(()=>{\r\n        console.log(\"Attach draggable event for container\")\r\n        const ele = attachDraggableEvent(props.id, props.isZoom)\r\n        setScreenPositionWithChildElement(ele)\r\n        document.g_currScale = 1\r\n    },[]);\r\n    function attachDraggableEvent(elementId, zoomable){\r\n        const ele = document.getElementById(elementId);\r\n        if(ele){\r\n            ele.removeEventListener('mousedown', onMouseDown)\r\n            ele.addEventListener('mousedown', onMouseDown)\r\n            ele.removeEventListener('mousemove', onMouseMove)\r\n            ele.addEventListener('mousemove', onMouseMove)\r\n            ele.removeEventListener('mouseup', onMouseUp)\r\n            ele.addEventListener('mouseup', onMouseUp)\r\n            if(zoomable){\r\n                ele.removeEventListener('wheel', onWheel)\r\n                ele.addEventListener('wheel', onWheel)    \r\n            }\r\n        }else{\r\n            console.error(\"Error in getting HTML element with ID: \", elementId)\r\n        }\r\n        return ele\r\n    }\r\n    function setScreenPositionWithChildElement(ele) {\r\n        new Promise((resolve, reject)=>{\r\n            const getMyVideo = ()=>{\r\n                const eleScreen = document.getElementById('screen_me');\r\n                if(eleScreen){\r\n                    resolve(eleScreen)\r\n                }else{\r\n                    setTimeout(getMyVideo, 100);\r\n                }\r\n            }\r\n            getMyVideo();\r\n        }).then(eleMyVideo=>{\r\n            const backPosArr = eleMyVideo.parentElement.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            const left = backPosArr[0]\r\n            const top = backPosArr[1]\r\n            ele.style.left = (width()/2 - left) + 'px'\r\n            ele.style.top = (height()/2 - top - 50) + 'px'\r\n            correctPos();\r\n        })\r\n    }\r\n    function width(){\r\n        return(window.innerWidth)?\r\n        window.innerWidth:\r\n        document.documentElement.clientWidth||document.body.clientWidth||0;\r\n    }\r\n    function height(){\r\n        return(window.innerHeight)?\r\n        window.innerHeight:\r\n        document.documentElement.clientHeight||document.body.clientHeight||0;\r\n    }\r\n    const onMouseDown = (e)=>{\r\n        var ele = document.elementFromPoint(e.x, e.y);\r\n        if(e.buttons === 1 && e.button === 0 && ele.id === \"background_div\"){\r\n            setCurrentDragElement(ele, e);\r\n        }\r\n    }\r\n    const onMouseMove = (e)=>{\r\n        const ele = getCurrentDragElement();\r\n        \r\n        if( ele && ele.dragInfo && e.buttons === 1 && e.button === 0 && ele.id === \"background_div\") {\r\n            ele.style.zoom = getZoom(e.target)\r\n            const newPos = calcCurrentPos(ele, e)\r\n            ele.style.left = newPos.x + 'px';\r\n            ele.style.top = newPos.y + 'px';\r\n        } \r\n        correctPos();\r\n    }\r\n    const onMouseUp = (e)=>{\r\n        const ele = getCurrentDragElement();\r\n\r\n        if(ele && ele.dragInfo ){\r\n            const newPos = calcCurrentPos(ele, e)\r\n\r\n            ele.style.left = newPos.x + 'px';\r\n            ele.style.top = newPos.y + 'px';\r\n        }\r\n        setCurrentDragElement(null);\r\n        correctPos();\r\n    }\r\n    const correctPos = ()=>{\r\n        const ele = document.getElementById(props.id);\r\n        const targetX = ele.offsetLeft > 0 ?\r\n                             0 : \r\n                             ele.offsetLeft < ele.parentElement.clientWidth-props.width ?\r\n                                ele.parentElement.clientWidth-props.width:\r\n                                ele.offsetLeft;\r\n        const targetY = ele.offsetTop > 0 ?\r\n                            0 : \r\n                            ele.offsetTop < ele.parentElement.clientHeight-props.height ?\r\n                                ele.parentElement.clientHeight-props.height:\r\n                                ele.offsetTop;\r\n        ele.style.left = targetX + 'px'\r\n        ele.style.top = targetY + 'px'\r\n    }\r\n    const onWheel = (e)=>{\r\n        if(props.isZoom){\r\n            let currZoom = getZoom(e.target)\r\n            currZoom = e.deltaY < 0 ? Math.min(3, currZoom*1.1) : Math.max(1, currZoom*0.9)\r\n            e.target.style.zoom = currZoom\r\n            document.g_currScale = currZoom\r\n            handleWheelChangeValue(currZoom) // For react Tooltip\r\n        }\r\n    }\r\n    const handleWheelChangeValue = (value) => {\r\n        console.log('handleWheelChangeValue-------', value)\r\n        props.onWheelChange(value);   \r\n    }\r\n    return (\r\n        <div id={props.id}\r\n            style={{position: 'relative', backgroundImage: `url(${props.background})`, width: props.width, height: props.height}}\r\n        >\r\n            {props.children}\r\n        </div>\r\n    )\r\n        \r\n}\r\nexport default DraggableContainer;","class WebRTC {\r\n    static _instance = null;\r\n    client = null;\r\n    roomName = ''\r\n    userName = ''\r\n    myPosition = {x:0, y:0}\r\n    youtubes = []\r\n    images = []\r\n    sharedUserId = ''\r\n    enableScreenShare = true\r\n    enableCamera = true\r\n    enableMic = true\r\n    // visibleScreenWidth = document.getElementsByClassName('space')[0].offsetWidth\r\n    // visibleScreenHeight = document.getElementsByClassName('space')[0].offsetHeight\r\n    visibleScreenWidth = document.getElementById('background_div').offsetWidth\r\n    visibleScreenHeight = document.getElementById('background_div').offsetHeight\r\n\r\n    videoQualities = [\r\n        {text:'SSM (30p - 128Kb/s)', value:{width: 160, height:120, frameRate: 10}},\r\n        {text:'SM (120p - 256Kb/s)', value:{width: 320, height:240, frameRate: 10}},\r\n        {text:'SD (360p - 1Mb/s)', value:{width: 480, height:360, frameRate: 10}},\r\n        {text:'HD (720p - 2Mb/s)', value:{width: 1280, height:720, frameRate: 10}},\r\n        {text:'Full HD (1080p - 4Mb/s)', value:{width: 1920, height:1080, frameRate: 15}},\r\n    ]\r\n    currentVideoQuality = this.videoQualities[1]\r\n    audioQualities = [\r\n        {text:'Narrow Band (16Kb/s)', value:{sampleSize: 8, channelCount: 1}},\r\n        {text:'Wide Band (64Kb/s)', value:{sampleSize: 8, channelCount: 2}},\r\n        {text:'Full Band (256Kb/s)', value:{sampleSize: 16, channelCount: 2}},\r\n    ]\r\n    currentAudioQuality = this.audioQualities[1]\r\n\r\n    static getInstance(){\r\n         if ( WebRTC._instance === null) {\r\n             WebRTC._instance = new WebRTC();\r\n         }\r\n         return WebRTC._instance;\r\n    }\r\n\r\n    constructor() {\r\n        console.log('WebRTC class was initialized.');\r\n    }\r\n\r\n    checkBrowser() {\r\n        return window.Login._browserCompatCheck();\r\n    }\r\n    getUserName() {\r\n        const username = window.localStorage.getItem('userName');\r\n        return username ? username : '';\r\n    }\r\n    setUserName(name) {\r\n        window.localStorage.setItem('userName', name)\r\n    }\r\n    getRoomName() {\r\n        return this.roomName;\r\n    }\r\n    generateRoomName(){\r\n        return window.generateRoomName();\r\n    }\r\n    createRoom(token, roomName) {\r\n        window.localStorage.setItem('o', true)\r\n        window.localStorage.setItem('t', 'video-conference')\r\n        window.localStorage.setItem('r', roomName)\r\n        window.location.href = '/room?username='+this.getUserName();\r\n    }\r\n    joinRoom(token, roomName) {\r\n        window.localStorage.setItem('o', false)\r\n        window.localStorage.setItem('t', 'video-conference')\r\n        window.localStorage.setItem('r', roomName)\r\n        window.location.href = '/room?username='+this.getUserName();\r\n    }\r\n    createAudioMeter(localstream) {\r\n        var kSampleSize = 16384;\r\n        var kSampleAverageInterval = 16;\r\n        var audioContext = new AudioContext();\r\n        var mediaStreamSource = audioContext.createMediaStreamSource(localstream);\r\n        var processor = audioContext.createScriptProcessor(kSampleSize, 1, 1);\r\n\r\n        mediaStreamSource.connect(processor);\r\n        processor.connect(audioContext.destination);\r\n\r\n        processor.onaudioprocess = function(evt) {\r\n            var buffer = evt.inputBuffer;\r\n            if (buffer.numberOfChannels > 0) {\r\n                var inputData = buffer.getChannelData(0);\r\n                var inputDataLength = inputData.length;\r\n                var total = 0;\r\n\r\n                // We calculate the average of every X to prevent CPU fans from kicking in\r\n                // on laptops!\r\n                for (var i = 0; i < inputDataLength; i += kSampleAverageInterval) {\r\n                    total += Math.abs(inputData[i]);\r\n                }\r\n\r\n                var rms = Math.sqrt((kSampleAverageInterval * total) / inputDataLength);\r\n                // WebRTC.getInstance().client.sendPeerMessage();\r\n\r\n                window.easyrtc.sendPeerMessage({\r\n                    targetRoom: WebRTC.getInstance().roomName\r\n                }, 'audio-meter', {\r\n                    rms: rms\r\n                });\r\n            }\r\n        };\r\n    }\r\n    toggleCamera (enable) {\r\n        this.enableCamera = enable\r\n        // window.easyrtc.enableCamera(enable);\r\n        this.onStreamConfigurationChange()\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'media-presence', {type:'camera', status: enable?'on':'off'});\r\n    }\r\n    toggleMic (enable) {\r\n        this.enableMic = enable\r\n        // window.easyrtc.enableMicrophone(enable);\r\n        this.onStreamConfigurationChange()\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'media-presence', {type:'mic', status: enable?'on':'off'});\r\n    }\r\n    toggleScreenShare (enable) {\r\n        this.enableScreenShare = enable\r\n        if (!enable)\r\n            WebRTC.getInstance().onSetScreenCapture()\r\n        else \r\n            WebRTC.getInstance().onStreamConfigurationChange()\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'media-presence', {type:'screenshare', status: enable?'on':'off'});\r\n    }\r\n    \r\n    youtubePosition (value) {\r\n        this.youtubes.forEach((youtube)=>{\r\n            if(youtube.name === value.name)\r\n                youtube.transform = value.transform;\r\n        })\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'youtube-position', value);\r\n    }\r\n    youtubePlay (value) {\r\n        this.youtubes.forEach((youtube)=>{\r\n            if(youtube.name === value.name) {\r\n                youtube.videoplay = value.videoplay;\r\n                youtube.videoplaying = value.videoplaying;\r\n                youtube.curtime = value.curtime;\r\n            }\r\n        })\r\n\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'youtube-play', value);\r\n    }\r\n    youtubeAdd (value) {\r\n        // value.transform = 'translate(0px, 0px)'\r\n        // value.videoWidth = 382\r\n        // value.videoHeight = 214\r\n        WebRTC.getInstance().youtubes.push(value)\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'youtube-add', value);\r\n    }\r\n    youtubeRemove (value) {\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'youtube-remove', value);\r\n        WebRTC.getInstance().youtubes = WebRTC.getInstance().youtubes.filter((rec)=>{\r\n            return rec.name!==value.name\r\n        })\r\n    }\r\n    imageAdd (value) {\r\n        // value.transform = 'translate(0px, 0px)';\r\n        WebRTC.getInstance().images.push(value)\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'image-add', value);\r\n    }\r\n    imagePosition (value) {\r\n        this.images.forEach((image)=>{\r\n            if(image.name === value.name)\r\n                image.transform = value.transform\r\n        })\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'image-position', value);\r\n    }\r\n    imageRemove (value) {\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'image-remove', value);\r\n        WebRTC.getInstance().images = WebRTC.getInstance().images.filter((rec)=>{\r\n            return rec.name!==value.name\r\n        })\r\n    }\r\n    closeClient(cusId) {\r\n        this.dispatch({type:'user_remove', value: { id: cusId }});\r\n        window.easyrtc.disconnect();\r\n    }\r\n    sendFile(peerId, peerName, dispatch) {\r\n        const fileInput = window.$(\"#file\");\r\n        fileInput.one(\r\n            'change',\r\n            function(){\r\n                const file = fileInput[0].files[0];\r\n                if(file.size === 0){\r\n                    alert(\"Empty file selected.\");\r\n                    return;\r\n                }\r\n                if(file.size > Math.pow(2, 21)){\r\n                    alert(\"File size can't be larger than 2MB.\");\r\n                    return;\r\n                }\r\n                var reader = new FileReader();\r\n                // Closure to capture the file information.\r\n                reader.onload = function(e) {\r\n                    var txData = {\r\n                        name: file.name,\r\n                        type: file.type,\r\n                        size: file.size,\r\n                        binaryContents: e.target.result\r\n                    };\r\n                    dispatch({type:'chat_add',\r\n                        value:{\r\n                            username: 'Me',\r\n                            userid: 'me',\r\n                            text: `Send a file \"${file.name}\" to \"${peerName}\".`,\r\n                            align: 'right',\r\n                            time: Date.now()}})\r\n                    window.easyrtc.sendDataWS(peerId, 'file', txData);\r\n                };\r\n                // Read in the image file as a data URL.\r\n                reader.readAsDataURL(file);\r\n                fileInput[0].value = ''\r\n            }\r\n        )\r\n        fileInput[0].click();\r\n        // .trigger('click');\r\n    }\r\n    // exitRoom(){\r\n    //     if(this.owner === 'true'){\r\n    //         this.sendMessage('Room closed.');\r\n    //         window.easyrtc.sendPeerMessage({\r\n    //             targetRoom: WebRTC.getInstance().roomName\r\n    //         }, 'close');\r\n    //         this.dispatch({type:'chat_add', value:{username: 'Me', userid: 'me', text: 'Room closed.', align: 'right', time: Date.now()}})\r\n    //     }\r\n    //     this.closeClient()\r\n    // }\r\n    updateStreamMode(){\r\n        // get getUserMedia mode\r\n        let mode = {video:false, audio: false}\r\n        if(this.currentVideoDevice){\r\n            mode.video = {}\r\n            mode.video.deviceId = this.currentVideoDevice.value;\r\n            mode.video.width = this.currentVideoQuality.value.width;\r\n            mode.video.height = this.currentVideoQuality.value.height;\r\n            mode.video.frameRate = this.currentVideoQuality.value.frameRate;\r\n        }\r\n        if(this.currentAudioDevice){\r\n            mode.audio = {}\r\n            mode.audio.deviceId = this.currentAudioDevice.value;\r\n            mode.audio.sampleSize = this.currentAudioQuality.value.sampleSize;\r\n            mode.audio.channelCount = this.currentAudioQuality.value.channelCount;\r\n        }\r\n        this.currentContraintMode = mode;\r\n    }\r\n    onStreamConfigurationChange(peerId){\r\n        if(!this.enableScreenShare){\r\n            //now screen sharing status...\r\n            const peers = window.easyrtc.getPeerConnections()\r\n            for(const id in peers){\r\n                const peer = peers[id]\r\n                \r\n                peer.pc.getSenders().map((sender) => \r\n                {\r\n                    if(WebRTC.getInstance().screenStream){\r\n                        sender.replaceTrack(WebRTC.getInstance().screenStream.getTracks().find(track=>{\r\n                            return track.kind === sender.track.kind\r\n                        }))\r\n                    }\r\n                })\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.updateStreamMode();\r\n        const local = window.easyrtc.getLocalStream();\r\n        local.getTracks().forEach(track=>{track.stop()})\r\n        const mode = {...this.currentContraintMode}\r\n        if(! WebRTC.getInstance().enableCamera)\r\n            mode.video = false;\r\n        if(! WebRTC.getInstance().enableMic)\r\n            mode.audio = false;\r\n        if(!mode.video && !mode.audio){\r\n            const peers = window.easyrtc.getPeerConnections()\r\n            for(const id in peers){\r\n                const peer = peers[id]\r\n                // if(peer.cancelled)\r\n                //     continue;\r\n                peer.pc.getSenders().forEach((sender) =>{\r\n                    if(sender.track)\r\n                        sender.track.enabled = false;\r\n                            // sender.track.stop()\r\n                    }\r\n                )\r\n                    //sender.replaceTrack(null))\r\n            }\r\n            return;\r\n        }\r\n        navigator.mediaDevices.getUserMedia(mode).then(\r\n            (stream)=>{\r\n                // replace local stream\r\n                stream.getTracks().forEach((track)=>{local.addTrack(track)})\r\n                const video_me = document.getElementById(local.id)\r\n                // console.log('video_me ----------',video_me)\r\n                if(video_me)\r\n                    window.easyrtc.setVideoObjectSrc(video_me, stream)\r\n                window.easyrtc.enableCamera(WebRTC.getInstance().enableCamera)\r\n                window.easyrtc.enableMicrophone(WebRTC.getInstance().enableMic)\r\n                const peers = window.easyrtc.getPeerConnections()\r\n                \r\n                for(const id in peers){\r\n                    const peer = peers[id]\r\n                    // if(peer.cancelled)\r\n                    //     continue;\r\n                    peer.pc.getSenders().forEach((sender) =>{\r\n                        const kind = sender.track.kind;\r\n                        // if(kind === 'video'){\r\n                        const local_track = stream.getTracks().find(track=>track.kind===kind)\r\n                        if(local_track){\r\n                            sender.replaceTrack(local_track);\r\n                            sender.track.enabled = true\r\n                        }\r\n                        else\r\n                            sender.track.enabled = false;\r\n                        // }\r\n                    } )\r\n                }\r\n            }\r\n        );\r\n    }\r\n    async updateDevices(){\r\n        try{\r\n            let audio = [];\r\n            let video = [];\r\n            const devices = await navigator.mediaDevices.enumerateDevices();\r\n            for(const dev of devices){\r\n                if(dev.kind === 'audioinput'){\r\n                    const found = audio.filter(ele=>ele.text.indexOf(dev.label)===0)\r\n                    if(found.length>0)\r\n                        audio = [...audio, {text:dev.label+'-'+found.length, value: dev.deviceId}]\r\n                    else\r\n                        audio = [...audio, {text:dev.label, value: dev.deviceId}]\r\n                }\r\n                if(dev.kind === 'videoinput'){\r\n                    const found = video.filter(ele=>ele.text.indexOf(dev.label)===0)\r\n                    if(found.length>0)\r\n                        video = [...video, {text:dev.label+'-'+found.length, value: dev.deviceId}]\r\n                    else\r\n                        video = [...video, {text:dev.label, value: dev.deviceId}]\r\n\r\n                }\r\n            }\r\n            this.videoDevices = video;\r\n            this.audioDevices = audio;\r\n        }catch(e){\r\n        }\r\n    }\r\n    async startConference(dispatch, token, room, userName) {\r\n        console.log('start conference: ', userName)\r\n        this.userName = userName;\r\n        this.roomName = room ? room : window.localStorage.getItem('r');\r\n        \r\n        if(!this.roomName){\r\n            window.location.href = '/room?space='+this.roomName;\r\n            return;\r\n        }\r\n        this.dispatch = dispatch;\r\n        await this.updateDevices();\r\n        this.currentVideoDevice = this.videoDevices.length === 0 ? null: this.videoDevices[0];\r\n        this.currentAudioDevice = this.audioDevices.length === 0 ? null: this.audioDevices[0];\r\n\r\n        this.owner = window.localStorage.getItem('o')\r\n        this.token = window.localStorage.getItem('t');\r\n\r\n        window.localStorage.removeItem('o');\r\n        window.localStorage.removeItem('t');\r\n        window.localStorage.removeItem('r');\r\n\r\n        window.easyrtc.enableDataChannels(false);\r\n        window.VTCCore\r\n        .initialize({\r\n            cameraIsEnabled: true,\r\n            micIsEnabled: true\r\n        })\r\n        .onError(function(config) {\r\n            console.log(\"error---\", config);\r\n        })\r\n        .onPeerMessage(function(client, peerId, msgType, content) {\r\n            if (msgType === 'chat') {\r\n                dispatch({type:'chat_add', value:{username: client.idToName(peerId), userid: peerId, text: content, align: 'left', time: Date.now()}})\r\n            } else if (msgType === 'set_peer_position') {\r\n                WebRTC.getInstance().updatePeerPosition(content)\r\n            // Youtube Handle\r\n            } else if (msgType === 'youtube-position') {\r\n                dispatch({type:'youtube_position', value:{username: client.idToName(peerId), name: content.name, videoId: peerId, transform: content.transform, \r\n                    width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'youtube-play') {\r\n                dispatch({type:'youtube_play', value:{ name: content.name, videoplay: content.videoplay, curtime: content.curtime, videoplaying: content.videoplaying}})\r\n            } else if (msgType === 'youtube-add') {\r\n                dispatch({type:'youtube_add', value:{name: content.name, id: peerId, value: content.videoId, transform: content.transform, width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'youtube-remove') {\r\n                console.log('youtbut_remove: ', content)\r\n                dispatch({type:'youtube_remove', name:content.name})\r\n            // Image Handle\r\n            } else if (msgType === 'image-position') {\r\n                dispatch({type:'image_position', value:{username: client.idToName(peerId), name: content.name, imageid: peerId, transform: content.transform, \r\n                    width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'image-add') {\r\n                dispatch({type:'image_add', value:{name: content.name, id: peerId, value: content.imageId, transform: content.transform, width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'image-remove') {\r\n                dispatch({type:'image_remove', name:content.name})\r\n            // Navbar Handle\r\n            } else if (msgType === 'media-presence' &&\r\n                typeof content.type === 'string' &&\r\n                typeof content.status === 'string') {\r\n                    const setScreen = ()=>{\r\n                        const ele = document.getElementById('screen_'+peerId);\r\n                        if(ele){\r\n                            dispatch({type:'user_media', value: { id: peerId, type: 'screenshare', status: content.status}})\r\n                            return;\r\n                        }\r\n                        setTimeout(setScreen, 500);\r\n                    }\r\n                    setTimeout(setScreen, 500);\r\n            } else if (msgType === 'debug') {\r\n                console.log(msgType, peerId, content);\r\n            } else if (msgType === 'mic-control' && typeof content.enabled === 'boolean') {\r\n                console.log(client, peerId, msgType, content)\r\n                return;\r\n            } else if (msgType === 'audio-meter') {\r\n                // dispatch({type:'user_audio', value: {audio: content.rms});\r\n                // AudioMeter.handlePeerMessage(peerId, content);\r\n            } else if (msgType === 'file'){\r\n                var arr = content.binaryContents.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n                while(n--){\r\n                    u8arr[n] = bstr.charCodeAt(n);\r\n                }\r\n                var blob = new Blob([u8arr], {type:mime});\r\n                dispatch({type:'chat_add',\r\n                        value:{\r\n                            username: client.idToName(peerId),\r\n                            userid: peerId,\r\n                            html: `\"${client.idToName(peerId)}\" sent a file.<br><a href='${URL.createObjectURL(blob)}' target='_blank'>Click here to download ${content.name}(${content.size}bytes)`,\r\n                            align: 'left',\r\n                            time: Date.now()}})\r\n            } else {\r\n                // @todo FIXME: right now we don't have other messages to take care of\r\n                console.log('peerMessage => got a peer message that is unexpected');\r\n                console.log('            => peerId:  ' + peerId);\r\n                console.log('            =>   name: ' + client.idToName(peerId));\r\n                console.log('            => msgType: ' + msgType);\r\n                console.log('            => content: ' + JSON.stringify(content));\r\n            }\r\n        })\r\n        .onStreamAccept(function(client, peerId, stream) {\r\n            var peerName = client.idToName(peerId);\r\n            \r\n            window.easyrtc.sendServerMessage(\"get_peer_position\", peerId,\r\n                function(msgType, position){\r\n                    console.log('onStreamAccept: ', peerName, 'roomName = ', WebRTC.getInstance().roomName)\r\n                    dispatch({type: 'user_add', value: {id: peerId, name: peerName, stream, defPosX: position.x, defPosY: position.y} })\r\n                    WebRTC.getInstance().onStreamConfigurationChange(peerId);\r\n                    \r\n                    // WebRTC.getInstance().updatePeerPosition(peerId, peerName, position)\r\n                }, function(errorCode, errorText){\r\n                    // WebRTC.getInstance().updatePeerPosition(peerId, {x:0, y:0})\r\n               });\r\n            WebRTC.getInstance().youtubes.forEach((youtube)=>{\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'youtube-add', youtube);\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'youtube-play', youtube);\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'youtube-position', youtube);\r\n            })\r\n            WebRTC.getInstance().images.forEach((image)=>{\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'image-add', image);\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'image-position', image);\r\n            })\r\n            \r\n            WebRTC.getInstance().client.sendPeerMessage({room: WebRTC.getInstance().roomName}, 'media-presence', {type:'screenshare', status: WebRTC.getInstance().enableScreenShare?'on':'off'});\r\n            \r\n            return;\r\n        })\r\n        .onStreamClose(function(client, peerId) {\r\n            console.log('streamClose')\r\n            dispatch({type:'image_remove_by_id', peerId})\r\n            dispatch({type:'youtube_remove_by_id', peerId})\r\n\r\n            // console.log('-------------oncStreamClose')\r\n            // WebRTC.getInstance().removeChild(peerId, client)\r\n            dispatch({type:'user_remove', value: { id: peerId }});\r\n\r\n            return;\r\n        })\r\n        .connect(userName, this.roomName, (client) => {\r\n            console.log('start local stream: ', userName, 'roomName = ',this.roomName)\r\n            var stream = client.getLocalStream();\r\n\r\n            window.easyrtc.sendServerMessage('get_my_position', {clientId: client.getId(), sWidth: WebRTC.getInstance().visibleScreenWidth, sHeight: WebRTC.getInstance().visibleScreenHeight},\r\n            // window.easyrtc.sendServerMessage('get_my_position', {clientId: client.getId()},\r\n                function(msgType, position){\r\n                    // console.log('webrtc---------- ', position)\r\n                    dispatch({type: 'user_add', value: {id: 'me', name: 'Me', stream, defPosX: position.x, defPosY: position.y} })\r\n                    WebRTC.getInstance().onStreamConfigurationChange(); \r\n                    WebRTC.getInstance().client = client;\r\n\r\n                    WebRTC.getInstance().updateMyPosition(position)\r\n                }, function(errorCode, errorText){\r\n                    // WebRTC.getInstance().updateMyPosition({x:0, y:0})\r\n                }\r\n            );\r\n               \r\n            return;\r\n        });\r\n\r\n    }\r\n    removeChild(peer, client) {\r\n        console.log('----------removeChild')\r\n        var container = document.getElementById('screen_' + peer);\r\n        var videoEl = peer.videoEl;   //it got video element\r\n        if (container && videoEl) {\r\n            container.removeChild(videoEl);   // my code is breaking here\r\n        }\r\n    }\r\n    sendMessage(message){\r\n        this.client.sendPeerMessage({room: this.roomName}, 'chat', message);\r\n    }\r\n    onSetScreenCapture(){\r\n        this.updateStreamMode();\r\n        const local = window.easyrtc.getLocalStream();\r\n        var _this = this\r\n        // navigator.mediaDevices.getUserMedia(this.currentContraintMode).then(\r\n        navigator.mediaDevices.getDisplayMedia({video:{width: 1920, height:1080, frameRate: 5}}).then(\r\n            async (stream)=>{\r\n                local.getTracks().forEach(track=>{track.stop()})\r\n\r\n                const audioStream = await navigator.mediaDevices.getUserMedia({audio:true});\r\n                stream.getVideoTracks()[0].onended = () => {\r\n                    this.toggleScreenShare(true)\r\n                    this.dispatch({type: 'click_screenshare', value: 'on'});\r\n                    this.dispatch({type:'user_media', value: { id: 'me', type: 'screenshare', status: 'on'}})\r\n                    document.getElementById('screenshare').src = '/static/media/screenshare-on.44d81ce8.svg'\r\n                }\r\n                \r\n                stream.addTrack(audioStream.getAudioTracks()[0]);\r\n                // replace local stream\r\n                stream.getTracks().forEach((track)=>{local.addTrack(track)})\r\n                WebRTC.getInstance().screenStream = stream;\r\n                const video_me = document.getElementById(local.id)\r\n                window.easyrtc.setVideoObjectSrc(video_me, stream)\r\n                // send it to remote\r\n                const peers = window.easyrtc.getPeerConnections()\r\n                for(const id in peers){\r\n                    const peer = peers[id]\r\n                    if(peer.cancelled)\r\n                        continue;\r\n                    peer.pc.getSenders().map((sender) => \r\n                        sender.replaceTrack(stream.getTracks().find(track=>{\r\n                            return track.kind === sender.track.kind\r\n                        })))\r\n                }\r\n            }\r\n        ).catch(function(err) {\r\n            //log to console first \r\n            console.log(err); /* handle the error */\r\n            if (err.name === \"NotFoundError\" || err.name === \"DevicesNotFoundError\") {\r\n                //required track is missing \r\n                console.log('NotFoundError, DevicesNotFoundError')\r\n            } else if (err.name === \"NotReadableError\" || err.name === \"TrackStartError\") {\r\n                //webcam or mic are already in use \r\n                console.log('NotReadableError, TrackStartError')\r\n            } else if (err.name === \"OverconstrainedError\" || err.name === \"ConstraintNotSatisfiedError\") {\r\n                //constraints can not be satisfied by avb. devices \r\n                console.log('OverconstrainedError, ConstraintNotSatisfiedError')\r\n            } else if (err.name === \"NotAllowedError\" || err.name === \"PermissionDeniedError\") {\r\n                //permission denied in browser \r\n                console.log('Send screen share message')\r\n                _this.toggleScreenShare(true)\r\n                _this.dispatch({type: 'click_screenshare', value: 'on'});\r\n                _this.dispatch({type:'user_media', value: { id: 'me', type: 'screenshare', status: 'on'}})\r\n                document.getElementById('screenshare').src = '/static/media/screenshare-on.44d81ce8.svg'\r\n            } else if (err.name === \"TypeError\" || err.name === \"TypeError\") {\r\n                //empty constraints object \r\n                console.log('TypeError')\r\n            } else {\r\n                //other errors \r\n                console.log(\"Error: \" + err.name);\r\n            }\r\n        });\r\n    }\r\n    updatePeerPosition(content){\r\n        // console.log('---------updatePeerPosition------------', content)\r\n        WebRTC.getInstance().dispatch({type: 'user_position', value: {id: content.position.peerId, defPosX: content.position.x, defPosY: content.position.y} })\r\n\r\n        // const setPos = ()=>{\r\n        //     const peer = document.getElementById('screen_'+peerId);\r\n        //     if(peer){\r\n        //         peer.style.left = position.x + 'px'\r\n        //         peer.style.top = position.y + 'px'\r\n        //     }else{\r\n        //         setTimeout(setPos, 100)\r\n        //     }\r\n        // };\r\n        // setTimeout(setPos, 100)\r\n    }\r\n    updateMyPosition( position ){\r\n        // const me = document.getElementById('screen_me');\r\n        if(this.client){\r\n            if(!position)\r\n                position = this.myPosition;\r\n            // me.style.left = position.x + 'px';\r\n            // me.style.top = position.y + 'px';\r\n            this.myPosition = position;\r\n\r\n            // console.log('updateMyposition------------------', position, this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'set_peer_position', {id: this.client.getId(), position:this.myPosition});\r\n        }\r\n    }\r\n}\r\nexport default WebRTC;","import React from 'react';\r\nimport './index.css';\r\n\r\nconst Button = React.memo(props => {\r\n    const toggleStatus = () => {\r\n        if(props.onClick && props.status !== 'no')\r\n            props.onClick();\r\n    }\r\n    return (\r\n        <img id={props.id} data-v-2f32af68=\"\" className=\"stopvideo pointer has-tooltip\" src={props[props.status]} alt={props.alt} title={props.alt} onClick={ toggleStatus } />\r\n    );\r\n})\r\nexport default Button;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport youtube from '../../images/youtube1.svg'\r\n\r\nfunction VideoDialog(props){\r\n    const dispatch = useDispatch()\r\n    const [video, setVideo] = useState('');\r\n    const [valid, setValid] = useState(false);\r\n\r\n    const handleCancel = (event) => {\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n    const ytVidId = (url) => {\r\n        var p = /^(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\?(?=.*v=((\\w|-){11}))(?:\\S+)?$/;\r\n        return (url.match(p)) ? RegExp.$1 : false;\r\n    }\r\n    const getId = (url) => {\r\n        const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n        const match = url.match(regExp);\r\n\r\n        return (match && match[2].length === 11)\r\n        ? match[2]\r\n        : null;\r\n    }\r\n    const handleChange = (event) => {\r\n        var url = video.value;\r\n        if (ytVidId(url) !== false) {\r\n            setValid(true)\r\n        } else {\r\n            setValid(false)\r\n            var element = document.getElementsByClassName(\"input-text\");\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleSubmit = (event) => {\r\n        var elementInput = document.getElementsByClassName(\"input-text\");\r\n        elementInput[0].textContent = 'YouTube video link'\r\n        elementInput[0].className = elementInput[0].className.replace(/\\berror\\b/g, \"\");\r\n\r\n        const videoId = getId(video.value);\r\n\r\n        const back_left = document.getElementById('background_div').style.left.match(/\\d+(?:\\.\\d+)?/g).map(Number);\r\n        const back_top = document.getElementById('background_div').style.top.match(/\\d+(?:\\.\\d+)?/g).map(Number);\r\n        const calc_def_x = back_left[0] + document.getElementById('foreground_div').offsetWidth/2 - 382/2\r\n        const calc_def_y = back_top[0] + document.getElementById('foreground_div').offsetHeight/2 - 214/2 - 22\r\n\r\n        console.log('videoDlg----------', calc_def_x, calc_def_y)\r\n        dispatch({type: 'youtube_add', value:{name: videoId, id: 'me', transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, username: props.uname, value: videoId, width: 382, height: 214, defX: calc_def_x, defY: calc_def_y}})\r\n        WebRTC.getInstance().youtubeAdd({videoId: videoId, name: videoId, transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, username: props.uname, width: 382, height: 214, defX: calc_def_x, defY: calc_def_y})\r\n\r\n        video.value = ''\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n\r\n    return (\r\n        <div data-v-6a2f6b36=\"\" data-v-6e496afa=\"\" id ='videodialog' aria-expanded=\"true\" data-modal=\"add-youtube\" className=\"add-youtube-modal v--modal-overlay customDlgPos\" >\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal videodialog\" >\r\n                    <img data-v-6a2f6b36 className=\"logo\" src={youtube} alt='youtube.svg' />\r\n                    <div data-v-6a2f6b36=\"\" className=\"input-text\">YouTube video link</div>\r\n                    <input data-v-6a2f6b36=\"\" type=\"text\" name='video' className=\"url\" ref={input => setVideo(input)} onChange={(e)=>handleChange(e)} />\r\n                    <div data-v-6a2f6b36=\"\" className=\"buttons\">\r\n                        <input data-v-6a2f6b36=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        <input data-v-6a2f6b36=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}\r\n                            disabled={valid ? false : true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default VideoDialog;","import React, { useState } from 'react';\r\nimport isImageUrl from 'is-image-url'\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\n\r\nfunction ImageDialog(props){\r\n    const [imagePreviewUrl, setImagePreviewUrl] = useState(null)\r\n    const [uploadClick, setUploadClick] = useState(true)\r\n    const [fileName, setFileName] = useState('')\r\n    const dispatch = useDispatch()\r\n\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#imagedialog').plainModal('close')\r\n        setImagePreviewUrl(null)\r\n    }\r\n    const handleSubmit = (event) => {\r\n        const back_left = document.getElementById('background_div').style.left.match(/\\d+(?:\\.\\d+)?/g).map(Number);\r\n        const back_top = document.getElementById('background_div').style.top.match(/\\d+(?:\\.\\d+)?/g).map(Number);\r\n\r\n        var calc_def_x = back_left[0] + document.getElementById('foreground_div').offsetWidth/2 - 275/2\r\n        var calc_def_y = back_top[0] + document.getElementById('foreground_div').offsetHeight/2 - 183/2 - 22\r\n        \r\n        dispatch({type: 'image_add', value:{name: fileName, id: 'me', username: props.uname, value: imagePreviewUrl, transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, width: 275, height: 183, defX: calc_def_x, defY: calc_def_y}})\r\n        WebRTC.getInstance().imageAdd({imageId: imagePreviewUrl, name: fileName, username: props.uname, transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, width: 275, height: 183, defX: calc_def_x, defY: calc_def_y})\r\n\r\n        setImagePreviewUrl(null)\r\n        window.$('#imagedialog').plainModal('close')\r\n    }\r\n    const fileChangedHandler = (event) => {\r\n        let reader = new FileReader();\r\n        setFileName(event.target.files[0].name)\r\n        reader.onloadend = () => {\r\n            setImagePreviewUrl(reader.result)\r\n        }\r\n        reader.readAsDataURL(event.target.files[0])\r\n    }\r\n    const imageExists = (image_url) => {\r\n        var http = new XMLHttpRequest();\r\n        http.open('HEAD', image_url, false);\r\n        http.send();\r\n        return http.status !== 404;\r\n    }\r\n    const URLChangedHandler = (event) => {\r\n        var element = document.getElementsByClassName(\"label\");\r\n        if (isImageUrl(event.target.value) || imageExists(event.target.value)) {\r\n            element[0].className = element[0].className.replace(/\\berror\\b/g, \"\");\r\n            element[0].textContent = 'Image link'\r\n            setImagePreviewUrl(event.target.value)\r\n            setFileName(event.target.value)\r\n        }\r\n        else {\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleUpload = (event) => {\r\n        setUploadClick(true)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementLink[0].className = elementLink[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementUpload[0].className += \" active\";\r\n    }\r\n    const handleLink = (event) => {\r\n        setUploadClick(false)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementUpload[0].className = elementUpload[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementLink[0].className += \" active\";\r\n    }\r\n    const uploadComputer =\r\n        <div data-v-bd733764=\"\" className=\"upload-computer tab-active drop-zone\" data-id=\"upload1\" >\r\n            <div data-v-bd733764=\"\" className=\"bold\">Drag and drop, paste image here</div>\r\n            <div data-v-bd733764=\"\" className=\"gray\">or</div>\r\n            <input type=\"file\" name=\"file-4\" id=\"file-4\" className=\"inputfile\" onChange={(e)=>fileChangedHandler(e)} />\r\n            <label htmlFor=\"file-4\">BROWSE...</label>\r\n        </div>\r\n    const preview =\r\n        <div data-v-bd733764=\"\" className=\"preview\">\r\n            <img className=\"imgPreview\" src={imagePreviewUrl} height=\"200\" alt=\"preview...\" />\r\n        </div>\r\n    const linkURL =\r\n        <div data-v-bd733764=\"\" className=\"upload-link\">\r\n            <div data-v-bd733764=\"\" className=\"label\">Image link</div>\r\n            <input data-v-bd733764=\"\" type=\"text\" className=\"link\" onChange={(e)=>URLChangedHandler(e)} />\r\n        </div>\r\n    return (\r\n        <div data-v-bd733764=\"\" data-v-6e496afa=\"\" id ='imagedialog' aria-expanded=\"true\" data-modal=\"add-image\" className=\"add-image-modal v--modal-overlay customDlgPos\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal imagedialog\" >\r\n                    <div data-v-bd733764=\"\" className=\"header\">\r\n                        <button data-v-bd733764=\"\" data-id=\"upload1\" className=\"image_upload active\" onClick={(e)=>handleUpload(e)} >Upload</button>\r\n                        <button data-v-bd733764=\"\" data-id=\"upload2\" className=\"image_link\" onClick={(e)=>handleLink(e)} >URL</button>\r\n                    </div>\r\n                    {\r\n                        uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : uploadClick && !imagePreviewUrl\r\n                        ? uploadComputer\r\n                        : null\r\n                    }\r\n                    {\r\n                        !uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : !uploadClick && !imagePreviewUrl\r\n                        ? linkURL\r\n                        : null\r\n                    }\r\n                    <div data-v-bd733764=\"\" className=\"buttons\">\r\n                        <input data-v-bd733764=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        { imagePreviewUrl && <input data-v-bd733764=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}/>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default ImageDialog;","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport WebRTC from '../../webrtc';\r\nimport Button from '../button'\r\nimport Dialog from '../dialog';\r\nimport VideoDialog from '../dialog/videodlg';\r\nimport ImageDialog from '../dialog/imagedlg';\r\n\r\nimport userssvg from '../../images/users.svg'\r\nimport youtube from '../../images/youtube.svg'\r\nimport uploadimage from '../../images/uploadimage.svg'\r\nimport sharedscreen_on from '../../images/screenshare-on.svg'\r\nimport sharedscreen_off from '../../images/screenshare-off.svg'\r\nimport stopvideo0 from '../../images/stopvideo-0.svg'\r\nimport stopvideo1 from '../../images/stopvideo-1.svg'\r\nimport stopaudio0 from '../../images/stopaudio-0.svg'\r\nimport stopaudio1 from '../../images/stopaudio-1.svg'\r\nimport logosvg from '../../images/logo.svg'\r\nimport logosmallsvg from '../../images/logo-small.svg'\r\nimport support from '../../images/support.svg'\r\nimport close from '../../images/close.svg'\r\n\r\nimport './index.css';\r\n\r\nconst Navbar = React.memo(props => {\r\n    const dispatch = useDispatch()\r\n    const users = useSelector(state=>state.users);\r\n    const camera = useSelector(state => state.buttons.camera);\r\n    const mic = useSelector(state => state.buttons.mic);\r\n    const screenshare = useSelector(state => state.buttons.screenshare);\r\n\r\n    const toggleChange = (type1, value1)=>{\r\n        dispatch( {type: type1, value: value1 ==='on'?'off':'on'});\r\n        if(type1 === 'click_camera'){\r\n            dispatch({type:'user_media', value: { id: 'me', type: 'camera', status: value1 ==='on'?'off':'on'}})\r\n            WebRTC.getInstance().toggleCamera(value1==='off')\r\n        } else if ( type1 === 'click_mic') {\r\n            dispatch({type:'user_media', value: { id: 'me', type: 'mic', status: value1 ==='on'?'off':'on'}})\r\n            WebRTC.getInstance().toggleMic(value1==='off')\r\n        } else if ( type1 === 'click_screenshare') {\r\n            if(!document.getElementById('screen_me')) return;\r\n            dispatch({type:'user_media', value: { id: 'me', type: 'screenshare', status: value1 ==='on'?'off':'on'}})\r\n            WebRTC.getInstance().toggleScreenShare(value1==='off')\r\n        }\r\n    }\r\n    const handleClose = (event) => {\r\n        WebRTC.getInstance().closeClient('me')\r\n        window.location.href = '/room?space='+props.query.space;  \r\n    }\r\n    return (\r\n        <>\r\n            <div data-v-2db9ff64=\"\" className=\"app-header\" data-v-12a888fb=\"\">\r\n                <a data-v-2db9ff64=\"\" href=\"/\" target=\"_blank\">\r\n                    <img data-v-2db9ff64=\"\" className=\"logo\" src={logosvg} alt='logosvg' style={{display: 'none'}}/>\r\n                    <img data-v-2db9ff64=\"\" className=\"logo-small\" src={logosmallsvg} alt='logosmallsvg' style={{display: 'none'}}/>\r\n                </a>\r\n                <div data-v-2f32af68=\"\" className=\"controls\">\r\n                    <div data-v-2f32af68=\"\" className=\"controls-main\">\r\n                        <div data-v-261ef19f=\"\" data-v-2f32af68=\"\" className=\"members-container\">\r\n                            <div data-v-2f32af68=\"\" data-v-261ef19f=\"\" className=\"members cus-dropdown\">\r\n                                <img data-v-2f32af68=\"\" src={userssvg} alt='userssvg' />\r\n                                <span data-v-2f32af68=\"\" data-v-261ef19f=\"\">{users.length}</span>\r\n                                <div data-v-261ef19f=\"\" className=\"cus-dropdown-content\">\r\n                                    {\r\n                                        users.map((user) => user.id!=='me'?<span key={user.id}>{user.name}</span>:null)\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <Button on={youtube} off={youtube} no={youtube} alt='Youtube' status='on' onClick={()=>{ Dialog.show('videodialog') }} ></Button>\r\n                        <Button on={uploadimage} off={uploadimage} no={uploadimage} alt='Uploadimage' status='on' onClick={()=>{ Dialog.show('imagedialog')} }></Button>\r\n                        <Button on={sharedscreen_on} off={sharedscreen_off} no={sharedscreen_on} id='screenshare' alt='Screenshare' status={screenshare} onClick={()=>toggleChange('click_screenshare', screenshare)} ></Button>\r\n                        <Button on={stopvideo0} off={stopvideo1} no={stopvideo1} alt='Camera' status={camera} onClick={()=>toggleChange('click_camera', camera)}></Button>\r\n                        <Button on={stopaudio0} off={stopaudio1} no={stopaudio1} alt='Mic' status={mic} onClick={()=>toggleChange('click_mic', mic)}></Button>\r\n                    </div>\r\n                    <a data-v-2f32af68=\"\" href=\"mailto:support@spatial.chat\" className=\"support-link\">\r\n                        <img data-v-2f32af68=\"\" className=\"support has-tooltip\" src={support} alt='support' />\r\n                    </a>\r\n                    <img data-v-2f32af68=\"\" className=\"close pointer\" src={close} alt='close' onClick={(e)=>handleClose(e)} />\r\n                </div>\r\n            </div>\r\n            <VideoDialog uname={props.query.uname} />\r\n            <ImageDialog uname={props.query.uname} />\r\n        </>\r\n    );\r\n})\r\n\r\nexport default Navbar;","export default class Utils{\r\n    static addPosition(pos, pos1){\r\n        return {x: pos.x+pos1.x, y: pos.y+pos1.y}\r\n    }\r\n    static multiplyPosition(pos, mul){\r\n        return {x: pos.x*mul, y: pos.y*mul}\r\n    }\r\n    static getPositionFromTransform(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromStyle(ele){\r\n        try{\r\n            return {x: ele.offsetLeft, y: ele.offsetTop}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static setPositionOfHtmlElement(ele, pos){\r\n        try{\r\n            ele.style.left = pos.x + 'px';\r\n            ele.style.top = pos.y + 'px';\r\n            return true;\r\n        } catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static isInRect(rect, pos){\r\n        try{\r\n            if(pos.x >= rect.left && pos.x <= rect.right && pos.y >= rect.top && pos.y <= rect.bottom)\r\n                return true;\r\n            return false\r\n        }catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux';\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { Rnd } from \"react-rnd\";\r\n\r\nimport WebRTC from '../../webrtc';\r\nimport './index.css';\r\n\r\nimport Utils from '../../utils/position';\r\n\r\n// const currentDragObject = {obj:null, x:0, y:0, scale:1, dragStarted:false}\r\n\r\nconst Screen = React.memo(props => {\r\n    const screenid = 'screen_'+props.user.id \r\n    const smallScreenId = 'smallscreen_'+props.user.id \r\n    const nodeRef = React.useRef(null);\r\n\r\n    const [xPos, setXPos] = useState(props.user.defPosX)\r\n    const [yPos, setYPos] = useState(props.user.defPosY)\r\n    const [firstPosX, setFirstPosX] = useState(0)\r\n    const [firstPosY, setFirstPosY] = useState(0)\r\n\r\n    var ele_Screen = document.getElementById('screen_' + props.user.id)\r\n\r\n    useEffect(() => {\r\n        var video = document.getElementById(props.user.stream.id);\r\n\r\n        if(video){\r\n            window.easyrtc.setVideoObjectSrc(video, props.user.stream);\r\n            setTimeout(onTimer, 100);\r\n        }\r\n    },[]);\r\n    const setVolumeForNeighborhood = () => {\r\n        const me_ele = document.getElementById('screen_me')\r\n        const ele = document.getElementById('screen_' + props.user.id)\r\n\r\n        if(me_ele && ele){\r\n            const screenMePos = Utils.getPositionFromTransform(me_ele.parentNode);\r\n            const screenCurrObjPos = Utils.getPositionFromTransform(ele.parentNode);\r\n\r\n            const dist = Math.max(1, Math.sqrt((screenMePos.x-screenCurrObjPos.x)*(screenMePos.x-screenCurrObjPos.x) + \r\n                                    (screenMePos.y-screenCurrObjPos.y)*(screenMePos.y-screenCurrObjPos.y)))\r\n\r\n            var scale_val = Math.max(0.3, Math.min(1, 150 / (dist)))\r\n            ele.parentNode.style.transform = `translate(${screenCurrObjPos.x}px, ${screenCurrObjPos.y}px) scale(${scale_val})`\r\n        \r\n            var vol = dist===0?1:Math.max(0, Math.min(1, Math.pow((100 / dist), 4)))\r\n            if (vol < 0.01) vol = 0\r\n            \r\n            ele.parentNode.firstElementChild.volume = isFinite(vol) ? vol : 1;\r\n            // console.log('user volume----------', vol, ele.firstElementChild) \r\n        }\r\n    }\r\n    const setScaleByPosition = ()=>{\r\n        const ele = document.getElementById('screen_' + props.user.id)\r\n        const eleBack = document.getElementById('background_div');\r\n        const eleFore = document.getElementById('foreground_div');\r\n\r\n        if(ele && !window.dragStart) {\r\n            const posMe = Utils.getPositionFromTransform(ele.parentNode);\r\n            const posBack = Utils.getPositionFromStyle(eleBack);\r\n            const videoScreen = document.getElementById(props.user.stream.id);\r\n            const eleSmall = document.getElementById(smallScreenId)\r\n\r\n            const viewRect = {   \r\n                left: -posBack.x, \r\n                top: -posBack.y, \r\n                right:-posBack.x + eleFore.clientWidth/document.g_currScale, \r\n                bottom: -posBack.y + eleFore.clientHeight/document.g_currScale\r\n            }\r\n            var inRect = Utils.isInRect(viewRect, posMe)\r\n            if(!inRect){\r\n                if (eleSmall.childNodes.length === 0) {\r\n                    eleSmall.appendChild(videoScreen);\r\n\r\n                    eleSmall.style.display = 'inline-block'\r\n                    ele.parentNode.style.display = 'none';\r\n                } \r\n                const smallPos = getDistanceByRectAndPosition(\r\n                    Utils.multiplyPosition(Utils.addPosition(posMe, posBack), document.g_currScale), \r\n                    eleFore.clientWidth,\r\n                    eleFore.clientHeight\r\n                )\r\n                Utils.setPositionOfHtmlElement(eleSmall, smallPos);\r\n\r\n            } else {\r\n                eleSmall.style.display = 'none'\r\n                ele.parentNode.style.display = 'inline-block';\r\n            \r\n                const d = document.getElementById(screenid)\r\n                d.appendChild(videoScreen)\r\n\r\n            }\r\n        }\r\n    }\r\n    const getDistanceByRectAndPosition = (pos, width, height)=>{\r\n        if (pos.y < 0) pos.y = 25\r\n        if (pos.y > height) pos.y = height - 25\r\n        if (pos.x < 0) pos.x = 25\r\n        if (pos.x > width) pos.x = width - 25\r\n        return {x: pos.x-50, y: pos.y-50}\r\n    }\r\n\r\n    function onTimer(){\r\n        // console.log('-------------onTimer')\r\n\r\n        if(props.user.id !== 'me')\r\n            setVolumeForNeighborhood();\r\n            \r\n        // console.log('ele_Screen-------------', ele_Screen)\r\n        // if (ele_Screen)\r\n        setScaleByPosition()\r\n        setTimeout(onTimer, 50)\r\n    }\r\n\r\n    const handleStart = (ev, detail) => {\r\n        window.dragStart = true\r\n        setFirstPosX(detail.x)\r\n        setFirstPosY(detail.y)\r\n    }\r\n    const handleStop = (e, detail) => {\r\n        window.dragStart = false\r\n        WebRTC.getInstance().myPosition.x += (detail.x - firstPosX)\r\n        WebRTC.getInstance().myPosition.y += (detail.y - firstPosY)\r\n        WebRTC.getInstance().updateMyPosition()\r\n    }\r\n    function calculateEdge(posX, posY) {\r\n        const ele = document.getElementById('foreground_div')\r\n        const back = document.getElementById('background_div')\r\n        const width = ele.clientWidth\r\n        const height = ele.clientHeight\r\n        const pos = Utils.addPosition({x:posX, y:posY}, Utils.getPositionFromStyle(back))\r\n        console.log({x: posX, y: Math.max(50, Math.min(height, pos.y))} )\r\n        \r\n        return {x: posX, y: Math.max(50, Math.min(height, pos.y))}\r\n    }\r\n\r\n    if (nodeRef.current && props.user.id != 'me') {\r\n        nodeRef.current.parentNode.style.transform = `translate(${props.user.defPosX}px, ${props.user.defPosY}px)`\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Rnd\r\n                noderef={nodeRef}\r\n                default={{ x: xPos, y: yPos }}\r\n                onDragStart={(e, d) => {handleStart(e, d)}}\r\n                onDragStop={(e, d) => { \r\n                    calculateEdge(d.x, d.y)\r\n                    handleStop(e, d)\r\n                }}\r\n                scale={props.curScale}  \r\n                style={{zIndex: props.user.id==='me'?50:25}}\r\n                lockAspectRatio={true}\r\n                enableResizing={false}\r\n                disableDragging={props.user.id != 'me' ? true : false}\r\n            >\r\n                <div ref={nodeRef} id={screenid} data-tip data-for={props.user.id} key={props.user.id} className='screen'\r\n                    style={{width: 100, height: 100, borderRadius: '50%', marginLeft:-50, marginTop:-50,\r\n                                border: props.user.id === 'me'?'2px solid #dcdb53':'2px solid' }} \r\n                    tabIndex={0}  >\r\n                    <video \r\n                        className='video' \r\n                        id={props.user.stream.id} \r\n                        controls=\"\" loop=\"\" muted={'me' === props.user.id} \r\n                        onMouseMove={\r\n                            (e)=>{\r\n                                const ele = document.getElementById('div_tip')\r\n                                ele.style.left = e.screenX + 'px'\r\n                                ele.style.top = (e.screenY-150) + 'px'\r\n                                ele.innerHTML = props.user.name\r\n                                ele.style.display='inline-block'\r\n                            }\r\n                        }\r\n                        onMouseOut = {\r\n                            (e)=>{\r\n                                document.getElementById('div_tip').style.display='none'\r\n                            }\r\n                        }\r\n                    >    \r\n                    </video>\r\n                </div>\r\n            </Rnd>\r\n            \r\n        </>\r\n    );\r\n})\r\n\r\nexport default Screen;","import React, { useEffect, useState, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport YouTube from 'react-youtube';\r\nimport { Rnd } from \"react-rnd\";\r\n\r\nimport './index.css';\r\nimport MicMute0 from '../../images/mic-mute.svg'\r\nimport MicMute1 from '../../images/mic-mute1.svg'\r\nimport closevideo from '../../images/closevideo.svg'\r\nimport WebRTC from '../../webrtc';\r\n\r\nimport Utils from '../../utils/position';\r\n\r\nconst YoutubeUpload = React.memo(props => {\r\n    const nodeRef = React.useRef(null);\r\n    const videoRef = useRef(null);\r\n    const [youtubeMute, setYoutubeMute] = useState('off')\r\n    const dispatch = useDispatch();\r\n\r\n    const youtubeMuteAudio = 'youtubeAudio_'+props.video.value \r\n    const videoid = 'video_'+props.video.value \r\n\r\n    var realCurTime\r\n\r\n    useEffect(() => {\r\n        setTimeout(onTimer, 500);\r\n    },[]);\r\n    const getDistanceByPosition = (p1, p2)=>{\r\n        return Math.sqrt((p1.x-p2.x)*(p1.x-p2.x) + (p1.y-p2.y)*(p1.y-p2.y))\r\n    }\r\n    const getDistanceByRectAndPosition = (rect, pos)=>{\r\n        let distance = -1;\r\n        if(pos.x > rect.left && pos.x < rect.right){\r\n            distance = Math.min(Math.abs(pos.y-rect.top), Math.abs(pos.y-rect.bottom))\r\n        }\r\n        if(pos.y > rect.top && pos.y < rect.bottom){\r\n            if (distance === -1)\r\n                distance = Math.min(Math.abs(pos.x-rect.left), Math.abs(pos.x-rect.right))\r\n            else\r\n                distance = 0;\r\n        }\r\n        if(distance >=0 )\r\n            return distance;\r\n        return Math.min(Math.min(getDistanceByPosition(pos, {x:rect.left,y:rect.top}), getDistanceByPosition(pos, {x:rect.left,y:rect.bottom})),\r\n                        Math.min(getDistanceByPosition(pos, {x:rect.right,y:rect.top}), getDistanceByPosition(pos, {x:rect.right,y:rect.bottom})))\r\n\r\n    }\r\n    function onTimer(){\r\n        const me_ele = document.getElementById('screen_me')\r\n        const ele = document.getElementById('video_' + props.video.value)\r\n\r\n        if(me_ele && ele){\r\n            const screenMePos = Utils.getPositionFromTransform(me_ele.parentElement);\r\n            const videoPos = Utils.getPositionFromTransform(ele.parentNode);\r\n\r\n            const width = ele.parentNode.clientWidth\r\n            const height = ele.parentNode.clientHeight\r\n\r\n            const dist = getDistanceByRectAndPosition({left: videoPos.x, \r\n                                                       right: videoPos.x + width, \r\n                                                       top: videoPos.y,\r\n                                                       bottom: videoPos.y + height}, \r\n                                                       screenMePos)\r\n            var vol = dist===0?1:Math.max(0, Math.min(1, Math.pow((100 / dist), 4)))\r\n            if (vol < 0.01) vol = 0\r\n            \r\n            // console.log(\"distance: \", dist, screenMePos, videoPosArr, width, height, vol* 100 * (ele.muted==='on' || ele.muted===undefined? 1: 0))\r\n            if (videoRef && videoRef.current) {\r\n                videoRef.current.internalPlayer.setVolume(vol* 100 * (ele.muted==='on' || ele.muted===undefined? 1: 0));\r\n            }\r\n        }\r\n        \r\n        setTimeout(onTimer, 1000)\r\n    }\r\n    const handleClose = (value) => {\r\n        dispatch({type: 'youtube_remove', name: value})\r\n        WebRTC.getInstance().youtubeRemove({name: value})\r\n    }\r\n    const handleStop = (x, y, width, height) => {\r\n        WebRTC.getInstance().youtubePosition({transform: nodeRef.current.parentNode.style.transform, name: props.video.name, width: width, height: height, defX: x, defY: y})\r\n        dispatch({type: 'youtube_position', value: { transform: nodeRef.current.parentNode.style.transform, name: props.video.name, width: width, height: height, defX: x, defY: y } })\r\n    }\r\n    const handleStateChange = () => {        \r\n        realCurTime = videoRef.current.internalPlayer.getCurrentTime()\r\n    }\r\n    const handleYouTubePause = (event) => {\r\n        realCurTime.then(function(result) {\r\n            realCurTime = result\r\n            dispatch({type: 'youtube_play', value: { name: props.video.name, videoplay: false, curtime: realCurTime } })\r\n            WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: false, curtime: realCurTime, videoplaying: false })\r\n        })\r\n    }\r\n    const handleYouTubePlay = (event) => {\r\n        realCurTime.then(function(result) {\r\n            realCurTime = result\r\n            dispatch({type: 'youtube_play', value: { name: props.video.name, videoplay: true, curtime: realCurTime } })\r\n            WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: true })\r\n        })\r\n    }\r\n    const toggleChange = (event)=>{\r\n        const ele = document.getElementById('video_' + props.video.value)\r\n\r\n        if (youtubeMute === 'on') {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute0\r\n                setYoutubeMute('off')\r\n                ele.muted = 'on'\r\n            }\r\n        }\r\n        else {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute1\r\n                ele.muted = 'off'\r\n                setYoutubeMute('on')\r\n            }\r\n        }\r\n    }\r\n    function calculateEdge(posX, posY, vdoWidth, vdoHeight) {\r\n        const width = document.getElementById('background_div').offsetWidth\r\n        const height = document.getElementById('background_div').offsetHeight\r\n\r\n        if (posX >= width - vdoWidth - 10)\r\n            posX = width - vdoWidth - 10\r\n        if (posX < 10)\r\n            posX = 10\r\n        if (posY >= height - vdoHeight - 60)\r\n            posY = height - vdoHeight - 60\r\n        if (posY < 30) // 22 is close header height\r\n            posY = 30\r\n\r\n        return {x: posX, y: posY}\r\n    }\r\n    if (props.video.id != 'me' && videoRef.current) {\r\n        if (props.video.videoplay && props.video.videoplaying) {\r\n            videoRef.current.internalPlayer.unMute()\r\n\r\n            dispatch({type: 'youtube_play', value: { name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: false } })\r\n            WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: false })\r\n            videoRef.current.internalPlayer.seekTo(props.video.curtime)\r\n            videoRef.current.internalPlayer.playVideo()\r\n        } else if (!props.video.videoplay && !props.video.videoplaying){\r\n            videoRef.current.internalPlayer.pauseVideo()\r\n        }\r\n    }\r\n\r\n    if (nodeRef.current && props.video.transform) {\r\n        // console.log('other youtube transform: ', props.video.transform, props.video.width, props.video.height)\r\n\r\n        nodeRef.current.parentNode.style.width = props.video.width + 'px';\r\n        nodeRef.current.parentNode.style.height = props.video.height + 'px';\r\n\r\n        var string = props.video.transform \r\n        var numbers = string.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n        var { x, y } = calculateEdge(numbers[0], numbers[1], props.video.width, props.video.height)\r\n        nodeRef.current.parentNode.style.transform = `translate(${x}px, ${y}px)`\r\n    }\r\n\r\n    if (nodeRef.current && !props.video.transform && props.video.defX) {\r\n        nodeRef.current.parentNode.style.transform = `translate(${props.video.defX}px, ${props.video.defY}px)`\r\n    }\r\n\r\n    console.log(props.video)\r\n\r\n    const opts = {\r\n        origin: 'https://webrtc.bcisummit.com',\r\n        playerVars: {\r\n            autoplay:0,\r\n            muted:0\r\n        }\r\n    };\r\n    return (\r\n        <Rnd\r\n            noderef={nodeRef}\r\n            size={{ width: props.video.width,  height: props.video.height }}\r\n            position={{ x: props.video.defX, y: props.video.defY }}\r\n            scale={props.cur}   \r\n            lockAspectRatio={true}\r\n            style = {{zIndex: props.video.id==='me'?10:5}}\r\n            disableDragging={props.video.id==='me' ? false: true}\r\n            enableResizing={{ top:false, right:false, bottom:false, left:false, \r\n                topRight:props.video.id==='me' ? true : false, \r\n                bottomRight:props.video.id==='me' ? true : false, \r\n                bottomLeft:props.video.id==='me' ? true : false, \r\n                topLeft:props.video.id==='me' ? true : false }}\r\n            onDragStop={(e, d) => { \r\n                const posArr = calculateEdge(d.x, d.y, props.video.width, props.video.height)\r\n                handleStop(posArr.x, posArr.y, props.video.width, props.video.height)\r\n            }}\r\n            onResizeStop={(e, direction, refval, delta, position) => {\r\n                var resizeWidth = parseInt(refval.style.width.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                var resizeHeight = parseInt(refval.style.height.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                handleStop(props.video.defX, props.video.defY, resizeWidth, resizeHeight)\r\n            }}\r\n        >\r\n            <div data-v-c1f79ed4=\"\" data-v-6e496afa=\"\" data-v-7e3fe256=\"\" ref={nodeRef} key={props.video.id} id={videoid}\r\n                className=\"youtube-el\" style={{width:'100%'}} style={{ zIndex: props.video.id==='me'?10:5 }}>\r\n                <div data-v-a995c326=\"\" data-v-c1f79ed4=\"\" className=\"header pointer hidden\" >\r\n                    <div data-v-a995c326=\"\" className=\"title\" >Pinned by {props.video.username}</div>\r\n                    {props.video.id==='me' &&\r\n                        <div onClick={() => handleClose(props.video.name)} >\r\n                            <img data-v-6a2f6b36 className=\"close\" src={closevideo} alt='closevideo.svg' />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <div data-v-c1f79ed4=\"\" className={`player ${props.video.id==='me'?null:'pointer-events-none'}`} >\r\n                    <YouTube\r\n                        ref={videoRef}\r\n                        videoId={props.video.value}\r\n                        id={videoid}\r\n                        opts={opts}\r\n                        onPlay={props.video.id==='me'?(e)=>handleYouTubePlay(e): null}\r\n                        onPause={props.video.id==='me'?(e)=>handleYouTubePause(e):null}\r\n                        onStateChange={(e)=>handleStateChange(e)}\r\n                    />\r\n                </div>\r\n                { props.video.id==='me' ? null :\r\n                    <img data-v-c1f79ed4=\"\" id={youtubeMuteAudio} svg-inline=\"\" src={MicMute0} className=\"mute\" \r\n                        onClick={(e)=>toggleChange(e)} alt=\"youtubeAudio\"></img>\r\n                }\r\n            </div>\r\n        {/* </Draggable> */}\r\n        </Rnd>\r\n    );\r\n})\r\nexport default YoutubeUpload;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Rnd } from \"react-rnd\";\r\n\r\nimport './index.css';\r\nimport closeimage from '../../images/closevideo.svg'\r\nimport WebRTC from '../../webrtc';\r\n\r\nconst ImageUpload = React.memo((props) => {\r\n    const nodeRef = React.useRef(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClose = (value) => {\r\n        dispatch({type: 'image_remove', name: value})\r\n        WebRTC.getInstance().imageRemove({name: value})\r\n    }\r\n    const handleStop = (x, y, width, height) => {\r\n        WebRTC.getInstance().imagePosition({transform: nodeRef.current.parentNode.style.transform, name: props.image.name, width: width, height: height, defX: x, defY: y})\r\n        dispatch({type: 'image_position', value: { transform: nodeRef.current.parentNode.style.transform, name: props.image.name, width: width, height: height, defX: x, defY: y } })\r\n\r\n    }\r\n    function calculateEdge(posX, posY, vdoWidth, vdoHeight) {\r\n        const width = document.getElementById('background_div').offsetWidth\r\n        const height = document.getElementById('background_div').offsetHeight\r\n\r\n        if (posX >= width - vdoWidth - 10)\r\n            posX = width - vdoWidth - 10\r\n        if (posX < 10)\r\n            posX = 10\r\n        if (posY >= height - vdoHeight - 60)\r\n            posY = height - vdoHeight - 60\r\n        if (posY < 30) // 22 is close header height\r\n            posY = 30\r\n\r\n        return {x: posX, y: posY}\r\n    }\r\n    \r\n    if (nodeRef.current && props.image.transform) {\r\n        nodeRef.current.parentNode.style.width = props.image.width + 'px';\r\n        nodeRef.current.parentNode.style.height = props.image.height + 'px';\r\n        \r\n        var string = props.image.transform \r\n        var numbers = string.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n        var { x, y } = calculateEdge(numbers[0], numbers[1], props.image.videoWidth, props.image.videoHeight)\r\n        nodeRef.current.parentNode.style.transform = `translate(${x}px, ${y}px)`\r\n    }\r\n\r\n    if (nodeRef.current && !props.image.transform && props.image.defX) {\r\n        nodeRef.current.parentNode.style.transform = `translate(${props.image.defX}px, ${props.image.defY}px)`\r\n    }\r\n\r\n    return (\r\n        <Rnd\r\n            noderef={nodeRef}\r\n            size={{ width: props.image.width,  height: props.image.height }}\r\n            position={{ x: props.image.defX, y: props.image.defY }}\r\n            scale={props.cur}   \r\n            lockAspectRatio={true}\r\n            enableResizing={{ top:false, right:false, bottom:false, left:false, \r\n                topRight:props.image.id==='me' ? true : false, \r\n                bottomRight:props.image.id==='me' ? true : false, \r\n                bottomLeft:props.image.id==='me' ? true : false, \r\n                topLeft:props.image.id==='me' ? true : false }}\r\n            disableDragging={props.image.id==='me' ? false: true}\r\n            style = {{zIndex: props.image.id==='me'?10:5}}\r\n            onDragStop={(e, d) => { \r\n                const posArr = calculateEdge(d.x, d.y, props.image.width, props.image.height)\r\n                handleStop(posArr.x, posArr.y, props.image.width, props.image.height)\r\n            }}\r\n            onResizeStop={(e, direction, refval, delta, position) => {\r\n                var resizeWidth = parseInt(refval.style.width.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                var resizeHeight = parseInt(refval.style.height.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                handleStop(props.image.defX, props.image.defY, resizeWidth, resizeHeight)\r\n            }}\r\n        >\r\n            <div ref={nodeRef} key={props.image.id} >\r\n                <div className=\"cus_header pointer hidden\">\r\n                    <div className=\"cus_title\">Pinned by {props.image.username}</div>\r\n                    {props.image.id==='me' &&\r\n                        <div onClick={() => handleClose(props.image.name)} className=\"cus_close\" >\r\n                            <img data-v-6a2f6b36 src={closeimage} alt='closevideo.svg' />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <img src={props.image.value} className=\"image-frame\" alt=\"map-transparent\" />\r\n            </div>\r\n        </Rnd>\r\n    );\r\n})\r\nexport default ImageUpload;","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n\r\nimport Utils from '../../utils/position';\r\n\r\nexport default function Tip(props){\r\n    return (\r\n        <div id='div_tip' style={{position: 'absolute', zIndex: 100, display: 'none', backgroundColor: '#5494a6', borderRadius: 10, padding: '10px'}}>\r\n\\        </div>\r\n    );\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch} from 'react-redux';\r\n// import { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport * as qs from 'query-string'\r\n\r\nimport DraggableContainer from '../components/draggable/draggableContainer';\r\nimport Navbar from '../components/navbar';\r\nimport WebRTC from '../webrtc';\r\nimport Screen from '../components/screen';\r\nimport YoutubeUpload from '../components/youtubeupload';\r\nimport ImageUpload from '../components/imageupload';\r\nimport Tip from '../components/tip';\r\n\r\nimport img_small from '../images/map-small@2x.0c2a372b.png';\r\nimport img_big from '../images/map-big@2x.44a3f15c.png';\r\n\r\nimport './index.css';\r\n\r\nconst Conference = React.memo(props => {\r\n    useEffect(()=>{\r\n        WebRTC.getInstance().startConference(dispatch, null, query.space, query.uname);\r\n    },[])\r\n    \r\n    const dispatch = useDispatch()\r\n    const query = qs.parse(props.location.search);\r\n    const users = useSelector(state=>state.users);\r\n    const videoObj = useSelector(state=>state.screens.videos);\r\n    const imageObj = useSelector(state=>state.screens.images);\r\n\r\n    const [userClose, setUserClose] = useState(false);\r\n    const [wheelChange, setWheelChange] = useState(1);\r\n    \r\n    const handleSetUserClose = (value) => {\r\n        setUserClose(value)\r\n    }\r\n    const handleWheelChangeValue = (value) => {\r\n        setWheelChange(value)\r\n    }\r\n\r\n    return (\r\n    <div data-v-12a888fb=\"\" className=\"space\">\r\n        <Navbar onSetUserClose={handleSetUserClose} videoObj={videoObj} imageObj={imageObj} query={query} /> \r\n        <div id='foreground_div' style={{position: 'relative', overflow: 'hidden', backgroundImage: `url(${img_small})`, width:'100%', height: '100%'}}>\r\n            <DraggableContainer id='background_div' width={3000} height={3000} isZoom={true} background={img_big}\r\n                onWheelChange={handleWheelChangeValue}\r\n            >\r\n                {\r\n                    users.map((user) => <Screen key={user.id} curScale={wheelChange} user={user} />)\r\n                }\r\n                {\r\n                    videoObj.map((video) => <YoutubeUpload key={video.name} video={video} cur={wheelChange} userClose={userClose} room={query.space} />)\r\n                }\r\n                {\r\n                    imageObj.map((image) => <ImageUpload key={image.value} image={image} cur={wheelChange} userClose={userClose} room={query.space} />)\r\n                }\r\n            </DraggableContainer>\r\n            {\r\n                users.map((user) => {\r\n                    return (\r\n                        <div id={'smallscreen_' + user.id} className='screen' data-tip data-for={user.id} key={user.id}\r\n                            style={{width: 50, height: 50, borderRadius: '50%', position: 'absolute', left: 0, top: 0, display: 'none', \r\n                                    marginLeft:25, marginTop:25, zIndex: user.id==='me'?50:25, border: user.id==='me'?'2px solid #dcdb53':'2px solid' }} >\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n        <Tip />\r\n    </div>\r\n    );\r\n})\r\n\r\nexport default Conference\r\n","import React, { useState } from \"react\";\r\nimport ReactSpinner from 'react-spinkit'\r\n// import {Redirect} from 'react-router-dom';\r\nimport * as qs from 'query-string'\r\n\r\nimport logosvg from '../images/logo.svg'\r\nimport logosmallsvg from '../images/logo-small.svg'\r\nimport joinbtn from '../images/joinbtn.svg'\r\nimport Footer from '../components/footer';\r\nimport './index.css';\r\n\r\nfunction Room(props) {\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const query = qs.parse(props.location.search);\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n\r\n        const { value } = event.target;\r\n        if (value.length > 0) {\r\n            setIsVerified(true);\r\n            setUserName(value);\r\n        }\r\n        else\r\n            setIsVerified(false);\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n        \r\n        window.localStorage.setItem('o', true)\r\n        window.localStorage.setItem('t', 'video-meeting')\r\n        window.localStorage.setItem('r', query.space)\r\n        window.localStorage.setItem('r', 'tryme')\r\n        window.localStorage.setItem('userName', userName)\r\n        \r\n        setTimeout(()=>{\r\n            props.history.push('/conference?space='+query.space+'&uname='+userName);\r\n            // props.history.push('/home/conference');\r\n            // <Redirect to=\"/conference/\" />\r\n            // this.context.router.push('child')\r\n        }, 2500);\r\n    }\r\n    return (\r\n    <div data-v-12a888fb=\"\" className=\"space\">\r\n        <div data-v-2db9ff64=\"\" className=\"app-header\" data-v-12a888fb=\"\">\r\n            <a data-v-2db9ff64=\"\" href=\"/\" target=\"_blank\">\r\n                <img data-v-2db9ff64=\"\" className=\"logo\" src={logosvg} alt='logosvg' style={{display: 'none'}}/>\r\n                <img data-v-2db9ff64=\"\" className=\"logo-small\" src={logosmallsvg} alt='logosmallsvg' style={{display: 'none'}}/>\r\n            </a>\r\n            <div data-v-2f32af68=\"\" className=\"space-name\">{query.space}</div>\r\n        </div>\r\n        <div data-v-a74c9690=\"\" data-v-12a888fb=\"\" className=\"entrance ent-div\">\r\n            <form data-v-a74c9690=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)}>\r\n                <input data-v-a74c9690=\"\" type=\"text\" placeholder=\"Your Name\" className=\"name\" onChange={(e)=>handleChange(e)}/>\r\n                <button data-v-a74c9690=\"\" type=\"submit\" disabled={!isVerified} className=\"pointer\">\r\n                    {sendingEmail\r\n                    ? <ReactSpinner name='three-bounce' />\r\n                    : <img src={joinbtn} alt='joinbtn' />\r\n                    }\r\n                </button>\r\n            </form>\r\n        </div>\r\n        <Footer />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Room;\r\n","import React from 'react'\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute\r\n} from 'react-router-dom'\r\nimport './App.css'\r\nimport Home from './views/home'\r\nimport Conference from './views/conference'\r\nimport Room from './views/room'\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Home}></Route>\r\n\t\t\t\t\t<Route path=\"/room\" component={Room}></Route>\r\n\t\t\t\t\t<Route path=\"/conference\" component={Conference}></Route>\r\n\t\t\t\t\t<Route path=\"/\" component={Home}></Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport rootReducer from './reducers';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nconst store = createStore (\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.da4bdda8.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-small.e1cf996c.svg\";","module.exports = __webpack_public_path__ + \"static/media/closevideo.7b864b90.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube.43fef7ea.svg\";","module.exports = __webpack_public_path__ + \"static/media/uploadimage.a7edbc9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-on.44d81ce8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-1.e529fa66.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-1.7268da01.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute.9a8a5f6e.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e50007f4.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.c4f7f08f.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube1.3933bad6.svg\";","module.exports = __webpack_public_path__ + \"static/media/users.78454788.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-off.341a9dd8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-0.34d55c9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-0.e55d1c5b.svg\";","module.exports = __webpack_public_path__ + \"static/media/support.dc413a12.svg\";","module.exports = __webpack_public_path__ + \"static/media/close.81170d04.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute1.c0d28aa1.svg\";","module.exports = __webpack_public_path__ + \"static/media/map-small@2x.0c2a372b.0c2a372b.png\";","module.exports = __webpack_public_path__ + \"static/media/map-big@2x.44a3f15c.44a3f15c.png\";","module.exports = __webpack_public_path__ + \"static/media/joinbtn.d5e1ecf0.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-mark.8e118226.svg\";"],"sourceRoot":""}