{"version":3,"sources":["reducers/buttons.js","reducers/users.js","reducers/chats.js","reducers/screen.js","reducers/index.js","components/dialog/index.js","components/dialog/Spinner.js","components/dialog/roomdlg.js","config.js","components/footer/index.js","views/home.js","utils/position.js","webrtc/index.js","components/button/index.js","components/dialog/videodlg.js","components/dialog/imagedlg.js","components/navbar/index.js","components/screen/index.js","components/youtubeupload/index.js","components/imageupload/index.js","components/tip/index.js","views/conference.js","views/room.js","App.js","index.js","images/closevideo.svg","images/youtube.svg","images/uploadimage.svg","images/logo.svg","images/logo-small.svg","images/screenshare-on.svg","images/stopvideo-1.svg","images/stopaudio-1.svg","images/mic-mute.svg","images/success.svg","images/error.svg","images/youtube1.svg","images/users.svg","images/screenshare-off.svg","images/stopvideo-0.svg","images/stopaudio-0.svg","images/support.svg","images/close.svg","images/mic-mute1.svg","images/map-small@2x.0c2a372b.png","images/map-big@2x.44a3f15c.png","images/joinbtn.svg","images/logo-mark.svg"],"names":["buttons","state","chat","camera","fullscreen","mic","screenshare","action","type","value","users","find","user","id","console","log","media","filter","map","status","chats","setTimeout","messages","document","getElementsByClassName","length","scrollIntoView","behavior","key","screens","bgMoving","videos","images","new_videos","remove_videos","x","name","video","peerId","moved_videos","play_videos","new_images","img","remove_images","moved_images","image","rootReducer","combineReducers","Dialog","window","$","plainModal","props","className","spinning","icon","faSync","size","RoomDialog","useState","isVerified","sendingEmail","setSendingEmail","mailStatus","setMailStatus","email","setEmail","space","setSpace","form","setForm","errors","setErrors","validEmailRegex","RegExp","handleChange","event","preventDefault","target","test","handleCancel","useEffect","content1","data-v-9deb956c","onSubmit","e","fetch","method","headers","aCcePt","body","JSON","stringify","then","res","json","data","reset","catch","err","ref","noValidate","input","onChange","onClick","disabled","count","Object","values","forEach","val","countErrors","Spinner","content2","src","successsvg","alt","content3","errorsvg","style","color","data-v-5c9875d0","aria-expanded","data-modal","role","aria-modal","Footer","React","memo","data-v-3de1367d","href","rel","Home","show","Utils","pos","pos1","y","mul","ele","posArr","transform","match","Number","error","scale","offsetLeft","offsetTop","left","top","rect","right","bottom","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","WebRTC","client","roomName","userName","myPosition","youtubes","sharedUserId","enableScreenShare","enableCamera","enableMic","videoQualities","text","width","height","frameRate","currentVideoQuality","this","audioQualities","sampleSize","channelCount","currentAudioQuality","_instance","Login","_browserCompatCheck","username","localStorage","getItem","setItem","generateRoomName","token","location","getUserName","localstream","audioContext","AudioContext","mediaStreamSource","createMediaStreamSource","processor","createScriptProcessor","connect","destination","onaudioprocess","evt","buffer","inputBuffer","numberOfChannels","inputData","getChannelData","inputDataLength","total","i","Math","abs","rms","sqrt","easyrtc","sendPeerMessage","targetRoom","getInstance","enable","onStreamConfigurationChange","room","onSetScreenCapture","youtube","defX","defY","videoplay","videoplaying","curtime","push","rec","cusId","dispatch","disconnect","peerName","fileInput","one","file","files","pow","alert","reader","FileReader","onload","txData","binaryContents","result","userid","align","time","Date","now","sendDataWS","readAsDataURL","click","mode","audio","currentVideoDevice","deviceId","currentAudioDevice","currentContraintMode","updateStreamMode","local","getLocalStream","getTracks","track","stop","navigator","mediaDevices","getUserMedia","stream","addTrack","video_me","getElementById","setVideoObjectSrc","enableMicrophone","peers","getPeerConnections","pc","getSenders","sender","kind","local_track","replaceTrack","enabled","screenStream","enumerateDevices","devices","dev","found","indexOf","label","videoDevices","audioDevices","defScale","updateDevices","owner","removeItem","enableDataChannels","VTCCore","initialize","cameraIsEnabled","micIsEnabled","onError","config","onPeerMessage","msgType","content","idToName","updatePeerPosition","videoId","imageid","imageId","setScreen","arr","split","mime","bstr","atob","n","u8arr","Uint8Array","charCodeAt","blob","Blob","html","URL","createObjectURL","onStreamAccept","sendServerMessage","position","defPosX","defPosY","errorCode","errorText","rtcId","onStreamClose","clientId","getId","sWidth","sHeight","updateMyPosition","peer","container","videoEl","removeChild","message","_this","getDisplayMedia","a","audioStream","getVideoTracks","onended","toggleScreenShare","getAudioTracks","cancelled","Button","data-v-2f32af68","title","VideoDialog","useDispatch","setVideo","valid","setValid","url","$1","ytVidId","element","textContent","data-v-6a2f6b36","data-v-6e496afa","elementInput","replace","draggableBack","posMe","getPositionFromTransformWithScale","calc_def_x","videoWidth","calc_def_y","videoHeight","uname","youtubeAdd","handleSubmit","ImageDialog","imagePreviewUrl","setImagePreviewUrl","uploadClick","setUploadClick","fileName","setFileName","URLChangedHandler","isImageUrl","image_url","http","XMLHttpRequest","open","send","imageExists","uploadComputer","data-v-bd733764","data-id","onloadend","fileChangedHandler","htmlFor","preview","linkURL","elementUpload","elementLink","handleUpload","handleLink","imageWidth","imageHeight","imageAdd","Navbar","useSelector","toggleChange","type1","value1","toggleCamera","toggleMic","data-v-2db9ff64","data-v-12a888fb","logosvg","display","logosmallsvg","data-v-261ef19f","userssvg","on","off","no","uploadimage","sharedscreen_on","sharedscreen_off","stopvideo0","stopvideo1","stopaudio0","stopaudio1","support","close","closeClient","query","Screen","screenid","nodeRef","useRef","firstPosX","setFirstPosX","firstPosY","setFirstPosY","validVolumeAndScaleForNeighborhood","videoEles","getElementsByTagName","screenMePos","getPositionFromTransform","parentElement","setVolumeAndScaleForNeighborhood","videoEle","screenCurrObjPos","dist","max","scale_val","min","vol","volume","isFinite","calculateEdge","posX","posY","current","parentNode","curScale","noderef","default","onDragStart","d","detail","dragStart","onDrag","handleDrag","onDragStop","zIndex","lockAspectRatio","enableResizing","disableDragging","data-tip","data-for","borderRadius","marginLeft","marginTop","border","tabIndex","controls","loop","muted","onMouseMove","screenX","screenY","innerHTML","onMouseOut","YoutubeUpload","realCurTime","videoRef","youtubeMute","setYoutubeMute","youtubeMuteAudio","videoid","onTimer","getDistanceByPosition","p1","p2","me_ele","videoPos","distance","getDistanceByRectAndPosition","internalPlayer","setVolume","undefined","handleDragStop","youtubePosition","vdoWidth","vdoHeight","unMute","youtubePlay","seekTo","playVideo","pauseVideo","numbers","topRight","bottomRight","bottomLeft","topLeft","onResizeStop","direction","refval","delta","resizeWidth","parseInt","resizeHeight","data-v-c1f79ed4","data-v-7e3fe256","data-v-a995c326","youtubeRemove","closevideo","opts","origin","playerVars","autoplay","onPlay","onPause","onStateChange","getCurrentTime","svg-inline","MicMute0","MicMute1","ImageUpload","imagePosition","imgWidth","imgHeight","imageRemove","closeimage","Tip","fontSize","backgroundColor","padding","Conference","startConference","qs","search","videoObj","imageObj","userClose","setUserClose","wheelScale","setWheelScale","validSmallScreens","setScaleByPosition","posBack","viewRect","inRect","isInRect","smallScreen","getAttribute","firstChild","appendChild","smallPos","setPositionOfHtmlElement","multiplyPosition","addPosition","Fragment","backgroundImage","img_small","onSetUserClose","enablePadding","enablePanPadding","scalePadding","options","minScale","maxScale","wheel","step","pan","paddingSize","onWheel","handleWheel","onPanning","doubleClick","img_big","Room","setIsVerified","setUserName","data-v-a74c9690","history","placeholder","joinbtn","App","path","component","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.d64cb24e.chunk.js","sourcesContent":["const buttons = (state = {chat:'on', camera:'on', fullscreen:'on', mic: 'on', screenshare: 'on'}, action) => {\r\n    switch(action.type){\r\n        case \"click_chat\":\r\n            return {\r\n                ...state,\r\n                chat: action.value\r\n            }\r\n        case \"click_camera\":\r\n            return {\r\n                ...state,\r\n                camera: action.value\r\n            }\r\n        case \"click_fullscreen\":\r\n            return {\r\n                ...state,\r\n                fullscreen: action.value\r\n            }\r\n        case \"click_mic\":\r\n            return {\r\n                ...state,\r\n                mic: action.value\r\n            }\r\n        case \"click_screenshare\":\r\n            return {\r\n                ...state,\r\n                screenshare: action.value\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default buttons;","const users = (state = [], action) => {\r\n    switch(action.type){\r\n        case \"user_add\":\r\n            // console.log('user_add: state ------', state, 'action---------',action)\r\n            if( state.find((user)=>user.id === action.value.id)){\r\n                console.log('Duplicate user error!', action.value)\r\n                return state;\r\n            }\r\n            return [\r\n                ...state,\r\n                { ...action.value, media: {mic:'on', camera:'on'}}\r\n            ]\r\n        case \"user_remove\":\r\n            // console.log('usre_remove: state----------', state, 'action----------', action, 'remove----------',state.filter((user)=>user.id !== action.value.id), '-------')\r\n            return state.filter((user)=>user.id !== action.value.id);\r\n        case \"user_media\":\r\n            // console.log(\"user_media\", action, state)\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                if (action.value.type === 'mic')\r\n                    return {...user, media:{...user.media, mic: action.value.status}}\r\n                if (action.value.type === 'camera')\r\n                    return {...user, media:{...user.media, camera: action.value.status}}\r\n                // console.log(\"user-media: screenshare changes: \", {...user, media:{...user.media, screenshare: action.value.status}})\r\n                return {...user, media:{...user.media, screenshare: action.value.status}}\r\n            });\r\n        case \"user_position\":\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                // console.log('----------user + action: ', user, action, {...user, ...action.value})\r\n                return {...user, ...action.value}\r\n            });\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport default users;","const chats = (state = [], action) => {\r\n    switch(action.type){\r\n        case \"chat_add\":\r\n            // scroll\r\n            setTimeout(()=>{\r\n                    const messages = document.getElementsByClassName('chatitemparent');\r\n                    if (messages.length>0) {\r\n                        messages[messages.length-1].scrollIntoView({behavior: 'smooth'});\r\n                    }\r\n                }, 200);\r\n            return [\r\n                ...state,\r\n                { ...action.value, key: state.length}\r\n            ]\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default chats;","const screens = (state = {bgMoving:false, videos: [], images: []}, action) => {\r\n    switch(action.type){\r\n        case \"backgound_moving\":\r\n            return {\r\n                ...state,\r\n                bgMoving: action.value\r\n            }\r\n        case \"youtube_add\":\r\n            const new_videos = [...state.videos, action.value];\r\n            return {\r\n                ...state,\r\n                videos: new_videos\r\n            }\r\n        case \"youtube_remove\":\r\n            const remove_videos = state.videos.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                videos: remove_videos\r\n            }\r\n        case \"youtube_remove_by_id\":\r\n            return { ...state, videos: state.videos.filter((video)=>{\r\n                return video.id !== action.peerId;\r\n            })}\r\n        case \"youtube_position\":\r\n            const moved_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: moved_videos\r\n            }\r\n        case \"youtube_play\":\r\n            const play_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: play_videos\r\n            }\r\n        case \"image_add\":\r\n            const new_images = [...state.images, action.value];\r\n            return {\r\n                ...state,\r\n                images: new_images\r\n            }\r\n        case \"image_remove_by_id\":\r\n            return { ...state, images: state.images.filter((img)=>{\r\n                return img.id !== action.peerId;\r\n            })}\r\n        case \"image_remove\":\r\n            const remove_images = state.images.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                images: remove_images\r\n            }\r\n        case \"image_position\":\r\n            const moved_images = state.images.map((image) => {\r\n                // console.log(image, action, {...image, ...action.value})\r\n                if (image.name !== action.value.name)\r\n                    return image;\r\n                return {...image, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                images: moved_images\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default screens;","import {combineReducers} from 'redux'\r\nimport buttons from './buttons'\r\nimport users from './users'\r\nimport chats from './chats'\r\nimport screens from './screen'\r\n// import mediadevices from './medias'\r\n\r\nconst rootReducer = combineReducers({\r\n    buttons,\r\n    users,\r\n    chats,\r\n    screens\r\n})\r\n\r\nexport default rootReducer","import './index.css';\r\n\r\nclass Dialog{\r\n    static show(id) {\r\n        const ele = window.$('#'+id);\r\n        ele.plainModal('open')\r\n    }\r\n}\r\nexport default Dialog;","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSync } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport default props =>\r\n  <div className={`fadeIn ${props.spinning}`}>\r\n    <FontAwesomeIcon icon={faSync} size={props.size} />\r\n  </div>","import React, {useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport Recaptcha from 'react-recaptcha';\r\n\r\nimport Spinner from './Spinner'\r\nimport './index.css';\r\nimport successsvg from '../../images/success.svg'\r\nimport errorsvg from '../../images/error.svg'\r\nimport { API_URL } from '../../config'\r\n\r\n\r\nfunction RoomDialog(props){\r\n    const [isVerified, setIsVerified] = useState(true);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [mailStatus, setMailStatus] = useState(2);\r\n    const [email, setEmail] = useState('');\r\n    const [space, setSpace] = useState('');\r\n    const [form, setForm] = useState(null);\r\n    const [errors, setErrors] = useState({\r\n        email: 'Enter your Email!',\r\n        space: 'Enter your Sspace Name!',\r\n    })\r\n\r\n    const validEmailRegex = RegExp(/^(([^<>()\\],;:\\s@]+([^<>()\\],;:\\s@]+)*)|(.+))@(([^<>()[\\],;:\\s@]+)+[^<>()[\\],;:\\s@]{2,})$/i);\r\n\r\n    const countErrors = (errors) => {\r\n        let count = 0;\r\n        delete errors.name\r\n        Object.values(errors).forEach(\r\n            (val) => {\r\n                val.length > 0 && (count = count+1)\r\n            }\r\n        );\r\n        return count;\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n\r\n        switch (name) {\r\n            case 'space':\r\n                errors.space =\r\n                value.length < 5\r\n                    ? 'Space Name must be 5 characters long!'\r\n                    : '';\r\n                break;\r\n            case 'email':\r\n                errors.email =\r\n                validEmailRegex.test(value)\r\n                    ? ''\r\n                    : 'Email is not valid!';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        setErrors({\r\n            ...errors,\r\n            name: value\r\n        })\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n\r\n        fetch(`${API_URL}/email`, {\r\n            method: 'pOSt',\r\n            headers: {\r\n                aCcePt: 'aPpliCaTIon/JsOn',\r\n                'cOntENt-type': 'applicAtion/JSoN'\r\n            },\r\n            body: JSON.stringify({ email: email.value, space: space.value })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            setSendingEmail(false)\r\n            setMailStatus(data.status)\r\n            form.reset()\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#roomdialog').plainModal('close')\r\n\r\n        setTimeout(()=>{\r\n            setSendingEmail(false)\r\n            setMailStatus(2)\r\n            // setIsVerified(false);\r\n        }, 100);\r\n    }\r\n    const onLoadCallback = function () {\r\n    };\r\n    const onVerifyCallback = function () {\r\n        // setIsVerified(true);\r\n    };\r\n    useEffect(()=>{\r\n        if (mailStatus === 2) {\r\n            // ReactDOM.render(\r\n            //     <Recaptcha\r\n            //         sitekey=\"6LdpQwEVAAAAAGM4w3LS9xsD-Hd6yAP_DhIce0nz\"\r\n            //         render=\"explicit\"\r\n            //         onloadCallback={onLoadCallback}\r\n            //         verifyCallback={onVerifyCallback}\r\n            //     />,\r\n            //     document.getElementById('recaptcha')\r\n            // );\r\n        }\r\n    },[mailStatus])\r\n\r\n    const content1 =\r\n        <form data-v-9deb956c=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)} ref={form => setForm(form)} noValidate>\r\n            <div data-v-9deb956c=\"\" className=\"label\" >Your Email</div>\r\n            <input data-v-9deb956c=\"\" type=\"email\" name='email' className=\"email\" ref={input => setEmail(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.email.length > 0 &&\r\n                <span className='error'>{errors.email}</span>}\r\n            <div data-v-9deb956c=\"\" className=\"label\">Space Name</div>\r\n            <input data-v-9deb956c=\"\" type=\"text\" name='space' className=\"space-name\" ref={input => setSpace(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.space.length > 0 &&\r\n                <span className='error'>{errors.space}</span>}\r\n            <div id='recaptcha'/>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    CANCEL\r\n                </button>\r\n                <button data-v-9deb956c=\"\" type='submit' className='create'\r\n                    disabled={ countErrors(errors)===0 && isVerified ? false : true}>\r\n                    {sendingEmail\r\n                    ? <Spinner size='lg' spinning='spinning' />\r\n                    : \"CREATE\"\r\n                    }\r\n                </button>\r\n            </div>\r\n        </form>\r\n    const content2 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={successsvg} alt='successsvg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\">Email sent!\r\n                    <h4 data-v-9deb956c=\"\">Please check your inbox to confirm.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n    const content3 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={errorsvg} alt='error.svg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\" style={{color: '#ff0000'}}>Whoops!\r\n                    <h4 data-v-9deb956c=\"\">Already registered.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n\r\n    return (\r\n        <div data-v-9deb956c=\"\" data-v-5c9875d0=\"\" id ='roomdialog' aria-expanded=\"true\" data-modal=\"create-space\" className=\"create-space-modal v--modal-overlay roomdialog\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal m-dialog\">\r\n                    <div data-v-9deb956c=\"\" className=\"header\">Create Space</div>\r\n                    {mailStatus === 2\r\n                    ? content1\r\n                    : mailStatus === 0\r\n                    ? content2\r\n                    : content3\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default RoomDialog;","// export const API_URL = process.env.NODE_ENV === 'production'\r\n//   ? 'http://ec2-18-222-23-198.us-east-2.compute.amazonaws.com:3113/'\r\n  // : 'http://localhost:3113'\r\nexport const API_URL = process.env.NODE_ENV === 'production'\r\n  ? 'https://webrtc.bcisummit.com'\r\n  : 'https://webrtc.bcisummit.com'\r\n  // : 'localhost:3011' //tesing port","import React from 'react';\r\n\r\nconst Footer = React.memo(props => {\r\n    return (\r\n        <div data-v-3de1367d=\"\" className=\"footer\">\r\n            <div data-v-3de1367d=\"\" className=\"links\">\r\n                <a data-v-3de1367d=\"\" href=\"https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to=seniordev119@gmail.com\" className=\"support-link\" target=\"_blank\" rel=\"noopener noreferrer\">seniordev119@gmail.com</a>\r\n                <span data-v-3de1367d=\"\" className=\"phone-hidden\">&nbsp;&nbsp;&nbsp;&nbsp;∙&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                <div data-v-3de1367d=\"\" className=\"legal\">\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/SpatialChat-Privacy-Policy-899c953609d24d3ebbd619506becaa7f\" target=\"_blank\" rel=\"noopener noreferrer\">Privacy Policy</a>\r\n                    <span data-v-3de1367d=\"\">&nbsp;&nbsp;&nbsp;&nbsp;∙&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/Terms-of-Service-6f9243e5e25346cfa73df618c90de4fb\" target=\"_blank\" rel=\"noopener noreferrer\">Terms of Service</a>\r\n                </div>\r\n            </div>\r\n            {/* <div data-v-3de1367d=\"\" className=\"copyright\">Designed by FunCorp Lab</div> */}\r\n        </div>\r\n    );\r\n})\r\nexport default Footer;","import React from \"react\";\r\n\r\nimport marksvg from '../images/logo-mark.svg'\r\nimport Dialog from '../components/dialog';\r\nimport RoomDialog from '../components/dialog/roomdlg';\r\nimport Footer from '../components/footer';\r\n\r\nfunction Home(props) {\r\n    return (\r\n    <div data-v-5c9875d0=\"\" className=\"home\">\r\n        {/* <img src={marksvg} alt='marksvg' />\r\n\r\n        <div data-v-5c9875d0=\"\" className=\"slogan\">Your virtual party for up to 50 guests</div> */}\r\n        <div data-v-5c9875d0=\"\" className=\"buttons\">\r\n            <button data-v-5c9875d0=\"\" onClick={()=>{Dialog.show('roomdialog')}} className=\"button\">Create Space</button>\r\n        </div>\r\n        <Footer />\r\n        <RoomDialog />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","export default class Utils{\r\n    static addPosition(pos, pos1){\r\n        return {x: pos.x+pos1.x, y: pos.y+pos1.y}\r\n    }\r\n    static multiplyPosition(pos, mul){\r\n        return {x: pos.x*mul, y: pos.y*mul}\r\n    }\r\n    static getPositionFromTransform(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromTransformWithScale(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1], scale: posArr[2]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromStyle(ele){\r\n        try{\r\n            return {x: ele.offsetLeft, y: ele.offsetTop}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static setPositionOfHtmlElement(ele, pos){\r\n        try{\r\n            ele.style.left = pos.x + 'px';\r\n            ele.style.top = pos.y + 'px';\r\n            return true;\r\n        } catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static isInRect(rect, pos){\r\n        try{\r\n            if(pos.x >= rect.left && pos.x <= rect.right && pos.y >= rect.top && pos.y <= rect.bottom)\r\n                return true;\r\n            return false\r\n        }catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static width(){\r\n        return(window.innerWidth)?\r\n        window.innerWidth:\r\n        document.documentElement.clientWidth||document.body.clientWidth||0;\r\n    }\r\n    static height(){\r\n        return(window.innerHeight)?\r\n        window.innerHeight:\r\n        document.documentElement.clientHeight||document.body.clientHeight||0;\r\n    }\r\n}","import Utils from '../utils/position'\r\n\r\nclass WebRTC {\r\n    static _instance = null;\r\n    client = null;\r\n    roomName = ''\r\n    userName = ''\r\n    myPosition = {x:0, y:0}\r\n    youtubes = []\r\n    images = []\r\n    sharedUserId = ''\r\n    enableScreenShare = true\r\n    enableCamera = true\r\n    enableMic = true\r\n\r\n    videoQualities = [\r\n        {text:'SSM (30p - 128Kb/s)', value:{width: 160, height:120, frameRate: 10}},\r\n        {text:'SM (120p - 256Kb/s)', value:{width: 320, height:240, frameRate: 10}},\r\n        {text:'SD (360p - 1Mb/s)', value:{width: 480, height:360, frameRate: 10}},\r\n        {text:'HD (720p - 2Mb/s)', value:{width: 1280, height:720, frameRate: 10}},\r\n        {text:'Full HD (1080p - 4Mb/s)', value:{width: 1920, height:1080, frameRate: 15}},\r\n    ]\r\n    currentVideoQuality = this.videoQualities[1]\r\n    audioQualities = [\r\n        {text:'Narrow Band (16Kb/s)', value:{sampleSize: 8, channelCount: 1}},\r\n        {text:'Wide Band (64Kb/s)', value:{sampleSize: 8, channelCount: 2}},\r\n        {text:'Full Band (256Kb/s)', value:{sampleSize: 16, channelCount: 2}},\r\n    ]\r\n    currentAudioQuality = this.audioQualities[1]\r\n\r\n    static getInstance(){\r\n         if ( WebRTC._instance === null) {\r\n             WebRTC._instance = new WebRTC();\r\n         }\r\n         return WebRTC._instance;\r\n    }\r\n\r\n    constructor() {\r\n        console.log('WebRTC class was initialized.');\r\n    }\r\n\r\n    checkBrowser() {\r\n        return window.Login._browserCompatCheck();\r\n    }\r\n    getUserName() {\r\n        const username = window.localStorage.getItem('userName');\r\n        return username ? username : '';\r\n    }\r\n    setUserName(name) {\r\n        window.localStorage.setItem('userName', name)\r\n    }\r\n    getRoomName() {\r\n        return this.roomName;\r\n    }\r\n    generateRoomName(){\r\n        return window.generateRoomName();\r\n    }\r\n    createRoom(token, roomName) {\r\n        window.localStorage.setItem('o', true)\r\n        window.localStorage.setItem('t', 'video-conference')\r\n        window.localStorage.setItem('r', roomName)\r\n        window.location.href = '/room?username='+this.getUserName();\r\n    }\r\n    joinRoom(token, roomName) {\r\n        window.localStorage.setItem('o', false)\r\n        window.localStorage.setItem('t', 'video-conference')\r\n        window.localStorage.setItem('r', roomName)\r\n        window.location.href = '/room?username='+this.getUserName();\r\n    }\r\n    createAudioMeter(localstream) {\r\n        var kSampleSize = 16384;\r\n        var kSampleAverageInterval = 16;\r\n        var audioContext = new AudioContext();\r\n        var mediaStreamSource = audioContext.createMediaStreamSource(localstream);\r\n        var processor = audioContext.createScriptProcessor(kSampleSize, 1, 1);\r\n\r\n        mediaStreamSource.connect(processor);\r\n        processor.connect(audioContext.destination);\r\n\r\n        processor.onaudioprocess = function(evt) {\r\n            var buffer = evt.inputBuffer;\r\n            if (buffer.numberOfChannels > 0) {\r\n                var inputData = buffer.getChannelData(0);\r\n                var inputDataLength = inputData.length;\r\n                var total = 0;\r\n\r\n                // We calculate the average of every X to prevent CPU fans from kicking in\r\n                // on laptops!\r\n                for (var i = 0; i < inputDataLength; i += kSampleAverageInterval) {\r\n                    total += Math.abs(inputData[i]);\r\n                }\r\n\r\n                var rms = Math.sqrt((kSampleAverageInterval * total) / inputDataLength);\r\n                // WebRTC.getInstance().client.sendPeerMessage();\r\n\r\n                window.easyrtc.sendPeerMessage({\r\n                    targetRoom: WebRTC.getInstance().roomName\r\n                }, 'audio-meter', {\r\n                    rms: rms\r\n                });\r\n            }\r\n        };\r\n    }\r\n    toggleCamera (enable) {\r\n        this.enableCamera = enable\r\n        // window.easyrtc.enableCamera(enable);\r\n        this.onStreamConfigurationChange()\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'media-presence', {type:'camera', status: enable?'on':'off'});\r\n    }\r\n    toggleMic (enable) {\r\n        this.enableMic = enable\r\n        // window.easyrtc.enableMicrophone(enable);\r\n        this.onStreamConfigurationChange()\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'media-presence', {type:'mic', status: enable?'on':'off'});\r\n    }\r\n    toggleScreenShare (enable) {\r\n        this.enableScreenShare = enable\r\n        if (!enable)\r\n            WebRTC.getInstance().onSetScreenCapture()\r\n        else \r\n            WebRTC.getInstance().onStreamConfigurationChange()\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'media-presence', {type:'screenshare', status: enable?'on':'off'});\r\n    }\r\n    \r\n    youtubePosition (value) {\r\n        this.youtubes.forEach((youtube)=>{\r\n            if(youtube.name === value.name) {\r\n                youtube.transform = value.transform;\r\n                youtube.defX = value.defX;\r\n                youtube.defY = value.defY;\r\n                youtube.width = value.width;\r\n                youtube.height = value.height;\r\n            }\r\n        })\r\n        console.log('------------youtubePosition', value, this.youtubes)\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'youtube-position', value);\r\n    }\r\n    youtubePlay (value) {\r\n        this.youtubes.forEach((youtube)=>{\r\n            if(youtube.name === value.name) {\r\n                youtube.videoplay = value.videoplay;\r\n                youtube.videoplaying = value.videoplaying;\r\n                youtube.curtime = value.curtime;\r\n            }\r\n        })\r\n\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'youtube-play', value);\r\n    }\r\n    youtubeAdd (value) {\r\n        WebRTC.getInstance().youtubes.push(value)\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'youtube-add', value);\r\n    }\r\n    youtubeRemove (value) {\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'youtube-remove', value);\r\n        WebRTC.getInstance().youtubes = WebRTC.getInstance().youtubes.filter((rec)=>{\r\n            return rec.name!==value.name\r\n        })\r\n    }\r\n    imageAdd (value) {\r\n        // value.transform = 'translate(0px, 0px)';\r\n        WebRTC.getInstance().images.push(value)\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'image-add', value);\r\n    }\r\n    imagePosition (value) {\r\n        this.images.forEach((image)=>{\r\n            if(image.name === value.name) {\r\n                image.transform = value.transform\r\n                image.defX = value.defX;\r\n                image.defY = value.defY;\r\n                image.width = value.width;\r\n                image.height = value.height;\r\n            }\r\n        })\r\n        if(this.client)\r\n            this.client.sendPeerMessage({room: this.roomName}, 'image-position', value);\r\n    }\r\n    imageRemove (value) {\r\n        if(WebRTC.getInstance().client)\r\n            WebRTC.getInstance().client.sendPeerMessage({room: this.roomName}, 'image-remove', value);\r\n        WebRTC.getInstance().images = WebRTC.getInstance().images.filter((rec)=>{\r\n            return rec.name!==value.name\r\n        })\r\n    }\r\n    closeClient(cusId) {\r\n        this.dispatch({type:'user_remove', value: { id: cusId }});\r\n        window.easyrtc.disconnect();\r\n    }\r\n    sendFile(peerId, peerName, dispatch) {\r\n        const fileInput = window.$(\"#file\");\r\n        fileInput.one(\r\n            'change',\r\n            function(){\r\n                const file = fileInput[0].files[0];\r\n                if(file.size === 0){\r\n                    alert(\"Empty file selected.\");\r\n                    return;\r\n                }\r\n                if(file.size > Math.pow(2, 21)){\r\n                    alert(\"File size can't be larger than 2MB.\");\r\n                    return;\r\n                }\r\n                var reader = new FileReader();\r\n                // Closure to capture the file information.\r\n                reader.onload = function(e) {\r\n                    var txData = {\r\n                        name: file.name,\r\n                        type: file.type,\r\n                        size: file.size,\r\n                        binaryContents: e.target.result\r\n                    };\r\n                    dispatch({type:'chat_add',\r\n                        value:{\r\n                            username: 'Me',\r\n                            userid: 'me',\r\n                            text: `Send a file \"${file.name}\" to \"${peerName}\".`,\r\n                            align: 'right',\r\n                            time: Date.now()}})\r\n                    window.easyrtc.sendDataWS(peerId, 'file', txData);\r\n                };\r\n                // Read in the image file as a data URL.\r\n                reader.readAsDataURL(file);\r\n                fileInput[0].value = ''\r\n            }\r\n        )\r\n        fileInput[0].click();\r\n        // .trigger('click');\r\n    }\r\n    // exitRoom(){\r\n    //     if(this.owner === 'true'){\r\n    //         this.sendMessage('Room closed.');\r\n    //         window.easyrtc.sendPeerMessage({\r\n    //             targetRoom: WebRTC.getInstance().roomName\r\n    //         }, 'close');\r\n    //         this.dispatch({type:'chat_add', value:{username: 'Me', userid: 'me', text: 'Room closed.', align: 'right', time: Date.now()}})\r\n    //     }\r\n    //     this.closeClient()\r\n    // }\r\n    updateStreamMode(){\r\n        // get getUserMedia mode\r\n        let mode = {video:false, audio: false}\r\n        if(this.currentVideoDevice){\r\n            mode.video = {}\r\n            mode.video.deviceId = this.currentVideoDevice.value;\r\n            mode.video.width = this.currentVideoQuality.value.width;\r\n            mode.video.height = this.currentVideoQuality.value.height;\r\n            mode.video.frameRate = this.currentVideoQuality.value.frameRate;\r\n        }\r\n        if(this.currentAudioDevice){\r\n            mode.audio = {}\r\n            mode.audio.deviceId = this.currentAudioDevice.value;\r\n            mode.audio.sampleSize = this.currentAudioQuality.value.sampleSize;\r\n            mode.audio.channelCount = this.currentAudioQuality.value.channelCount;\r\n        }\r\n        this.currentContraintMode = mode;\r\n    }\r\n    onStreamConfigurationChange(peerId){\r\n        if(!this.enableScreenShare){\r\n            //now screen sharing status...\r\n            const peers = window.easyrtc.getPeerConnections()\r\n            for(const id in peers){\r\n                const peer = peers[id]\r\n                \r\n                peer.pc.getSenders().map((sender) => \r\n                {\r\n                    if(WebRTC.getInstance().screenStream){\r\n                        sender.replaceTrack(WebRTC.getInstance().screenStream.getTracks().find(track=>{\r\n                            return track.kind === sender.track.kind\r\n                        }))\r\n                    }\r\n                })\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.updateStreamMode();\r\n        const local = window.easyrtc.getLocalStream();\r\n        local.getTracks().forEach(track=>{track.stop()})\r\n        const mode = {...this.currentContraintMode}\r\n        if(! WebRTC.getInstance().enableCamera)\r\n            mode.video = false;\r\n        if(! WebRTC.getInstance().enableMic)\r\n            mode.audio = false;\r\n        if(!mode.video && !mode.audio){\r\n            const peers = window.easyrtc.getPeerConnections()\r\n            for(const id in peers){\r\n                const peer = peers[id]\r\n                // if(peer.cancelled)\r\n                //     continue;\r\n                peer.pc.getSenders().forEach((sender) =>{\r\n                    if(sender.track)\r\n                        sender.track.enabled = false;\r\n                            // sender.track.stop()\r\n                    }\r\n                )\r\n                    //sender.replaceTrack(null))\r\n            }\r\n            return;\r\n        }\r\n        navigator.mediaDevices.getUserMedia(mode).then(\r\n            (stream)=>{\r\n                // replace local stream\r\n                stream.getTracks().forEach((track)=>{local.addTrack(track)})\r\n                const video_me = document.getElementById(local.id)\r\n                // console.log('video_me ----------',video_me)\r\n                if(video_me)\r\n                    window.easyrtc.setVideoObjectSrc(video_me, stream)\r\n                window.easyrtc.enableCamera(WebRTC.getInstance().enableCamera)\r\n                window.easyrtc.enableMicrophone(WebRTC.getInstance().enableMic)\r\n                const peers = window.easyrtc.getPeerConnections()\r\n                \r\n                for(const id in peers){\r\n                    const peer = peers[id]\r\n                    // if(peer.cancelled)\r\n                    //     continue;\r\n                    peer.pc.getSenders().forEach((sender) =>{\r\n                        const kind = sender.track.kind;\r\n                        // if(kind === 'video'){\r\n                        const local_track = stream.getTracks().find(track=>track.kind===kind)\r\n                        if(local_track){\r\n                            sender.replaceTrack(local_track);\r\n                            sender.track.enabled = true\r\n                        }\r\n                        else\r\n                            sender.track.enabled = false;\r\n                        // }\r\n                    } )\r\n                }\r\n            }\r\n        );\r\n    }\r\n    async updateDevices(){\r\n        try{\r\n            let audio = [];\r\n            let video = [];\r\n            const devices = await navigator.mediaDevices.enumerateDevices();\r\n            for(const dev of devices){\r\n                if(dev.kind === 'audioinput'){\r\n                    const found = audio.filter(ele=>ele.text.indexOf(dev.label)===0)\r\n                    if(found.length>0)\r\n                        audio = [...audio, {text:dev.label+'-'+found.length, value: dev.deviceId}]\r\n                    else\r\n                        audio = [...audio, {text:dev.label, value: dev.deviceId}]\r\n                }\r\n                if(dev.kind === 'videoinput'){\r\n                    const found = video.filter(ele=>ele.text.indexOf(dev.label)===0)\r\n                    if(found.length>0)\r\n                        video = [...video, {text:dev.label+'-'+found.length, value: dev.deviceId}]\r\n                    else\r\n                        video = [...video, {text:dev.label, value: dev.deviceId}]\r\n\r\n                }\r\n            }\r\n            this.videoDevices = video;\r\n            this.audioDevices = audio;\r\n        }catch(e){\r\n        }\r\n    }\r\n    async startConference(dispatch, token, room, userName, defScale) {\r\n        console.log('start conference: ', userName, defScale)\r\n        this.userName = userName;\r\n        this.roomName = room ? room : window.localStorage.getItem('r');\r\n        \r\n        if(!this.roomName){\r\n            window.location.href = '/room?space='+this.roomName;\r\n            return;\r\n        }\r\n        this.dispatch = dispatch;\r\n        await this.updateDevices();\r\n        this.currentVideoDevice = this.videoDevices.length === 0 ? null: this.videoDevices[0];\r\n        this.currentAudioDevice = this.audioDevices.length === 0 ? null: this.audioDevices[0];\r\n\r\n        this.owner = window.localStorage.getItem('o')\r\n        this.token = window.localStorage.getItem('t');\r\n\r\n        window.localStorage.removeItem('o');\r\n        window.localStorage.removeItem('t');\r\n        window.localStorage.removeItem('r');\r\n\r\n        window.easyrtc.enableDataChannels(false);\r\n        window.VTCCore\r\n        .initialize({\r\n            cameraIsEnabled: true,\r\n            micIsEnabled: true\r\n        })\r\n        .onError(function(config) {\r\n            console.log(\"error---\", config);\r\n        })\r\n        .onPeerMessage(function(client, peerId, msgType, content) {\r\n            if (msgType === 'chat') {\r\n                dispatch({type:'chat_add', value:{username: client.idToName(peerId), userid: peerId, text: content, align: 'left', time: Date.now()}})\r\n            } else if (msgType === 'set_peer_position') {\r\n                WebRTC.getInstance().updatePeerPosition(content)\r\n            // Youtube Handle\r\n            } else if (msgType === 'youtube-position') {\r\n                dispatch({type:'youtube_position', value:{username: client.idToName(peerId), name: content.name, videoId: peerId, transform: content.transform, \r\n                    width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'youtube-play') {\r\n                dispatch({type:'youtube_play', value:{ name: content.name, videoplay: content.videoplay, curtime: content.curtime, videoplaying: content.videoplaying}})\r\n            } else if (msgType === 'youtube-add') {\r\n                dispatch({type:'youtube_add', value:{name: content.name, id: peerId, value: content.videoId, transform: content.transform, width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'youtube-remove') {\r\n                console.log('youtbut_remove: ', content)\r\n                dispatch({type:'youtube_remove', name:content.name})\r\n            // Image Handle\r\n            } else if (msgType === 'image-position') {\r\n                dispatch({type:'image_position', value:{username: client.idToName(peerId), name: content.name, imageid: peerId, transform: content.transform, \r\n                    width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'image-add') {\r\n                dispatch({type:'image_add', value:{name: content.name, id: peerId, value: content.imageId, transform: content.transform, width: content.width, height: content.height, defX: content.defX, defY: content.defY}})\r\n            } else if (msgType === 'image-remove') {\r\n                dispatch({type:'image_remove', name:content.name})\r\n            // Navbar Handle\r\n            } else if (msgType === 'media-presence' &&\r\n                typeof content.type === 'string' &&\r\n                typeof content.status === 'string') {\r\n                    const setScreen = ()=>{\r\n                        const ele = document.getElementById('screen_'+peerId);\r\n                        if(ele){\r\n                            dispatch({type:'user_media', value: { id: peerId, type: 'screenshare', status: content.status}})\r\n                            return;\r\n                        }\r\n                        setTimeout(setScreen, 500);\r\n                    }\r\n                    setTimeout(setScreen, 500);\r\n            } else if (msgType === 'debug') {\r\n                console.log(msgType, peerId, content);\r\n            } else if (msgType === 'mic-control' && typeof content.enabled === 'boolean') {\r\n                console.log(client, peerId, msgType, content)\r\n                return;\r\n            } else if (msgType === 'audio-meter') {\r\n                // dispatch({type:'user_audio', value: {audio: content.rms});\r\n                // AudioMeter.handlePeerMessage(peerId, content);\r\n            } else if (msgType === 'file'){\r\n                var arr = content.binaryContents.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n                while(n--){\r\n                    u8arr[n] = bstr.charCodeAt(n);\r\n                }\r\n                var blob = new Blob([u8arr], {type:mime});\r\n                dispatch({type:'chat_add',\r\n                        value:{\r\n                            username: client.idToName(peerId),\r\n                            userid: peerId,\r\n                            html: `\"${client.idToName(peerId)}\" sent a file.<br><a href='${URL.createObjectURL(blob)}' target='_blank'>Click here to download ${content.name}(${content.size}bytes)`,\r\n                            align: 'left',\r\n                            time: Date.now()}})\r\n            } else {\r\n                // @todo FIXME: right now we don't have other messages to take care of\r\n                console.log('peerMessage => got a peer message that is unexpected');\r\n                console.log('            => peerId:  ' + peerId);\r\n                console.log('            =>   name: ' + client.idToName(peerId));\r\n                console.log('            => msgType: ' + msgType);\r\n                console.log('            => content: ' + JSON.stringify(content));\r\n            }\r\n        })\r\n        .onStreamAccept(function(client, peerId, stream) {\r\n            var peerName = client.idToName(peerId);\r\n            \r\n            window.easyrtc.sendServerMessage(\"get_peer_position\", peerId,\r\n                function(msgType, position){\r\n                    console.log('onStreamAccept: ', peerName, 'roomName = ', WebRTC.getInstance().roomName)\r\n                    dispatch({type: 'user_add', value: {id: peerId, name: peerName, stream, defPosX: position.x, defPosY: position.y} })\r\n                    WebRTC.getInstance().onStreamConfigurationChange(peerId);\r\n                }, function(errorCode, errorText){\r\n            });\r\n            WebRTC.getInstance().youtubes.forEach((youtube)=>{\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'youtube-add', youtube);\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'youtube-play', youtube);\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'youtube-position', youtube);\r\n            })\r\n            WebRTC.getInstance().images.forEach((image)=>{\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'image-add', image);\r\n                WebRTC.getInstance().client.sendPeerMessage(\r\n                    {rtcId: peerId}, \r\n                    'image-position', image);\r\n            })\r\n            \r\n            WebRTC.getInstance().client.sendPeerMessage({room: WebRTC.getInstance().roomName}, 'media-presence', {type:'screenshare', status: WebRTC.getInstance().enableScreenShare?'on':'off'});\r\n            \r\n            return;\r\n        })\r\n        .onStreamClose(function(client, peerId) {\r\n            console.log('streamClose')\r\n            dispatch({type:'image_remove_by_id', peerId})\r\n            dispatch({type:'youtube_remove_by_id', peerId})\r\n\r\n            // console.log('-------------oncStreamClose')\r\n            // WebRTC.getInstance().removeChild(peerId, client)\r\n            dispatch({type:'user_remove', value: { id: peerId }});\r\n\r\n            return;\r\n        })\r\n        .connect(userName, this.roomName, (client) => {\r\n            console.log('start local stream: ', userName, 'roomName = ',this.roomName)\r\n            var stream = client.getLocalStream();\r\n\r\n            window.easyrtc.sendServerMessage('get_my_position', {clientId: client.getId(), sWidth: Utils.width(), sHeight: Utils.height()},\r\n            // window.easyrtc.sendServerMessage('get_my_position', {clientId: client.getId()},\r\n                function(msgType, position){\r\n                    // console.log('webrtc---------- ', position)\r\n                    dispatch({type: 'user_add', value: {id: 'me', name: 'Me', stream, defPosX: position.x, defPosY: position.y} })\r\n                    WebRTC.getInstance().onStreamConfigurationChange(); \r\n                    WebRTC.getInstance().client = client;\r\n\r\n                    WebRTC.getInstance().updateMyPosition(position)\r\n                }, function(errorCode, errorText){\r\n                }\r\n            );\r\n               \r\n            return;\r\n        });\r\n\r\n    }\r\n    removeChild(peer, client) {\r\n        console.log('----------removeChild')\r\n        var container = document.getElementById('screen_' + peer);\r\n        var videoEl = peer.videoEl;   //it got video element\r\n        if (container && videoEl) {\r\n            container.removeChild(videoEl);   // my code is breaking here\r\n        }\r\n    }\r\n    sendMessage(message){\r\n        this.client.sendPeerMessage({room: this.roomName}, 'chat', message);\r\n    }\r\n    onSetScreenCapture(){\r\n        this.updateStreamMode();\r\n        const local = window.easyrtc.getLocalStream();\r\n        var _this = this\r\n        // navigator.mediaDevices.getUserMedia(this.currentContraintMode).then(\r\n        navigator.mediaDevices.getDisplayMedia({video:{width: 1920, height:1080, frameRate: 5}}).then(\r\n            async (stream)=>{\r\n                local.getTracks().forEach(track=>{track.stop()})\r\n\r\n                const audioStream = await navigator.mediaDevices.getUserMedia({audio:true});\r\n                stream.getVideoTracks()[0].onended = () => {\r\n                    this.toggleScreenShare(true)\r\n                    this.dispatch({type: 'click_screenshare', value: 'on'});\r\n                    this.dispatch({type:'user_media', value: { id: 'me', type: 'screenshare', status: 'on'}})\r\n                    document.getElementById('screenshare').src = '/static/media/screenshare-on.44d81ce8.svg'\r\n                }\r\n                \r\n                stream.addTrack(audioStream.getAudioTracks()[0]);\r\n                // replace local stream\r\n                stream.getTracks().forEach((track)=>{local.addTrack(track)})\r\n                WebRTC.getInstance().screenStream = stream;\r\n                const video_me = document.getElementById(local.id)\r\n                window.easyrtc.setVideoObjectSrc(video_me, stream)\r\n                // send it to remote\r\n                const peers = window.easyrtc.getPeerConnections()\r\n                for(const id in peers){\r\n                    const peer = peers[id]\r\n                    if(peer.cancelled)\r\n                        continue;\r\n                    peer.pc.getSenders().map((sender) => \r\n                        sender.replaceTrack(stream.getTracks().find(track=>{\r\n                            return track.kind === sender.track.kind\r\n                        })))\r\n                }\r\n            }\r\n        ).catch(function(err) {\r\n            //log to console first \r\n            console.log(err); /* handle the error */\r\n            if (err.name === \"NotFoundError\" || err.name === \"DevicesNotFoundError\") {\r\n                //required track is missing \r\n                console.log('NotFoundError, DevicesNotFoundError')\r\n            } else if (err.name === \"NotReadableError\" || err.name === \"TrackStartError\") {\r\n                //webcam or mic are already in use \r\n                console.log('NotReadableError, TrackStartError')\r\n            } else if (err.name === \"OverconstrainedError\" || err.name === \"ConstraintNotSatisfiedError\") {\r\n                //constraints can not be satisfied by avb. devices \r\n                console.log('OverconstrainedError, ConstraintNotSatisfiedError')\r\n            } else if (err.name === \"NotAllowedError\" || err.name === \"PermissionDeniedError\") {\r\n                //permission denied in browser \r\n                console.log('Send screen share message')\r\n                _this.toggleScreenShare(true)\r\n                _this.dispatch({type: 'click_screenshare', value: 'on'});\r\n                _this.dispatch({type:'user_media', value: { id: 'me', type: 'screenshare', status: 'on'}})\r\n                document.getElementById('screenshare').src = '/static/media/screenshare-on.44d81ce8.svg'\r\n            } else if (err.name === \"TypeError\" || err.name === \"TypeError\") {\r\n                //empty constraints object \r\n                console.log('TypeError')\r\n            } else {\r\n                //other errors \r\n                console.log(\"Error: \" + err.name);\r\n            }\r\n        });\r\n    }\r\n    updatePeerPosition(content){\r\n        WebRTC.getInstance().dispatch({type: 'user_position', value: {id: content.position.peerId, defPosX: content.position.x, defPosY: content.position.y} })\r\n    }\r\n    updateMyPosition( position ){\r\n        if(this.client){\r\n            if(!position)\r\n                position = this.myPosition;\r\n            this.myPosition = position;\r\n\r\n            this.client.sendPeerMessage({room: this.roomName}, 'set_peer_position', {id: this.client.getId(), position:this.myPosition});\r\n        }\r\n    }\r\n}\r\nexport default WebRTC;","import React from 'react';\r\nimport './index.css';\r\n\r\nconst Button = React.memo(props => {\r\n    const toggleStatus = () => {\r\n        if(props.onClick && props.status !== 'no')\r\n            props.onClick();\r\n    }\r\n    return (\r\n        <img id={props.id} data-v-2f32af68=\"\" className=\"stopvideo pointer has-tooltip\" src={props[props.status]} alt={props.alt} title={props.alt} onClick={ toggleStatus } />\r\n    );\r\n})\r\nexport default Button;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nimport youtube from '../../images/youtube1.svg'\r\n\r\nfunction VideoDialog(props){\r\n    const dispatch = useDispatch()\r\n    const [video, setVideo] = useState('');\r\n    const [valid, setValid] = useState(false);\r\n\r\n    const handleCancel = (event) => {\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n    const ytVidId = (url) => {\r\n        var p = /^(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\?(?=.*v=((\\w|-){11}))(?:\\S+)?$/;\r\n        return (url.match(p)) ? RegExp.$1 : false;\r\n    }\r\n    const getId = (url) => {\r\n        const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n        const match = url.match(regExp);\r\n\r\n        return (match && match[2].length === 11)\r\n        ? match[2]\r\n        : null;\r\n    }\r\n    const handleChange = (event) => {\r\n        var url = video.value;\r\n        if (ytVidId(url) !== false) {\r\n            setValid(true)\r\n        } else {\r\n            setValid(false)\r\n            var element = document.getElementsByClassName(\"input-text\");\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleSubmit = (event) => {\r\n        var elementInput = document.getElementsByClassName(\"input-text\");\r\n        elementInput[0].textContent = 'YouTube video link'\r\n        elementInput[0].className = elementInput[0].className.replace(/\\berror\\b/g, \"\");\r\n\r\n        const videoId = getId(video.value);\r\n\r\n        const videoWidth = 250\r\n        const videoHeight = 140\r\n        \r\n        const draggableBack = document.getElementsByClassName('react-transform-element')[0]\r\n        const posMe = Utils.getPositionFromTransformWithScale(draggableBack);\r\n        const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2 - videoWidth / 2 * posMe.scale) / posMe.scale\r\n        const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2 - videoHeight / 2 * posMe.scale) / posMe.scale\r\n\r\n        dispatch({type: 'youtube_add', value:{name: videoId, id: 'me', transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, username: props.uname, value: videoId, width: videoWidth, height: videoHeight, defX: calc_def_x, defY: calc_def_y}})\r\n        WebRTC.getInstance().youtubeAdd({videoId: videoId, name: videoId, transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, username: props.uname, width: videoWidth, height: videoHeight, defX: calc_def_x, defY: calc_def_y})\r\n\r\n        video.value = ''\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n\r\n    return (\r\n        <div data-v-6a2f6b36=\"\" data-v-6e496afa=\"\" id ='videodialog' aria-expanded=\"true\" data-modal=\"add-youtube\" className=\"add-youtube-modal v--modal-overlay customDlgPos\" >\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal videodialog\" >\r\n                    <img data-v-6a2f6b36 className=\"logo\" src={youtube} alt='youtube.svg' />\r\n                    <div data-v-6a2f6b36=\"\" className=\"input-text\">YouTube video link</div>\r\n                    <input data-v-6a2f6b36=\"\" type=\"text\" name='video' className=\"url\" ref={input => setVideo(input)} onChange={(e)=>handleChange(e)} />\r\n                    <div data-v-6a2f6b36=\"\" className=\"buttons\">\r\n                        <input data-v-6a2f6b36=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        <input data-v-6a2f6b36=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}\r\n                            disabled={valid ? false : true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default VideoDialog;","import React, { useState } from 'react';\r\nimport isImageUrl from 'is-image-url'\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nfunction ImageDialog(props){\r\n    const [imagePreviewUrl, setImagePreviewUrl] = useState(null)\r\n    const [uploadClick, setUploadClick] = useState(true)\r\n    const [fileName, setFileName] = useState('')\r\n    const dispatch = useDispatch()\r\n\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#imagedialog').plainModal('close')\r\n        setImagePreviewUrl(null)\r\n    }\r\n    const handleSubmit = (event) => {\r\n        const imageWidth = 230\r\n        const imageHeight = 130\r\n        \r\n        const draggableBack = document.getElementsByClassName('react-transform-element')[0]\r\n        const posMe = Utils.getPositionFromTransformWithScale(draggableBack);\r\n        const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2 - imageWidth / 2 * posMe.scale) / posMe.scale\r\n        const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2 - imageHeight / 2 * posMe.scale) / posMe.scale\r\n\r\n        dispatch({type: 'image_add', value:{name: fileName, id: 'me', username: props.uname, value: imagePreviewUrl, transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, width: imageWidth, height: imageHeight, defX: calc_def_x, defY: calc_def_y}})\r\n        WebRTC.getInstance().imageAdd({imageId: imagePreviewUrl, name: fileName, username: props.uname, transform: `translate(${calc_def_x}px, ${calc_def_y}px)`, width: imageWidth, height: imageHeight, defX: calc_def_x, defY: calc_def_y})\r\n\r\n        setImagePreviewUrl(null)\r\n        window.$('#imagedialog').plainModal('close')\r\n    }\r\n    const fileChangedHandler = (event) => {\r\n        let reader = new FileReader();\r\n        setFileName(event.target.files[0].name)\r\n        reader.onloadend = () => {\r\n            setImagePreviewUrl(reader.result)\r\n        }\r\n        reader.readAsDataURL(event.target.files[0])\r\n    }\r\n    const imageExists = (image_url) => {\r\n        var http = new XMLHttpRequest();\r\n        http.open('HEAD', image_url, false);\r\n        http.send();\r\n        return http.status !== 404;\r\n    }\r\n    const URLChangedHandler = (event) => {\r\n        var element = document.getElementsByClassName(\"label\");\r\n        if (isImageUrl(event.target.value) || imageExists(event.target.value)) {\r\n            element[0].className = element[0].className.replace(/\\berror\\b/g, \"\");\r\n            element[0].textContent = 'Image link'\r\n            setImagePreviewUrl(event.target.value)\r\n            setFileName(event.target.value)\r\n        }\r\n        else {\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleUpload = (event) => {\r\n        setUploadClick(true)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementLink[0].className = elementLink[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementUpload[0].className += \" active\";\r\n    }\r\n    const handleLink = (event) => {\r\n        setUploadClick(false)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementUpload[0].className = elementUpload[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementLink[0].className += \" active\";\r\n    }\r\n    const uploadComputer =\r\n        <div data-v-bd733764=\"\" className=\"upload-computer tab-active drop-zone\" data-id=\"upload1\" >\r\n            <div data-v-bd733764=\"\" className=\"bold\">Drag and drop, paste image here</div>\r\n            <div data-v-bd733764=\"\" className=\"gray\">or</div>\r\n            <input type=\"file\" name=\"file-4\" id=\"file-4\" className=\"inputfile\" onChange={(e)=>fileChangedHandler(e)} />\r\n            <label htmlFor=\"file-4\">BROWSE...</label>\r\n        </div>\r\n    const preview =\r\n        <div data-v-bd733764=\"\" className=\"preview\">\r\n            <img className=\"imgPreview\" src={imagePreviewUrl} height=\"200\" alt=\"preview...\" />\r\n        </div>\r\n    const linkURL =\r\n        <div data-v-bd733764=\"\" className=\"upload-link\">\r\n            <div data-v-bd733764=\"\" className=\"label\">Image link</div>\r\n            <input data-v-bd733764=\"\" type=\"text\" className=\"link\" onChange={(e)=>URLChangedHandler(e)} />\r\n        </div>\r\n    return (\r\n        <div data-v-bd733764=\"\" data-v-6e496afa=\"\" id ='imagedialog' aria-expanded=\"true\" data-modal=\"add-image\" className=\"add-image-modal v--modal-overlay customDlgPos\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal imagedialog\" >\r\n                    <div data-v-bd733764=\"\" className=\"header\">\r\n                        <button data-v-bd733764=\"\" data-id=\"upload1\" className=\"image_upload active\" onClick={(e)=>handleUpload(e)} >Upload</button>\r\n                        <button data-v-bd733764=\"\" data-id=\"upload2\" className=\"image_link\" onClick={(e)=>handleLink(e)} >URL</button>\r\n                    </div>\r\n                    {\r\n                        uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : uploadClick && !imagePreviewUrl\r\n                        ? uploadComputer\r\n                        : null\r\n                    }\r\n                    {\r\n                        !uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : !uploadClick && !imagePreviewUrl\r\n                        ? linkURL\r\n                        : null\r\n                    }\r\n                    <div data-v-bd733764=\"\" className=\"buttons\">\r\n                        <input data-v-bd733764=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        { imagePreviewUrl && <input data-v-bd733764=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}/>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default ImageDialog;","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport WebRTC from '../../webrtc';\r\nimport Button from '../button'\r\nimport Dialog from '../dialog';\r\nimport VideoDialog from '../dialog/videodlg';\r\nimport ImageDialog from '../dialog/imagedlg';\r\n\r\nimport userssvg from '../../images/users.svg'\r\nimport youtube from '../../images/youtube.svg'\r\nimport uploadimage from '../../images/uploadimage.svg'\r\nimport sharedscreen_on from '../../images/screenshare-on.svg'\r\nimport sharedscreen_off from '../../images/screenshare-off.svg'\r\nimport stopvideo0 from '../../images/stopvideo-0.svg'\r\nimport stopvideo1 from '../../images/stopvideo-1.svg'\r\nimport stopaudio0 from '../../images/stopaudio-0.svg'\r\nimport stopaudio1 from '../../images/stopaudio-1.svg'\r\nimport logosvg from '../../images/logo.svg'\r\nimport logosmallsvg from '../../images/logo-small.svg'\r\nimport support from '../../images/support.svg'\r\nimport close from '../../images/close.svg'\r\n\r\nimport './index.css';\r\n\r\nconst Navbar = React.memo(props => {\r\n    const dispatch = useDispatch()\r\n    const users = useSelector(state=>state.users);\r\n    const camera = useSelector(state => state.buttons.camera);\r\n    const mic = useSelector(state => state.buttons.mic);\r\n    const screenshare = useSelector(state => state.buttons.screenshare);\r\n\r\n    const toggleChange = (type1, value1)=>{\r\n        dispatch( {type: type1, value: value1 ==='on'?'off':'on'});\r\n        if(type1 === 'click_camera'){\r\n            dispatch({type:'user_media', value: { id: 'me', type: 'camera', status: value1 ==='on'?'off':'on'}})\r\n            WebRTC.getInstance().toggleCamera(value1==='off')\r\n        } else if ( type1 === 'click_mic') {\r\n            dispatch({type:'user_media', value: { id: 'me', type: 'mic', status: value1 ==='on'?'off':'on'}})\r\n            WebRTC.getInstance().toggleMic(value1==='off')\r\n        } else if ( type1 === 'click_screenshare') {\r\n            if(!document.getElementById('screen_me')) return;\r\n            dispatch({type:'user_media', value: { id: 'me', type: 'screenshare', status: value1 ==='on'?'off':'on'}})\r\n            WebRTC.getInstance().toggleScreenShare(value1==='off')\r\n        }\r\n    }\r\n    const handleClose = (event) => {\r\n        WebRTC.getInstance().closeClient('me')\r\n        window.location.href = '/room?space='+props.query.space;  \r\n    }\r\n    return (\r\n        <>\r\n            <div data-v-2db9ff64=\"\" className=\"app-header\" data-v-12a888fb=\"\">\r\n                <a data-v-2db9ff64=\"\" href=\"/\" target=\"_blank\">\r\n                    <img data-v-2db9ff64=\"\" className=\"logo\" src={logosvg} alt='logosvg' style={{display: 'none'}}/>\r\n                    <img data-v-2db9ff64=\"\" className=\"logo-small\" src={logosmallsvg} alt='logosmallsvg' style={{display: 'none'}}/>\r\n                </a>\r\n                <div data-v-2f32af68=\"\" className=\"controls\">\r\n                    <div data-v-2f32af68=\"\" className=\"controls-main\">\r\n                        <div data-v-261ef19f=\"\" data-v-2f32af68=\"\" className=\"members-container\">\r\n                            <div data-v-2f32af68=\"\" data-v-261ef19f=\"\" className=\"members cus-dropdown\">\r\n                                <img data-v-2f32af68=\"\" src={userssvg} alt='userssvg' />\r\n                                <span data-v-2f32af68=\"\" data-v-261ef19f=\"\">{users.length}</span>\r\n                                <div data-v-261ef19f=\"\" className=\"cus-dropdown-content\">\r\n                                    {\r\n                                        users.map((user) => user.id!=='me'?<span key={user.id}>{user.name}</span>:null)\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <Button on={youtube} off={youtube} no={youtube} alt='Youtube' status='on' onClick={()=>{ Dialog.show('videodialog') }} ></Button>\r\n                        <Button on={uploadimage} off={uploadimage} no={uploadimage} alt='Uploadimage' status='on' onClick={()=>{ Dialog.show('imagedialog')} }></Button>\r\n                        <Button on={sharedscreen_on} off={sharedscreen_off} no={sharedscreen_on} id='screenshare' alt='Screenshare' status={screenshare} onClick={()=>toggleChange('click_screenshare', screenshare)} ></Button>\r\n                        <Button on={stopvideo0} off={stopvideo1} no={stopvideo1} alt='Camera' status={camera} onClick={()=>toggleChange('click_camera', camera)}></Button>\r\n                        <Button on={stopaudio0} off={stopaudio1} no={stopaudio1} alt='Mic' status={mic} onClick={()=>toggleChange('click_mic', mic)}></Button>\r\n                    </div>\r\n                    <a data-v-2f32af68=\"\" href=\"mailto:support@spatial.chat\" className=\"support-link\">\r\n                        <img data-v-2f32af68=\"\" className=\"support has-tooltip\" src={support} alt='support' />\r\n                    </a>\r\n                    <img data-v-2f32af68=\"\" className=\"close pointer\" src={close} alt='close' onClick={(e)=>handleClose(e)} />\r\n                </div>\r\n            </div>\r\n            <VideoDialog uname={props.query.uname} />\r\n            <ImageDialog uname={props.query.uname} />\r\n        </>\r\n    );\r\n})\r\n\r\nexport default Navbar;","import React, { useEffect, useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Rnd } from \"react-rnd\";\r\n\r\nimport WebRTC from '../../webrtc';\r\nimport './index.css';\r\n\r\nimport Utils from '../../utils/position';\r\n\r\n// const currentDragObject = {obj:null, x:0, y:0, scale:1, dragStarted:false}\r\n\r\nconst Screen = React.memo(props => {\r\n    const screenid = 'screen_' + props.user.id\r\n    const smallScreenId = 'smallscreen_' + props.user.id\r\n    const nodeRef = React.useRef(null);\r\n    const dispatch = useDispatch()\r\n\r\n    const [firstPosX, setFirstPosX] = useState(0)\r\n    const [firstPosY, setFirstPosY] = useState(0)\r\n\r\n    useEffect(() => {\r\n        var video = document.getElementById(props.user.stream.id);\r\n\r\n        if (video) {\r\n            window.easyrtc.setVideoObjectSrc(video, props.user.stream);\r\n        }\r\n    }, []);\r\n\r\n    function validVolumeAndScaleForNeighborhood() {\r\n        var videoEles = document.getElementsByTagName('VIDEO')\r\n        const screenMePos = Utils.getPositionFromTransform(videoEles[0].parentElement.parentElement);\r\n\r\n        if (videoEles.length > 1) {\r\n            for (var i = 1; i < videoEles.length; i++) {\r\n                setVolumeAndScaleForNeighborhood(screenMePos, videoEles[i])\r\n            }\r\n        }\r\n    }\r\n\r\n    function setVolumeAndScaleForNeighborhood(screenMePos, videoEle) {\r\n        if (!videoEle) return\r\n\r\n        const screenCurrObjPos = Utils.getPositionFromTransform(videoEle.parentElement.parentElement);\r\n\r\n        const dist = Math.max(1, Math.sqrt((screenMePos.x - screenCurrObjPos.x) * (screenMePos.x - screenCurrObjPos.x) +\r\n            (screenMePos.y - screenCurrObjPos.y) * (screenMePos.y - screenCurrObjPos.y)))\r\n        const scale_val = Math.max(0.3, Math.min(1, 150 / (dist)))\r\n\r\n        console.log('-----------------', videoEle, videoEle.parentElement.parentElement)\r\n        if (videoEle.parentElement.parentElement.className === 'App') return\r\n        videoEle.parentElement.parentElement.style.transform = `translate(${screenCurrObjPos.x}px, ${screenCurrObjPos.y}px) scale(${scale_val})`\r\n\r\n        var vol = dist === 0 ? 1 : Math.max(0, Math.min(1, Math.pow((100 / dist), 3)))\r\n        if (vol < 0.01) vol = 0\r\n\r\n        videoEle.volume = isFinite(vol) ? vol : 1;\r\n    }\r\n    \r\n    const handleDragStart = (e, detail) => {\r\n        window.dragStart = true\r\n\r\n        dispatch({ type: 'backgound_moving', value: true })\r\n        setFirstPosX(detail.x)\r\n        setFirstPosY(detail.y)\r\n    }\r\n    const handleDrag = (e, detail) => {\r\n        var videoEles = document.getElementsByTagName('VIDEO')\r\n        const screenMePos = { x: detail.x, y: detail.y }\r\n        if (videoEles.length > 1) {\r\n            for (var i = 1; i < videoEles.length; i++) {\r\n                setVolumeAndScaleForNeighborhood(screenMePos, videoEles[i], false)\r\n            }\r\n        }\r\n    }\r\n    const handleDragStop = (e, detail) => {\r\n        window.dragStart = false\r\n\r\n        dispatch({ type: 'backgound_moving', value: false })\r\n        WebRTC.getInstance().myPosition.x += (detail.x - firstPosX)\r\n        WebRTC.getInstance().myPosition.y += (detail.y - firstPosY)\r\n        WebRTC.getInstance().updateMyPosition()\r\n    }\r\n    function calculateEdge(posX, posY) {\r\n        if (posX >= Utils.width() - 80 - 10)\r\n            posX = Utils.width() - 80 - 10\r\n        if (posX < 10)\r\n            posX = 10\r\n        if (posY >= Utils.height() - 80 - 10)\r\n            posY = Utils.height() - 80 - 10\r\n        if (posY < 30) // 22 is close header height\r\n            posY = 30\r\n\r\n        return {x: posX, y: posY}\r\n    }\r\n\r\n    if (nodeRef.current && props.user.id != 'me') {\r\n        var { x, y } = calculateEdge(props.user.defPosX, props.user.defPosY, 80, 80)\r\n        nodeRef.current.parentNode.style.transform = `translate(${x}px, ${y}px)`\r\n        validVolumeAndScaleForNeighborhood()\r\n    }\r\n\r\n    useEffect(() => {\r\n        validVolumeAndScaleForNeighborhood()\r\n    }, [props.curScale])\r\n\r\n    return (\r\n        <>\r\n            <Rnd\r\n                noderef={nodeRef}\r\n                default={{ x: props.user.defPosX, y: props.user.defPosY }}\r\n                onDragStart={(e, d) => { handleDragStart(e, d) }}\r\n                onDrag={(e, d) => { handleDrag(e, d) }}\r\n                onDragStop={(e, d) => {\r\n                    calculateEdge(d.x, d.y)\r\n                    handleDragStop(e, d)\r\n                }}\r\n                scale={props.curScale}\r\n                style={{ zIndex: props.user.id === 'me' ? 50 : 25 }}\r\n                lockAspectRatio={true}\r\n                enableResizing={false}\r\n                disableDragging={props.user.id != 'me' ? true : false}\r\n            >\r\n                <div ref={nodeRef} id={screenid} data-tip data-for={props.user.id} key={props.user.id} className='screen'\r\n                    style={{\r\n                        width: 80, height: 80, borderRadius: '50%', marginLeft: -40, marginTop: -40,\r\n                        border: props.user.id === 'me' ? '2px solid #dcdb53' : '2px solid'\r\n                    }}\r\n                    tabIndex={0}  >\r\n                    <video\r\n                        className='video'\r\n                        id={props.user.stream.id}\r\n                        controls=\"\" loop=\"\" muted={'me' === props.user.id}\r\n                        onMouseMove={\r\n                            (e) => {\r\n                                const ele = document.getElementById('div_tip')\r\n                                ele.style.left = e.screenX + 'px'\r\n                                ele.style.top = (e.screenY - 150) + 'px'\r\n                                ele.innerHTML = props.user.name\r\n                                ele.style.display = 'inline-block'\r\n                            }\r\n                        }\r\n                        onMouseOut={\r\n                            (e) => {\r\n                                document.getElementById('div_tip').style.display = 'none'\r\n                            }\r\n                        }\r\n                    >\r\n                    </video>\r\n                </div>\r\n            </Rnd>\r\n\r\n        </>\r\n    );\r\n})\r\n\r\nexport default Screen;","import React, { useEffect, useState, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport YouTube from 'react-youtube';\r\nimport { Rnd } from \"react-rnd\";\r\n\r\nimport './index.css';\r\nimport MicMute0 from '../../images/mic-mute.svg'\r\nimport MicMute1 from '../../images/mic-mute1.svg'\r\nimport closevideo from '../../images/closevideo.svg'\r\nimport WebRTC from '../../webrtc';\r\n\r\nimport Utils from '../../utils/position';\r\n\r\nconst YoutubeUpload = React.memo(props => {\r\n    const nodeRef = React.useRef(null);\r\n    const videoRef = useRef(null);\r\n    const [youtubeMute, setYoutubeMute] = useState('off')\r\n    const dispatch = useDispatch();\r\n\r\n    const youtubeMuteAudio = 'youtubeAudio_'+props.video.value \r\n    const videoid = 'video_'+props.video.value \r\n\r\n    var realCurTime\r\n\r\n    useEffect(() => {\r\n        setTimeout(onTimer, 500);\r\n    },[]);\r\n    const getDistanceByPosition = (p1, p2)=>{\r\n        return Math.sqrt((p1.x-p2.x)*(p1.x-p2.x) + (p1.y-p2.y)*(p1.y-p2.y))\r\n    }\r\n    const getDistanceByRectAndPosition = (rect, pos)=>{\r\n        let distance = -1;\r\n        if(pos.x > rect.left && pos.x < rect.right){\r\n            distance = Math.min(Math.abs(pos.y-rect.top), Math.abs(pos.y-rect.bottom))\r\n        }\r\n        if(pos.y > rect.top && pos.y < rect.bottom){\r\n            if (distance === -1)\r\n                distance = Math.min(Math.abs(pos.x-rect.left), Math.abs(pos.x-rect.right))\r\n            else\r\n                distance = 0;\r\n        }\r\n        if(distance >=0 )\r\n            return distance;\r\n        return Math.min(Math.min(getDistanceByPosition(pos, {x:rect.left,y:rect.top}), getDistanceByPosition(pos, {x:rect.left,y:rect.bottom})),\r\n                        Math.min(getDistanceByPosition(pos, {x:rect.right,y:rect.top}), getDistanceByPosition(pos, {x:rect.right,y:rect.bottom})))\r\n\r\n    }\r\n    function onTimer(){\r\n        const me_ele = document.getElementById('screen_me')\r\n        const ele = document.getElementById('video_' + props.video.value)\r\n\r\n        if(me_ele && ele){\r\n            const screenMePos = Utils.getPositionFromTransform(me_ele.parentElement);\r\n            const videoPos = Utils.getPositionFromTransform(ele.parentNode);\r\n\r\n            const width = ele.parentNode.clientWidth\r\n            const height = ele.parentNode.clientHeight\r\n\r\n            const dist = getDistanceByRectAndPosition({left: videoPos.x, \r\n                                                       right: videoPos.x + width, \r\n                                                       top: videoPos.y,\r\n                                                       bottom: videoPos.y + height}, \r\n                                                       screenMePos)\r\n            var vol = dist===0?1:Math.max(0, Math.min(1, Math.pow((100 / dist), 4)))\r\n            if (vol < 0.01) vol = 0\r\n            \r\n            // console.log(\"distance: \", dist, screenMePos, videoPosArr, width, height, vol* 100 * (ele.muted==='on' || ele.muted===undefined? 1: 0))\r\n            if (videoRef && videoRef.current) {\r\n                videoRef.current.internalPlayer.setVolume(vol* 100 * (ele.muted==='on' || ele.muted===undefined? 1: 0));\r\n            }\r\n        }\r\n        \r\n        setTimeout(onTimer, 1000)\r\n    }\r\n    const handleClose = (value) => {\r\n        dispatch({type: 'youtube_remove', name: value})\r\n        WebRTC.getInstance().youtubeRemove({name: value})\r\n    }\r\n    const handleDragStart = (e, detail) => {\r\n        dispatch({type: 'backgound_moving', value: true })\r\n    }\r\n    const handleDragStop = (x, y, width, height) => {\r\n        dispatch({type: 'backgound_moving', value: false })\r\n\r\n        WebRTC.getInstance().youtubePosition({transform: nodeRef.current.parentNode.style.transform, name: props.video.name, width: width, height: height, defX: x, defY: y})\r\n        dispatch({type: 'youtube_position', value: { transform: nodeRef.current.parentNode.style.transform, name: props.video.name, width: width, height: height, defX: x, defY: y } })\r\n    }\r\n    const handleStateChange = () => {        \r\n        realCurTime = videoRef.current.internalPlayer.getCurrentTime()\r\n    }\r\n    const handleYouTubePause = (event) => {\r\n        realCurTime.then(function(result) {\r\n            realCurTime = result\r\n            dispatch({type: 'youtube_play', value: { name: props.video.name, videoplay: false, curtime: realCurTime } })\r\n            WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: false, curtime: realCurTime, videoplaying: false })\r\n        })\r\n    }\r\n    const handleYouTubePlay = (event) => {\r\n        realCurTime.then(function(result) {\r\n            realCurTime = result\r\n            dispatch({type: 'youtube_play', value: { name: props.video.name, videoplay: true, curtime: realCurTime } })\r\n            WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: true })\r\n        })\r\n    }\r\n    const toggleChange = (event)=>{\r\n        const ele = document.getElementById('video_' + props.video.value)\r\n\r\n        if (youtubeMute === 'on') {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute0\r\n                setYoutubeMute('off')\r\n                ele.muted = 'on'\r\n            }\r\n        }\r\n        else {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute1\r\n                ele.muted = 'off'\r\n                setYoutubeMute('on')\r\n            }\r\n        }\r\n    }\r\n    function calculateEdge(posX, posY, vdoWidth, vdoHeight) {\r\n        if (posX >= Utils.width() - vdoWidth - 10)\r\n            posX = Utils.width() - vdoWidth - 10\r\n        if (posX < 10)\r\n            posX = 10\r\n        if (posY >= Utils.height() - vdoHeight - 10)\r\n            posY = Utils.height() - vdoHeight - 10\r\n        if (posY < 30) // 22 is close header height\r\n            posY = 30\r\n\r\n        return {x: posX, y: posY}\r\n    }\r\n    if (props.video.id != 'me' && videoRef.current) {\r\n        if (props.video.videoplay && props.video.videoplaying) {\r\n            videoRef.current.internalPlayer.unMute()\r\n\r\n            dispatch({type: 'youtube_play', value: { name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: false } })\r\n            WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: false })\r\n            videoRef.current.internalPlayer.seekTo(props.video.curtime)\r\n            videoRef.current.internalPlayer.playVideo()\r\n        } else if (!props.video.videoplay && !props.video.videoplaying){\r\n            videoRef.current.internalPlayer.pauseVideo()\r\n        }\r\n    }\r\n    if (nodeRef.current && !props.video.transform && props.video.defX) {\r\n        nodeRef.current.parentNode.style.transform = `translate(${props.video.defX}px, ${props.video.defY}px)`\r\n    }\r\n    if (nodeRef.current && props.video.transform) {\r\n        nodeRef.current.parentNode.style.width = props.video.width + 'px';\r\n        nodeRef.current.parentNode.style.height = props.video.height + 'px';\r\n\r\n        var string = props.video.transform \r\n        var numbers = string.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n        var { x, y } = calculateEdge(numbers[0], numbers[1], props.video.width, props.video.height)\r\n        nodeRef.current.parentNode.style.transform = `translate(${x}px, ${y}px)`\r\n\r\n        props.video.defX = x\r\n        props.video.defY = y\r\n    }\r\n\r\n    console.log(props.video)\r\n    const opts = {\r\n        origin: 'https://webrtc.bcisummit.com',\r\n        playerVars: {\r\n            autoplay:0,\r\n            muted:0\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Rnd\r\n            noderef={nodeRef}\r\n            size={{ width: props.video.width,  height: props.video.height }}\r\n            position={{ x: props.video.defX, y: props.video.defY }}\r\n            scale={props.curScale}   \r\n            lockAspectRatio={true}\r\n            style = {{zIndex: props.video.id==='me'?10:5}}\r\n            disableDragging={props.video.id==='me' ? false: true}\r\n            enableResizing={{ top:false, right:false, bottom:false, left:false, \r\n                topRight:props.video.id==='me' ? true : false, \r\n                bottomRight:props.video.id==='me' ? true : false, \r\n                bottomLeft:props.video.id==='me' ? true : false, \r\n                topLeft:props.video.id==='me' ? true : false }}\r\n            onDragStart={(e, d) => {handleDragStart(e, d)}}\r\n            onDragStop={(e, d) => { \r\n                const posArr = calculateEdge(d.x, d.y, props.video.width, props.video.height)\r\n                handleDragStop(posArr.x, posArr.y, props.video.width, props.video.height)\r\n            }}\r\n            onResizeStop={(e, direction, refval, delta, position) => {\r\n                var resizeWidth = parseInt(refval.style.width.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                var resizeHeight = parseInt(refval.style.height.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                handleDragStop(props.video.defX, props.video.defY, resizeWidth, resizeHeight)\r\n            }}\r\n        >\r\n            <div data-v-c1f79ed4=\"\" data-v-6e496afa=\"\" data-v-7e3fe256=\"\" ref={nodeRef} key={props.video.id} id={videoid}\r\n                className=\"youtube-el\" style={{width:'100%'}} style={{ zIndex: props.video.id==='me'?10:5 }}>\r\n                <div data-v-a995c326=\"\" data-v-c1f79ed4=\"\" className=\"header pointer hidden\" >\r\n                    <div data-v-a995c326=\"\" className=\"title\" >Pinned by {props.video.username}</div>\r\n                    {props.video.id==='me' &&\r\n                        <div onClick={() => handleClose(props.video.name)} >\r\n                            <img data-v-6a2f6b36 className=\"close\" src={closevideo} alt='closevideo.svg' />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <div data-v-c1f79ed4=\"\" className={`player ${props.video.id==='me'?null:'pointer-events-none'}`} >\r\n                    <YouTube\r\n                        ref={videoRef}\r\n                        videoId={props.video.value}\r\n                        id={videoid}\r\n                        opts={opts}\r\n                        onPlay={props.video.id==='me'?(e)=>handleYouTubePlay(e): null}\r\n                        onPause={props.video.id==='me'?(e)=>handleYouTubePause(e):null}\r\n                        onStateChange={(e)=>handleStateChange(e)}\r\n                    />\r\n                </div>\r\n                { props.video.id==='me' ? null :\r\n                    <img data-v-c1f79ed4=\"\" id={youtubeMuteAudio} svg-inline=\"\" src={MicMute0} className=\"mute\" \r\n                        onClick={(e)=>toggleChange(e)} alt=\"youtubeAudio\"></img>\r\n                }\r\n            </div>\r\n        </Rnd>\r\n    );\r\n})\r\nexport default YoutubeUpload;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Rnd } from \"react-rnd\";\r\n\r\nimport './index.css';\r\nimport closeimage from '../../images/closevideo.svg'\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nconst ImageUpload = React.memo((props) => {\r\n    const nodeRef = React.useRef(null);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleClose = (value) => {\r\n        dispatch({type: 'image_remove', name: value})\r\n        WebRTC.getInstance().imageRemove({name: value})\r\n    }\r\n    const handleDragStart = (e, detail) => {\r\n        dispatch({type: 'backgound_moving', value: true })\r\n    }\r\n    const handleDragStop = (x, y, width, height) => {\r\n        dispatch({type: 'backgound_moving', value: false })\r\n\r\n        WebRTC.getInstance().imagePosition({transform: nodeRef.current.parentNode.style.transform, name: props.image.name, width: width, height: height, defX: x, defY: y})\r\n        dispatch({type: 'image_position', value: { transform: nodeRef.current.parentNode.style.transform, name: props.image.name, width: width, height: height, defX: x, defY: y } })\r\n    }\r\n    function calculateEdge(posX, posY, imgWidth, imgHeight) {\r\n        if (posX >= Utils.width() - imgWidth - 10)\r\n            posX = Utils.width() - imgWidth - 10\r\n        if (posX < 10)\r\n            posX = 10\r\n        if (posY >= Utils.height() - imgHeight - 10)\r\n            posY = Utils.height() - imgHeight - 10\r\n        if (posY < 30) // 22 is close header height\r\n            posY = 30\r\n\r\n        return {x: posX, y: posY}\r\n    }\r\n    if (nodeRef.current && props.image.transform) {\r\n        nodeRef.current.parentNode.style.width = props.image.width + 'px';\r\n        nodeRef.current.parentNode.style.height = props.image.height + 'px';\r\n        \r\n        var string = props.image.transform \r\n        var numbers = string.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n        var { x, y } = calculateEdge(numbers[0], numbers[1], props.image.width, props.image.height)\r\n        nodeRef.current.parentNode.style.transform = `translate(${x}px, ${y}px)`\r\n        props.image.defX = x\r\n        props.image.defY = y\r\n    }\r\n\r\n    if (nodeRef.current && !props.image.transform && props.image.defX) {\r\n        nodeRef.current.parentNode.style.transform = `translate(${props.image.defX}px, ${props.image.defY}px)`\r\n    }\r\n\r\n    return (\r\n        <Rnd\r\n            noderef={nodeRef}\r\n            size={{ width: props.image.width,  height: props.image.height }}\r\n            position={{ x: props.image.defX, y: props.image.defY }}\r\n            scale={props.curScale}   \r\n            lockAspectRatio={true}\r\n            enableResizing={{ top:false, right:false, bottom:false, left:false, \r\n                topRight:props.image.id==='me' ? true : false, \r\n                bottomRight:props.image.id==='me' ? true : false, \r\n                bottomLeft:props.image.id==='me' ? true : false, \r\n                topLeft:props.image.id==='me' ? true : false }}\r\n            disableDragging={props.image.id==='me' ? false: true}\r\n            style = {{zIndex: props.image.id==='me'?10:5}}\r\n            onDragStart={(e, d) => {handleDragStart(e, d)}}\r\n            onDragStop={(e, d) => { \r\n                const posArr = calculateEdge(d.x, d.y, props.image.width, props.image.height)\r\n                handleDragStop(posArr.x, posArr.y, props.image.width, props.image.height)\r\n            }}\r\n            onResizeStop={(e, direction, refval, delta, position) => {\r\n                var resizeWidth = parseInt(refval.style.width.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                var resizeHeight = parseInt(refval.style.height.match(/\\d+/)[0]) // after resizing, remove 'px' string\r\n                handleDragStop(props.image.defX, props.image.defY, resizeWidth, resizeHeight)\r\n            }}\r\n        >\r\n            <div ref={nodeRef} key={props.image.id} >\r\n                <div className=\"cus_header pointer hidden\">\r\n                    <div className=\"cus_title\">Pinned by {props.image.username}</div>\r\n                    {props.image.id==='me' &&\r\n                        <div onClick={() => handleClose(props.image.name)} className=\"cus_close\" >\r\n                            <img data-v-6a2f6b36 src={closeimage} alt='closevideo.svg' />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <img src={props.image.value} className=\"image-frame\" alt=\"map-transparent\" />\r\n            </div>\r\n        </Rnd>\r\n    );\r\n})\r\nexport default ImageUpload;","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n\r\nimport Utils from '../../utils/position';\r\n\r\nexport default function Tip(props){\r\n    return (\r\n        <div id='div_tip' style={{position: 'absolute', zIndex: 100, display: 'none', fontSize: '16px', backgroundColor: '#5494a6', borderRadius: 10, padding: '10px'}}>\r\n        </div>\r\n    );\r\n}","import React, { Component, useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch} from 'react-redux';\r\nimport { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport * as qs from 'query-string'\r\n\r\nimport Navbar from '../components/navbar';\r\nimport WebRTC from '../webrtc';\r\nimport Screen from '../components/screen';\r\nimport YoutubeUpload from '../components/youtubeupload';\r\nimport ImageUpload from '../components/imageupload';\r\nimport Tip from '../components/tip';\r\n\r\nimport img_small from '../images/map-small@2x.0c2a372b.png';\r\nimport img_big from '../images/map-big@2x.44a3f15c.png';\r\n\r\nimport './index.css';\r\nimport Utils from \"../utils/position\";\r\n\r\nfunction Conference(props) {\r\n    useEffect(()=>{\r\n        WebRTC.getInstance().startConference(dispatch, null, query.space, query.uname, 2);\r\n    },[])\r\n    \r\n    const dispatch = useDispatch()\r\n    const query = qs.parse(props.location.search);\r\n    const users = useSelector(state=>state.users);\r\n    const videoObj = useSelector(state=>state.screens.videos);\r\n    const imageObj = useSelector(state=>state.screens.images);\r\n    const bgMoving = useSelector(state=>state.screens.bgMoving);\r\n    const [userClose, setUserClose] = useState(false);\r\n    const [wheelScale, setWheelScale] = useState(1);\r\n    \r\n    const handleSetUserClose = (value) => {\r\n        setUserClose(value)\r\n    }\r\n    const handleWheel = (e) => {\r\n        setWheelScale(e.scale)\r\n        validSmallScreens()\r\n    }\r\n    const handlePanning = (e) => {\r\n        validSmallScreens()\r\n    }\r\n    function validSmallScreens () {\r\n        var videoEles = document.getElementsByClassName('screen')\r\n        console.log('videoEles----------', videoEles)\r\n        if (videoEles) {\r\n            for (var i = 0; i < videoEles.length; i++) {\r\n                setScaleByPosition(videoEles[i])\r\n            }\r\n        }\r\n    }\r\n    const setScaleByPosition = (videoEle) => {\r\n        const draggableBack = document.getElementsByClassName('react-transform-element')[0]\r\n        const posBack = Utils.getPositionFromTransformWithScale(draggableBack);\r\n        const viewRect = {\r\n            left: -posBack.x / posBack.scale,\r\n            top: -posBack.y / posBack.scale,\r\n            right: (-posBack.x + Utils.width()) / posBack.scale,\r\n            bottom: (-posBack.y + Utils.height()) / posBack.scale\r\n        }\r\n        const screenMePos = Utils.getPositionFromTransform(videoEle.parentElement);\r\n\r\n        var inRect = Utils.isInRect(viewRect, screenMePos)\r\n        console.log(inRect)\r\n\r\n        const smallScreen = 'smallscreen_' + videoEle.getAttribute('data-for')\r\n        const d = document.getElementById(smallScreen)\r\n        if (d) {\r\n            if (!inRect) {\r\n                videoEle.style.display = 'none'\r\n                d.style.display = 'inline-block';\r\n\r\n                if (videoEle.firstChild)\r\n                    d.appendChild(videoEle.firstChild)\r\n\r\n                const smallPos = getDistanceByRectAndPosition( screenMePos, viewRect, posBack.scale)\r\n                Utils.setPositionOfHtmlElement(d, smallPos);\r\n            } else {\r\n                d.style.display = 'none'\r\n                videoEle.style.display = 'inline-block';\r\n                if (d.firstChild)\r\n                    videoEle.appendChild(d.firstChild);\r\n            }\r\n        }\r\n    }\r\n\r\n    const getDistanceByRectAndPosition = (posMe, viewRect, scale) => {\r\n        const pos = Utils.multiplyPosition(Utils.addPosition(posMe, {x: -viewRect.left, y: -viewRect.top}), scale)\r\n        if (pos.x < 0) pos.x = 20\r\n        if (pos.x > Utils.width()) pos.x = Utils.width()-20\r\n        if (pos.y < 0) pos.y = 20\r\n        if (pos.y > Utils.height()) pos.y = Utils.height()-20\r\n        return pos\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div id='foreground_div' style={{backgroundImage: `url(${img_small})`}}>\r\n                <Navbar onSetUserClose={handleSetUserClose} videoObj={videoObj} imageObj={imageObj} query={query} /> \r\n                <TransformWrapper\r\n                    enablePadding={false}\r\n                    enablePanPadding={false}\r\n                    scalePadding={{ disabled: true}}\r\n                    options={{ disabled: bgMoving, minScale: 1, maxScale: 4}}\r\n                    wheel={{ step: 200 }}\r\n                    pan={{ paddingSize: 0, padding: true}}\r\n                    onWheel={(e)=>{handleWheel(e)}}\r\n                    onPanning={(e)=>{handlePanning(e)}}\r\n                    doubleClick={{ disabled: true}}\r\n                >\r\n                    <TransformComponent>\r\n                        <div id={'background_div'} style={{backgroundImage: `url(${img_big})`, height: '100vh', width: '100vw'}}>\r\n                            {\r\n                                users.map((user) =>  <Screen key={user.id} curScale={wheelScale} user={user} />)\r\n                            }\r\n                            {\r\n                                videoObj.map((video) => <YoutubeUpload key={video.name} video={video} curScale={wheelScale} userClose={userClose} room={query.space} />)\r\n                            }\r\n                            {\r\n                                imageObj.map((image) => <ImageUpload key={image.value} image={image} curScale={wheelScale} userClose={userClose} room={query.space} />)\r\n                            }\r\n                            \r\n                        </div>                    \r\n                    </TransformComponent>\r\n                </TransformWrapper>\r\n            </div>\r\n            {\r\n                users.map((user) => {\r\n                    return (\r\n                        <div id={'smallscreen_' + user.id} className='screen_small' key={user.id}\r\n                            style={{width: 40, height: 40, borderRadius: '50%', position: 'absolute', left: 0, top: 0, display: 'none', \r\n                                    zIndex: user.id==='me'?50:25, border: user.id==='me'?'2px solid #dcdb53':'2px solid',\r\n                                    transform:'translate(-20px,-20px)' }} >\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n            <Tip />\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default Conference\r\n","import React, { useState } from \"react\";\r\nimport ReactSpinner from 'react-spinkit'\r\n// import {Redirect} from 'react-router-dom';\r\nimport * as qs from 'query-string'\r\n\r\nimport WebRTC from '../webrtc';\r\nimport Utils from '../utils/position'\r\nimport logosvg from '../images/logo.svg'\r\nimport logosmallsvg from '../images/logo-small.svg'\r\nimport joinbtn from '../images/joinbtn.svg'\r\nimport Footer from '../components/footer';\r\nimport './index.css';\r\n\r\nfunction Room(props) {\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const query = qs.parse(props.location.search);\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n\r\n        const { value } = event.target;\r\n        if (value.length > 0) {\r\n            setIsVerified(true);\r\n            setUserName(value);\r\n        }\r\n        else\r\n            setIsVerified(false);\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n        \r\n        window.localStorage.setItem('o', true)\r\n        window.localStorage.setItem('t', 'video-meeting')\r\n        window.localStorage.setItem('r', query.space)\r\n        window.localStorage.setItem('r', 'tryme')\r\n        window.localStorage.setItem('userName', userName)\r\n\r\n        setTimeout(()=>{\r\n            props.history.push('/conference?space='+query.space+'&uname='+userName);\r\n            // props.history.push('/home/conference');\r\n            // <Redirect to=\"/conference/\" />\r\n            // this.context.router.push('child')\r\n        }, 2500);\r\n    }\r\n    \r\n    return (\r\n    <div data-v-12a888fb=\"\" className=\"space\">\r\n        <div data-v-2db9ff64=\"\" style={{ position: 'absolute', right: '10%', top: '5%'}} data-v-12a888fb=\"\">\r\n            <div data-v-2f32af68=\"\" >\r\n                {query.space}\r\n            </div>\r\n        </div>\r\n        <div data-v-a74c9690=\"\" data-v-12a888fb=\"\" className=\"entrance ent-div\">\r\n            <form data-v-a74c9690=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)}>\r\n                <input data-v-a74c9690=\"\" type=\"text\" placeholder=\"Your Name\" className=\"name\" onChange={(e)=>handleChange(e)}/>\r\n                <button data-v-a74c9690=\"\" type=\"submit\" disabled={!isVerified} className=\"pointer\">\r\n                    {sendingEmail\r\n                    ? <ReactSpinner name='three-bounce' />\r\n                    : <img src={joinbtn} alt='joinbtn' />\r\n                    }\r\n                </button>\r\n            </form>\r\n        </div>\r\n        <Footer />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Room;\r\n","import React from 'react'\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute\r\n} from 'react-router-dom'\r\nimport './App.css'\r\nimport Home from './views/home'\r\nimport Conference from './views/conference'\r\nimport Room from './views/room'\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Home}></Route>\r\n\t\t\t\t\t<Route path=\"/room\" component={Room}></Route>\r\n\t\t\t\t\t<Route path=\"/conference\" component={Conference}></Route>\r\n\t\t\t\t\t<Route path=\"/\" component={Home}></Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport rootReducer from './reducers';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nconst store = createStore (\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/closevideo.7b864b90.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube.43fef7ea.svg\";","module.exports = __webpack_public_path__ + \"static/media/uploadimage.a7edbc9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.da4bdda8.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-small.e1cf996c.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-on.44d81ce8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-1.e529fa66.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-1.7268da01.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute.9a8a5f6e.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e50007f4.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.c4f7f08f.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube1.3933bad6.svg\";","module.exports = __webpack_public_path__ + \"static/media/users.78454788.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-off.341a9dd8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-0.34d55c9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-0.e55d1c5b.svg\";","module.exports = __webpack_public_path__ + \"static/media/support.dc413a12.svg\";","module.exports = __webpack_public_path__ + \"static/media/close.81170d04.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute1.c0d28aa1.svg\";","module.exports = __webpack_public_path__ + \"static/media/map-small@2x.0c2a372b.0c2a372b.png\";","module.exports = __webpack_public_path__ + \"static/media/map-big@2x.44a3f15c.9880d0f9.png\";","module.exports = __webpack_public_path__ + \"static/media/joinbtn.d5e1ecf0.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-mark.8e118226.svg\";"],"sourceRoot":""}