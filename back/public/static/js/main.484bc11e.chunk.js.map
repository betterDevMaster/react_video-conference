{"version":3,"sources":["../node_modules/peerjs/dist sync","reducers/buttons.js","reducers/users.js","reducers/chats.js","reducers/screen.js","reducers/index.js","components/dialog/index.js","components/dialog/Spinner.js","components/dialog/roomdlg.js","config.js","components/footer/index.js","views/home.js","webrtc/index.js","components/button/index.js","utils/position.js","components/dialog/videodlg.js","components/dialog/imagedlg.js","components/navbar/index.js","components/draggable/DragBox/index.js","RTCMulti/index.js","components/screen/index.js","components/youtubeupload/index.js","components/imageupload/index.js","components/draggable/DragContainer/index.js","components/screenshare/index.js","views/conference.js","views/room.js","App.js","index.js","images/closevideo.svg","images/youtube.svg","images/uploadimage.svg","images/logo.svg","images/logo-small.svg","images/screenshare-off.svg","images/stopvideo-1.svg","images/stopaudio-1.svg","images/mic-mute.svg","images/success.svg","images/error.svg","images/youtube1.svg","images/users.svg","images/screenshare-on.svg","images/stopvideo-0.svg","images/stopaudio-0.svg","images/support.svg","images/close.svg","images/mic-mute1.svg","images/map-small@2x.0c2a372b.png","images/map-big@2x.44a3f15c.png","images/joinbtn.svg","images/logo-mark.svg"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","buttons","state","chat","camera","fullscreen","mic","screenshare","action","type","value","users","find","user","console","log","media","filter","map","status","chats","setTimeout","messages","document","getElementsByClassName","length","scrollIntoView","behavior","key","screens","bgMoving","videos","images","screenshares","peer","new_videos","remove_videos","x","name","video","peerId","moved_videos","play_videos","new_images","img","remove_images","moved_images","image","changed_screenshares","userid","moved_screenshares","remove_screenshares","rootReducer","combineReducers","Dialog","window","$","plainModal","props","className","spinning","icon","faSync","size","RoomDialog","useState","isVerified","sendingEmail","setSendingEmail","mailStatus","setMailStatus","email","setEmail","space","setSpace","form","setForm","errors","setErrors","validEmailRegex","RegExp","handleChange","event","preventDefault","target","test","handleCancel","useEffect","content1","data-v-9deb956c","onSubmit","fetch","method","headers","aCcePt","body","JSON","stringify","then","res","json","data","reset","catch","err","ref","noValidate","input","onChange","onClick","disabled","count","Object","values","forEach","val","countErrors","Spinner","content2","src","successsvg","alt","content3","errorsvg","style","color","data-v-5c9875d0","aria-expanded","data-modal","role","aria-modal","Footer","React","memo","data-v-3de1367d","href","rel","Home","show","WebRTC","client","roomName","userName","myPosition","y","youtubes","enableScreenShare","enableCamera","enableMic","screenStream","width","height","videoQualities","text","frameRate","currentVideoQuality","this","audioQualities","sampleSize","channelCount","currentAudioQuality","_instance","Login","_browserCompatCheck","username","localStorage","getItem","setItem","generateRoomName","token","location","getUserName","localstream","audioContext","AudioContext","mediaStreamSource","createMediaStreamSource","processor","createScriptProcessor","connect","destination","onaudioprocess","evt","buffer","inputBuffer","numberOfChannels","inputData","getChannelData","inputDataLength","total","i","Math","abs","rms","sqrt","easyrtc","sendPeerMessage","targetRoom","getInstance","enable","onStreamConfigurationChange","room","push","defX","defY","youtube","videoplay","videoplaying","curtime","rec","cusId","dispatch","disconnect","peerName","fileInput","one","file","files","pow","alert","reader","FileReader","onload","txData","binaryContents","result","align","time","Date","now","sendDataWS","readAsDataURL","click","mode","audio","currentVideoDevice","deviceId","currentAudioDevice","currentContraintMode","updateStreamMode","local","getLocalStream","navigator","mediaDevices","getUserMedia","stream","getTracks","track","addTrack","video_me","getElementById","setVideoObjectSrc","enableMicrophone","peers","getPeerConnections","cancelled","pc","getSenders","sender","kind","local_track","replaceTrack","enabled","enumerateDevices","devices","dev","found","ele","indexOf","label","videoDevices","audioDevices","updateDevices","owner","removeItem","enableDataChannels","VTCCore","initialize","cameraIsEnabled","micIsEnabled","onError","config","onPeerMessage","msgType","content","idToName","updatePeerPosition","videoId","imageid","imageId","arr","split","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","blob","Blob","html","URL","createObjectURL","onStreamAccept","sendServerMessage","position","defPosX","defPosY","errorCode","errorText","rtcId","onStreamClose","clientId","getId","sWidth","sHeight","updateMyPosition","container","videoEl","removeChild","message","Button","data-v-2f32af68","title","toast","error","autoClose","hideProgressBar","POSITION","BOTTOM_RIGHT","Utils","pos","pos1","mul","posArr","transform","Number","scale","offsetLeft","offsetTop","left","top","attrName","getAttribute","rect","right","bottom","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","VideoDialog","useDispatch","setVideo","valid","setValid","url","$1","ytVidId","element","textContent","data-v-6a2f6b36","data-v-6e496afa","elementInput","replace","draggableBack","posMe","getPositionFromStyle","scaleMe","getValueFromAttr","calc_def_x","calc_def_y","youtubeAdd","handleSubmit","ImageDialog","imagePreviewUrl","setImagePreviewUrl","uploadClick","setUploadClick","fileName","setFileName","imgSize","setImgSize","URLChangedHandler","isImageUrl","image_url","http","XMLHttpRequest","open","send","imageExists","uploadComputer","data-v-bd733764","data-id","Image","onloadend","fileChangedHandler","htmlFor","preview","linkURL","elementUpload","elementLink","handleUpload","handleLink","imageWidth","parseInt","imageHeight","imageAdd","Navbar","useSelector","self","toggleChange","type1","value1","toggleCamera","toggleMic","data-v-2db9ff64","data-v-12a888fb","logosvg","display","logosmallsvg","data-v-261ef19f","userssvg","on","off","no","uploadimage","sharedscreen_on","sharedscreen_off","hasOwnProperty","call","stopvideo0","stopvideo1","stopaudio0","stopaudio1","support","close","closeClient","query","uname","DragBox","onMouseDown","stopPropagation","draggable","elementFromPoint","clientX","clientY","dragType","button","moveRef","current","resizeXRef","resizeYRef","resizeXYRef","myRef","setState","dragging","pageX","pageY","w","zoom","h","onMouseUp","newPos","onMouseMove","max","min","parentNode","aspect","initialRect","handleClickSmall","onClickSmall","createRef","tipState","addEventListener","removeEventListener","onMouseEnter","onMouseLeave","sizable","children","tip","small","borderColor","angle","offset","calcStyle","PureComponent","zIndex","stage","parentRect","smallCircleSize","calcOffest","PI","atan2","MyPeer","host","path","port","secure","debug","Peer","Screen","videoRef","useRef","process","_id","onGoToFirstPosition","sceneZoom","getDisplayMedia","opt","screenShareAdd","volume","node","onDrag","borderRadius","border","tabIndex","controls","loop","muted","YoutubeUpload","dbRef","youtubeMute","setYoutubeMute","youtubeMuteAudio","realCurTime","internalPlayer","unMute","seekTo","playVideo","pauseVideo","setVolume","handleDragMeForYoutube","youtubePosition","handleClose","youtubeRemove","onResize","data-v-c1f79ed4","data-v-7e3fe256","data-v-a995c326","closevideo","opts","playerVars","autoplay","origin","enablejsapi","autohide","showinfo","onPlay","youtubePlay","onPause","onStateChange","getCurrentTime","MicMute1","MicMute0","svg-inline","ImageUpload","imageHandle","imagePosition","imageRemove","closeimage","DragContainer","onMove","positionToParent","onWheel","ev","cursor_x","cursor_y","newZoom","maxZoom","minZoom","deltaY","zoomToParent","onZoom","background","backgroundSize","curzoom","Component","fitParent","ScreenShare","videoShareRef","isNavigatorSelect","setIsNavigatorSelect","_mediaStream","conn","mediaStream","srcObject","play","screenShareChange","getVideoTracks","onended","answer","incoming","active","info","onaddtrack","handleScreenShareDragAndResize","screenSharePosition","Conference","qs","search","userClose","setUserClose","setPos","mePos","setMePos","setSceneZoom","startConference","smallPos","handleGoToFirstPosition","handleDragMe","me","calcZoom","dist","calcVolume","getDistanceByRectAndPosition","getDistanceByPosition","p1","p2","distance","overflow","backgroundImage","img_small","onSetUserClose","img_big","dom","Room","setIsVerified","setUserName","data-v-a74c9690","history","placeholder","joinbtn","App","component","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.484bc11e.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 125;","const buttons = (state = {chat:'on', camera:'on', fullscreen:'on', mic: 'on', screenshare: 'off'}, action) => {\r\n    switch(action.type){\r\n        case \"click_chat\":\r\n            return {\r\n                ...state,\r\n                chat: action.value\r\n            }\r\n        case \"click_camera\":\r\n            return {\r\n                ...state,\r\n                camera: action.value\r\n            }\r\n        case \"click_fullscreen\":\r\n            return {\r\n                ...state,\r\n                fullscreen: action.value\r\n            }\r\n        case \"click_mic\":\r\n            return {\r\n                ...state,\r\n                mic: action.value\r\n            }\r\n        case \"click_screenshare\":\r\n            return {\r\n                ...state,\r\n                screenshare: action.value\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default buttons;","const users = (state = [], action) => {\r\n    switch (action.type) {\r\n        case \"user_add\":\r\n            // console.log('reducer user_add : ', state, action)\r\n            if (state.find((user) => user.id === action.value.id)) {\r\n                console.log('Duplicate user error!', action.value)\r\n                return state;\r\n            }\r\n            return [\r\n                ...state,\r\n                { ...action.value, media: { mic: 'on', camera: 'on', screenshare: 'off' } }\r\n            ]\r\n        case \"user_remove\":\r\n            return state.filter((user) => user.id !== action.value.id);\r\n        case \"user_media\":\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                if (action.value.type === 'mic')\r\n                    return { ...user, media: { ...user.media, mic: action.value.status } }\r\n                if (action.value.type === 'camera')\r\n                    return { ...user, media: { ...user.media, camera: action.value.status } }\r\n                // if (action.value.type === 'screenshare')\r\n                //     return { ...user, media: { ...user.media, screenshare: action.value.status } }\r\n            });\r\n        case \"user_position\":\r\n            return state.map((user) => {\r\n                if (user.id !== action.value.id)\r\n                    return user;\r\n                return { ...user, ...action.value }\r\n            });\r\n        \r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport default users;","const chats = (state = [], action) => {\r\n    switch(action.type){\r\n        case \"chat_add\":\r\n            // scroll\r\n            setTimeout(()=>{\r\n                    const messages = document.getElementsByClassName('chatitemparent');\r\n                    if (messages.length>0) {\r\n                        messages[messages.length-1].scrollIntoView({behavior: 'smooth'});\r\n                    }\r\n                }, 200);\r\n            return [\r\n                ...state,\r\n                { ...action.value, key: state.length}\r\n            ]\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default chats;","const screens = (state = {bgMoving:false, videos: [], images: [], screenshares: [], peer: {}}, action) => {\r\n    switch(action.type){\r\n        case \"backgound_moving\":\r\n            return {\r\n                ...state,\r\n                bgMoving: action.value\r\n            }\r\n        case \"youtube_add\":\r\n            const new_videos = [...state.videos, action.value];\r\n            return {\r\n                ...state,\r\n                videos: new_videos\r\n            }\r\n        case \"youtube_remove\":\r\n            const remove_videos = state.videos.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                videos: remove_videos\r\n            }\r\n        case \"youtube_remove_by_id\":\r\n            return { ...state, videos: state.videos.filter((video)=>{\r\n                return video.id !== action.peerId;\r\n            })}\r\n        case \"youtube_position\":\r\n            const moved_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: moved_videos\r\n            }\r\n        case \"youtube_play\":\r\n            const play_videos = state.videos.map((video) => {\r\n                if (video.name !== action.value.name)\r\n                    return video;\r\n                return {...video, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                videos: play_videos\r\n            }\r\n        case \"image_add\":\r\n            const new_images = [...state.images, action.value];\r\n            return {\r\n                ...state,\r\n                images: new_images\r\n            }\r\n        case \"image_remove_by_id\":\r\n            return { ...state, images: state.images.filter((img)=>{\r\n                return img.id !== action.peerId;\r\n            })}\r\n        case \"image_remove\":\r\n            const remove_images = state.images.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                images: remove_images\r\n            }\r\n        case \"image_position\":\r\n            const moved_images = state.images.map((image) => {\r\n                if (image.name !== action.value.name)\r\n                    return image;\r\n                return {...image, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                images: moved_images\r\n            }\r\n        case \"set_peer\":\r\n            // console.log('reducer setPeer : ------- ', state, action, { \r\n            //     ...state,\r\n            //     peer: action.value\r\n            // })\r\n            return { \r\n                ...state,\r\n                peer: action.value\r\n            }\r\n        case \"screenshare_add\":\r\n            return { \r\n                ...state,\r\n                screenshares: [...state.screenshares, action.value]\r\n            }\r\n        case \"screenshare_change\":\r\n            const changed_screenshares = state.screenshares.map((screenshare) => {\r\n                if (screenshare.userid !== action.value.userid)\r\n                    return screenshare;\r\n                return {...screenshare, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                screenshares: changed_screenshares\r\n            }\r\n        case \"screenshare_position\":\r\n            const moved_screenshares = state.screenshares.map((screenshare) => {\r\n                if (screenshare.name !== action.value.name)\r\n                    return screenshare;\r\n                return {...screenshare, ...action.value}\r\n            });\r\n            return {\r\n                ...state,\r\n                screenshares: moved_screenshares\r\n            }\r\n        case \"screenshare_remove\":\r\n            const remove_screenshares = state.screenshares.filter(x => x.name!==action.name);\r\n            return {\r\n                ...state,\r\n                screenshares: remove_screenshares\r\n            }\r\n        case \"screenshare_remove_by_id\":\r\n            return { ...state, screenshares: state.screenshares.filter((screenshare)=>{\r\n                return screenshare.userid !== action.peerId;\r\n            })}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default screens;","import {combineReducers} from 'redux'\r\nimport buttons from './buttons'\r\nimport users from './users'\r\nimport chats from './chats'\r\nimport screens from './screen'\r\n// import mediadevices from './medias'\r\n\r\nconst rootReducer = combineReducers({\r\n    buttons,\r\n    users,\r\n    chats,\r\n    screens\r\n})\r\n\r\nexport default rootReducer","import './index.css';\r\n\r\nclass Dialog{\r\n    static show(id) {\r\n        const ele = window.$('#'+id);\r\n        ele.plainModal('open')\r\n    }\r\n}\r\nexport default Dialog;","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSync } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport default props =>\r\n  <div className={`fadeIn ${props.spinning}`}>\r\n    <FontAwesomeIcon icon={faSync} size={props.size} />\r\n  </div>","import React, {useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport Recaptcha from 'react-recaptcha';\r\n\r\nimport Spinner from './Spinner'\r\nimport './index.css';\r\nimport successsvg from '../../images/success.svg'\r\nimport errorsvg from '../../images/error.svg'\r\nimport { API_URL } from '../../config'\r\n\r\n\r\nfunction RoomDialog(props){\r\n    const [isVerified, setIsVerified] = useState(true);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [mailStatus, setMailStatus] = useState(2);\r\n    const [email, setEmail] = useState('');\r\n    const [space, setSpace] = useState('');\r\n    const [form, setForm] = useState(null);\r\n    const [errors, setErrors] = useState({\r\n        email: 'Enter your Email!',\r\n        space: 'Enter your Sspace Name!',\r\n    })\r\n\r\n    const validEmailRegex = RegExp(/^(([^<>()\\],;:\\s@]+([^<>()\\],;:\\s@]+)*)|(.+))@(([^<>()[\\],;:\\s@]+)+[^<>()[\\],;:\\s@]{2,})$/i);\r\n\r\n    const countErrors = (errors) => {\r\n        let count = 0;\r\n        delete errors.name\r\n        Object.values(errors).forEach(\r\n            (val) => {\r\n                val.length > 0 && (count = count+1)\r\n            }\r\n        );\r\n        return count;\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n        const { name, value } = event.target;\r\n\r\n        switch (name) {\r\n            case 'space':\r\n                errors.space =\r\n                value.length < 5\r\n                    ? 'Space Name must be 5 characters long!'\r\n                    : '';\r\n                break;\r\n            case 'email':\r\n                errors.email =\r\n                validEmailRegex.test(value)\r\n                    ? ''\r\n                    : 'Email is not valid!';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        setErrors({\r\n            ...errors,\r\n            name: value\r\n        })\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n\r\n        fetch(`${API_URL}/email`, {\r\n            method: 'pOSt',\r\n            headers: {\r\n                aCcePt: 'aPpliCaTIon/JsOn',\r\n                'cOntENt-type': 'applicAtion/JSoN'\r\n            },\r\n            body: JSON.stringify({ email: email.value, space: space.value })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            setSendingEmail(false)\r\n            setMailStatus(data.status)\r\n            form.reset()\r\n        })\r\n        .catch(err => console.log(err))\r\n    }\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#roomdialog').plainModal('close')\r\n\r\n        setTimeout(()=>{\r\n            setSendingEmail(false)\r\n            setMailStatus(2)\r\n            // setIsVerified(false);\r\n        }, 100);\r\n    }\r\n    const onLoadCallback = function () {\r\n    };\r\n    const onVerifyCallback = function () {\r\n        // setIsVerified(true);\r\n    };\r\n    useEffect(()=>{\r\n        if (mailStatus === 2) {\r\n            // ReactDOM.render(\r\n            //     <Recaptcha\r\n            //         sitekey=\"6LdpQwEVAAAAAGM4w3LS9xsD-Hd6yAP_DhIce0nz\"\r\n            //         render=\"explicit\"\r\n            //         onloadCallback={onLoadCallback}\r\n            //         verifyCallback={onVerifyCallback}\r\n            //     />,\r\n            //     document.getElementById('recaptcha')\r\n            // );\r\n        }\r\n    },[mailStatus])\r\n\r\n    const content1 =\r\n        <form data-v-9deb956c=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)} ref={form => setForm(form)} noValidate>\r\n            <div data-v-9deb956c=\"\" className=\"label\" >Your Email</div>\r\n            <input data-v-9deb956c=\"\" type=\"email\" name='email' className=\"email\" ref={input => setEmail(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.email.length > 0 &&\r\n                <span className='error'>{errors.email}</span>}\r\n            <div data-v-9deb956c=\"\" className=\"label\">Space Name</div>\r\n            <input data-v-9deb956c=\"\" type=\"text\" name='space' className=\"space-name\" ref={input => setSpace(input)} onChange={(e)=>handleChange(e)} noValidate />\r\n            {errors.space.length > 0 &&\r\n                <span className='error'>{errors.space}</span>}\r\n            <div id='recaptcha'/>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    CANCEL\r\n                </button>\r\n                <button data-v-9deb956c=\"\" type='submit' className='create'\r\n                    disabled={ countErrors(errors)===0 && isVerified ? false : true}>\r\n                    {sendingEmail\r\n                    ? <Spinner size='lg' spinning='spinning' />\r\n                    : \"CREATE\"\r\n                    }\r\n                </button>\r\n            </div>\r\n        </form>\r\n    const content2 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={successsvg} alt='successsvg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\">Email sent!\r\n                    <h4 data-v-9deb956c=\"\">Please check your inbox to confirm.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n    const content3 =\r\n        <>\r\n            <div data-v-9deb956c=\"\" className=\"created\">\r\n                <img src={errorsvg} alt='error.svg' />\r\n                <div data-v-9deb956c=\"\" className=\"text\" style={{color: '#ff0000'}}>Whoops!\r\n                    <h4 data-v-9deb956c=\"\">Already registered.</h4>\r\n                </div>\r\n            </div>\r\n            <div data-v-9deb956c=\"\" className=\"buttons\">\r\n                <button data-v-9deb956c=\"\" className='cancel' onClick={(e)=>handleCancel(e)}>\r\n                    GOT IT!\r\n                </button>\r\n            </div>\r\n        </>\r\n\r\n\r\n    return (\r\n        <div data-v-9deb956c=\"\" data-v-5c9875d0=\"\" id ='roomdialog' aria-expanded=\"true\" data-modal=\"create-space\" className=\"create-space-modal v--modal-overlay roomdialog\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal m-dialog\">\r\n                    <div data-v-9deb956c=\"\" className=\"header\">Create Space</div>\r\n                    {mailStatus === 2\r\n                    ? content1\r\n                    : mailStatus === 0\r\n                    ? content2\r\n                    : content3\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default RoomDialog;","// export const API_URL = process.env.NODE_ENV === 'production'\r\n//   ? 'http://ec2-18-222-23-198.us-east-2.compute.amazonaws.com:3113/'\r\n  // : 'http://localhost:3113'\r\nexport const API_URL = process.env.NODE_ENV === 'production'\r\n  ? 'https://webrtc.bcisummit.com'\r\n  : 'https://webrtc.bcisummit.com'\r\n  // : 'localhost:3011' //tesing port","import React from 'react';\r\n\r\nconst Footer = React.memo(props => {\r\n    return (\r\n        <div data-v-3de1367d=\"\" className=\"footer\">\r\n            <div data-v-3de1367d=\"\" className=\"links\">\r\n                <a data-v-3de1367d=\"\" href=\"https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to=seniordev119@gmail.com\" className=\"support-link\" target=\"_blank\" rel=\"noopener noreferrer\">seniordev119@gmail.com</a>\r\n                <span data-v-3de1367d=\"\" className=\"phone-hidden\">&nbsp;&nbsp;&nbsp;&nbsp;∙&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                <div data-v-3de1367d=\"\" className=\"legal\">\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/SpatialChat-Privacy-Policy-899c953609d24d3ebbd619506becaa7f\" target=\"_blank\" rel=\"noopener noreferrer\">Privacy Policy</a>\r\n                    <span data-v-3de1367d=\"\">&nbsp;&nbsp;&nbsp;&nbsp;∙&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <a data-v-3de1367d=\"\" href=\"https://www.notion.so/spatialchat/Terms-of-Service-6f9243e5e25346cfa73df618c90de4fb\" target=\"_blank\" rel=\"noopener noreferrer\">Terms of Service</a>\r\n                </div>\r\n            </div>\r\n            {/* <div data-v-3de1367d=\"\" className=\"copyright\">Designed by FunCorp Lab</div> */}\r\n        </div>\r\n    );\r\n})\r\nexport default Footer;","import React from \"react\";\r\n\r\nimport marksvg from '../images/logo-mark.svg'\r\nimport Dialog from '../components/dialog';\r\nimport RoomDialog from '../components/dialog/roomdlg';\r\nimport Footer from '../components/footer';\r\n\r\nfunction Home(props) {\r\n    return (\r\n    <div data-v-5c9875d0=\"\" className=\"home\">\r\n        <div data-v-5c9875d0=\"\" className=\"buttons\">\r\n            <button data-v-5c9875d0=\"\" onClick={()=>{Dialog.show('roomdialog')}} className=\"button\">Create Space</button>\r\n        </div>\r\n        <Footer />\r\n        <RoomDialog />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","class WebRTC {\r\n    static _instance = null;\r\n    client = null;\r\n    roomName = '';\r\n    userName = '';\r\n    myPosition = { x: 0, y: 0 };\r\n    youtubes = [];\r\n    images = [];\r\n    screenshares = [];\r\n    enableScreenShare = true;\r\n    enableCamera = true;\r\n    enableMic = true;\r\n    screenStream = {};\r\n    width = 3000;\r\n    height = 2000;\r\n\r\n    videoQualities = [\r\n        { text: 'SSM (30p - 128Kb/s)', value: { width: 160, height: 120, frameRate: 10 } },\r\n        { text: 'SM (120p - 256Kb/s)', value: { width: 320, height: 240, frameRate: 10 } },\r\n        { text: 'SD (360p - 1Mb/s)', value: { width: 480, height: 360, frameRate: 10 } },\r\n        { text: 'HD (720p - 2Mb/s)', value: { width: 1280, height: 720, frameRate: 10 } },\r\n        { text: 'Full HD (1080p - 4Mb/s)', value: { width: 1920, height: 1080, frameRate: 15 } }\r\n    ];\r\n    currentVideoQuality = this.videoQualities[1];\r\n    audioQualities = [\r\n        { text: 'Narrow Band (16Kb/s)', value: { sampleSize: 8, channelCount: 1 } },\r\n        { text: 'Wide Band (64Kb/s)', value: { sampleSize: 8, channelCount: 2 } },\r\n        { text: 'Full Band (256Kb/s)', value: { sampleSize: 16, channelCount: 2 } }\r\n    ];\r\n    currentAudioQuality = this.audioQualities[1];\r\n\r\n    static getInstance() {\r\n        if (WebRTC._instance === null) {\r\n            WebRTC._instance = new WebRTC();\r\n        }\r\n        return WebRTC._instance;\r\n    }\r\n\r\n    constructor() {\r\n        console.log('WebRTC class was initialized.');\r\n    }\r\n\r\n    checkBrowser() {\r\n        return window.Login._browserCompatCheck();\r\n    }\r\n    getUserName() {\r\n        const username = window.localStorage.getItem('userName');\r\n        return username ? username : '';\r\n    }\r\n    setUserName(name) {\r\n        window.localStorage.setItem('userName', name);\r\n    }\r\n    getRoomName() {\r\n        return this.roomName;\r\n    }\r\n    generateRoomName() {\r\n        return window.generateRoomName();\r\n    }\r\n    createRoom(token, roomName) {\r\n        window.localStorage.setItem('o', true);\r\n        window.localStorage.setItem('t', 'video-conference');\r\n        window.localStorage.setItem('r', roomName);\r\n        window.location.href = '/room?username=' + this.getUserName();\r\n    }\r\n    joinRoom(token, roomName) {\r\n        window.localStorage.setItem('o', false);\r\n        window.localStorage.setItem('t', 'video-conference');\r\n        window.localStorage.setItem('r', roomName);\r\n        window.location.href = '/room?username=' + this.getUserName();\r\n    }\r\n    createAudioMeter(localstream) {\r\n        var kSampleSize = 16384;\r\n        var kSampleAverageInterval = 16;\r\n        var audioContext = new AudioContext();\r\n        var mediaStreamSource = audioContext.createMediaStreamSource(localstream);\r\n        var processor = audioContext.createScriptProcessor(kSampleSize, 1, 1);\r\n\r\n        mediaStreamSource.connect(processor);\r\n        processor.connect(audioContext.destination);\r\n\r\n        processor.onaudioprocess = function (evt) {\r\n            var buffer = evt.inputBuffer;\r\n            if (buffer.numberOfChannels > 0) {\r\n                var inputData = buffer.getChannelData(0);\r\n                var inputDataLength = inputData.length;\r\n                var total = 0;\r\n\r\n                // We calculate the average of every X to prevent CPU fans from kicking in\r\n                // on laptops!\r\n                for (var i = 0; i < inputDataLength; i += kSampleAverageInterval) {\r\n                    total += Math.abs(inputData[i]);\r\n                }\r\n\r\n                var rms = Math.sqrt((kSampleAverageInterval * total) / inputDataLength);\r\n                // WebRTC.getInstance().client.sendPeerMessage();\r\n\r\n                window.easyrtc.sendPeerMessage(\r\n                    {\r\n                        targetRoom: WebRTC.getInstance().roomName\r\n                    },\r\n                    'audio-meter',\r\n                    {\r\n                        rms: rms\r\n                    }\r\n                );\r\n            }\r\n        };\r\n    }\r\n    toggleCamera(enable) {\r\n        this.enableCamera = enable;\r\n        // window.easyrtc.enableCamera(enable);\r\n        this.onStreamConfigurationChange();\r\n        if (this.client)\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'media-presence', { type: 'camera', status: enable ? 'on' : 'off' });\r\n    }\r\n    toggleMic(enable) {\r\n        this.enableMic = enable;\r\n        // window.easyrtc.enableMicrophone(enable);\r\n        this.onStreamConfigurationChange();\r\n        if (this.client)\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'media-presence', { type: 'mic', status: enable ? 'on' : 'off' });\r\n    }\r\n\r\n    screenShareAdd(value) {\r\n        WebRTC.getInstance().screenshares.push(value);\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'screenshare-add', value);\r\n    }\r\n    screenSharePosition(value) {\r\n        this.screenshares.forEach((screenshare) => {\r\n            if (screenshare.name === value.name) {\r\n                screenshare.defX = value.defX;\r\n                screenshare.defY = value.defY;\r\n                screenshare.width = value.width;\r\n                screenshare.height = value.height;\r\n            }\r\n        });\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'screenshare-position', value);\r\n    }\r\n    screenShareChange(enable) {\r\n        this.enableScreenShare = enable;\r\n        if (this.client)\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'screenshare-change', { status: enable ? 'on' : 'off' });\r\n    }\r\n    screenShareRemove(value) {\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'screenshare-remove', value);\r\n        WebRTC.getInstance().screenshares = WebRTC.getInstance().screenshares.filter((screenshare) => {\r\n            return screenshare.name !== value.name;\r\n        });\r\n    }\r\n    youtubePosition(value) {\r\n        this.youtubes.forEach((youtube) => {\r\n            if (youtube.name === value.name) {\r\n                // youtube.userid = value.userid;\r\n                youtube.defX = value.defX;\r\n                youtube.defY = value.defY;\r\n                youtube.width = value.width;\r\n                youtube.height = value.height;\r\n                // youtube.volume = value.volume;\r\n                // youtube.curtime = value.curtime;\r\n                // youtube.videoplay = value.videoplay;\r\n            }\r\n        });\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'youtube-position', value);\r\n    }\r\n    youtubePlay(value) {\r\n        this.youtubes.forEach((youtube) => {\r\n            if (youtube.name === value.name) {\r\n                youtube.videoplay = value.videoplay;\r\n                youtube.videoplaying = value.videoplaying;\r\n                youtube.curtime = value.curtime;\r\n            }\r\n        });\r\n\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'youtube-play', value);\r\n    }\r\n    youtubeAdd(value) {\r\n        WebRTC.getInstance().youtubes.push(value);\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'youtube-add', value);\r\n    }\r\n    youtubeRemove(value) {\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'youtube-remove', value);\r\n        WebRTC.getInstance().youtubes = WebRTC.getInstance().youtubes.filter((rec) => {\r\n            return rec.name !== value.name;\r\n        });\r\n    }\r\n    imageAdd(value) {\r\n        WebRTC.getInstance().images.push(value);\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'image-add', value);\r\n    }\r\n    imagePosition(value) {\r\n        this.images.forEach((image) => {\r\n            if (image.name === value.name) {\r\n                image.defX = value.defX;\r\n                image.defY = value.defY;\r\n                image.width = value.width;\r\n                image.height = value.height;\r\n            }\r\n        });\r\n        if (this.client) this.client.sendPeerMessage({ room: this.roomName }, 'image-position', value);\r\n    }\r\n    imageRemove(value) {\r\n        if (WebRTC.getInstance().client) WebRTC.getInstance().client.sendPeerMessage({ room: this.roomName }, 'image-remove', value);\r\n        WebRTC.getInstance().images = WebRTC.getInstance().images.filter((rec) => {\r\n            return rec.name !== value.name;\r\n        });\r\n    }\r\n    \r\n    closeClient(cusId) {\r\n        this.dispatch({ type: 'user_remove', value: { id: cusId } });\r\n        window.easyrtc.disconnect();\r\n    }\r\n    sendFile(peerId, peerName, dispatch) {\r\n        const fileInput = window.$('#file');\r\n        fileInput.one('change', function () {\r\n            const file = fileInput[0].files[0];\r\n            if (file.size === 0) {\r\n                alert('Empty file selected.');\r\n                return;\r\n            }\r\n            if (file.size > Math.pow(2, 21)) {\r\n                alert(\"File size can't be larger than 2MB.\");\r\n                return;\r\n            }\r\n            var reader = new FileReader();\r\n            // Closure to capture the file information.\r\n            reader.onload = function (e) {\r\n                var txData = {\r\n                    name: file.name,\r\n                    type: file.type,\r\n                    size: file.size,\r\n                    binaryContents: e.target.result\r\n                };\r\n                dispatch({\r\n                    type: 'chat_add',\r\n                    value: {\r\n                        username: 'Me',\r\n                        userid: 'me',\r\n                        text: `Send a file \"${file.name}\" to \"${peerName}\".`,\r\n                        align: 'right',\r\n                        time: Date.now()\r\n                    }\r\n                });\r\n                window.easyrtc.sendDataWS(peerId, 'file', txData);\r\n            };\r\n            // Read in the image file as a data URL.\r\n            reader.readAsDataURL(file);\r\n            fileInput[0].value = '';\r\n        });\r\n        fileInput[0].click();\r\n        // .trigger('click');\r\n    }\r\n    // exitRoom(){\r\n    //     if(this.owner === 'true'){\r\n    //         this.sendMessage('Room closed.');\r\n    //         window.easyrtc.sendPeerMessage({\r\n    //             targetRoom: WebRTC.getInstance().roomName\r\n    //         }, 'close');\r\n    //         this.dispatch({type:'chat_add', value:{username: 'Me', userid: 'me', text: 'Room closed.', align: 'right', time: Date.now()}})\r\n    //     }\r\n    //     this.closeClient()\r\n    // }\r\n\r\n    updateStreamMode() {\r\n        // get getUserMedia mode\r\n        let mode = { video: false, audio: false };\r\n        if (this.currentVideoDevice) {\r\n            mode.video = {};\r\n            mode.video.deviceId = this.currentVideoDevice.value;\r\n            mode.video.width = this.currentVideoQuality.value.width;\r\n            mode.video.height = this.currentVideoQuality.value.height;\r\n            mode.video.frameRate = this.currentVideoQuality.value.frameRate;\r\n        }\r\n        if (this.currentAudioDevice) {\r\n            mode.audio = {};\r\n            mode.audio.deviceId = this.currentAudioDevice.value;\r\n            mode.audio.sampleSize = this.currentAudioQuality.value.sampleSize;\r\n            mode.audio.channelCount = this.currentAudioQuality.value.channelCount;\r\n        }\r\n        this.currentContraintMode = mode;\r\n    }\r\n\r\n    onStreamConfigurationChange() {\r\n        if (!this.enableScreenShare) {\r\n            //now screen sharing status...\r\n            const peers = window.easyrtc.getPeerConnections();\r\n            for (const id in peers) {\r\n                const peer = peers[id];\r\n\r\n                peer.pc.getSenders().map((sender) => {\r\n                    if (WebRTC.getInstance().screenStream) {\r\n                        sender.replaceTrack(\r\n                            WebRTC.getInstance()\r\n                                .screenStream.getTracks()\r\n                                .find((track) => {\r\n                                    return track.kind === sender.track.kind;\r\n                                })\r\n                        );\r\n                    }\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.updateStreamMode();\r\n        const local = window.easyrtc.getLocalStream();\r\n        // local.getTracks().forEach((track) => {\r\n        //     track.stop();\r\n        // });\r\n\r\n        const mode = { ...this.currentContraintMode };\r\n        if (!WebRTC.getInstance().enableCamera) mode.video = false;\r\n        if (!WebRTC.getInstance().enableMic) mode.audio = false;\r\n\r\n        if (!mode.video && !mode.audio) {\r\n            const peers = window.easyrtc.getPeerConnections();\r\n            for (const id in peers) {\r\n                const peer = peers[id];\r\n                // if(peer.cancelled)\r\n                //     continue;\r\n                peer.pc.getSenders().forEach((sender) => {\r\n                    if (sender.track) sender.track.enabled = false;\r\n                    // sender.track.stop()\r\n                });\r\n                //sender.replaceTrack(null))\r\n            }\r\n            return;\r\n        }\r\n\r\n        navigator.mediaDevices.getUserMedia(mode).then((stream) => {\r\n            // replace local stream\r\n            stream.getTracks().forEach((track) => {\r\n                local.addTrack(track);\r\n            });\r\n\r\n            const video_me = document.getElementById(local.id);\r\n\r\n            if (video_me) window.easyrtc.setVideoObjectSrc(video_me, stream);\r\n\r\n            window.easyrtc.enableCamera(WebRTC.getInstance().enableCamera);\r\n            window.easyrtc.enableMicrophone(WebRTC.getInstance().enableMic);\r\n\r\n            const peers = window.easyrtc.getPeerConnections();\r\n\r\n            for (const id in peers) {\r\n                const peer = peers[id];\r\n                if (peer.cancelled) continue;\r\n                peer.pc.getSenders().forEach((sender) => {\r\n                    const kind = sender.track.kind;\r\n                    // if(kind === 'video'){\r\n                    const local_track = stream.getTracks().find((track) => track.kind === kind);\r\n                    if (local_track) {\r\n                        sender.replaceTrack(local_track);\r\n                        sender.track.enabled = true;\r\n                    } else sender.track.enabled = false;\r\n                    // }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    async updateDevices() {\r\n        try {\r\n            let audio = [];\r\n            let video = [];\r\n            const devices = await navigator.mediaDevices.enumerateDevices();\r\n            for (const dev of devices) {\r\n                if (dev.kind === 'audioinput') {\r\n                    const found = audio.filter((ele) => ele.text.indexOf(dev.label) === 0);\r\n                    if (found.length > 0) audio = [...audio, { text: dev.label + '-' + found.length, value: dev.deviceId }];\r\n                    else audio = [...audio, { text: dev.label, value: dev.deviceId }];\r\n                }\r\n                if (dev.kind === 'videoinput') {\r\n                    const found = video.filter((ele) => ele.text.indexOf(dev.label) === 0);\r\n                    if (found.length > 0) video = [...video, { text: dev.label + '-' + found.length, value: dev.deviceId }];\r\n                    else video = [...video, { text: dev.label, value: dev.deviceId }];\r\n                }\r\n            }\r\n            this.videoDevices = video;\r\n            this.audioDevices = audio;\r\n        } catch (e) {}\r\n    }\r\n\r\n    async startConference(dispatch, token, room, userName) {\r\n        console.log('start conference: ', room, userName);\r\n        this.userName = userName;\r\n        this.roomName = room ? room : window.localStorage.getItem('r');\r\n\r\n        if (!this.roomName) {\r\n            window.location.href = '/room?space=' + this.roomName;\r\n            return;\r\n        }\r\n        this.dispatch = dispatch;\r\n        await this.updateDevices();\r\n        this.currentVideoDevice = this.videoDevices.length === 0 ? null : this.videoDevices[0];\r\n        this.currentAudioDevice = this.audioDevices.length === 0 ? null : this.audioDevices[0];\r\n\r\n        this.owner = window.localStorage.getItem('o');\r\n        this.token = window.localStorage.getItem('t');\r\n\r\n        window.localStorage.removeItem('o');\r\n        window.localStorage.removeItem('t');\r\n        window.localStorage.removeItem('r');\r\n\r\n        window.easyrtc.enableDataChannels(false);\r\n        window.VTCCore.initialize({\r\n            cameraIsEnabled: true,\r\n            micIsEnabled: true\r\n        })\r\n            .onError(function (config) {\r\n                console.log('error---', config);\r\n            })\r\n            .onPeerMessage(function (client, peerId, msgType, content) {\r\n                if (msgType === 'chat') {\r\n                    dispatch({\r\n                        type: 'chat_add',\r\n                        value: { username: client.idToName(peerId), userid: peerId, text: content, align: 'left', time: Date.now() }\r\n                    });\r\n                } else if (msgType === 'user_remove') {\r\n                    dispatch({\r\n                        type: 'user_remove',\r\n                        value: {\r\n                            id: content.id\r\n                        }\r\n                    });\r\n                } else if (msgType === 'set_peer_position') {\r\n                    WebRTC.getInstance().updatePeerPosition(content);\r\n                } else if (msgType === 'youtube-position') {\r\n                    dispatch({\r\n                        type: 'youtube_position',\r\n                        value: {\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            videoId: peerId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'youtube-play') {\r\n                    dispatch({\r\n                        type: 'youtube_play',\r\n                        value: {\r\n                            name: content.name,\r\n                            videoplay: content.videoplay,\r\n                            curtime: content.curtime,\r\n                            videoplaying: content.videoplaying\r\n                        }\r\n                    });\r\n                } else if (msgType === 'youtube-add') {\r\n                    dispatch({\r\n                        type: 'youtube_add',\r\n                        value: {\r\n                            name: content.name,\r\n                            id: peerId,\r\n                            username: client.idToName(peerId),\r\n                            value: content.videoId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY,\r\n                            videoplay: true\r\n                        }\r\n                    });\r\n                } else if (msgType === 'youtube-remove') {\r\n                    dispatch({ type: 'youtube_remove', name: content.name });\r\n                    // Image Handle\r\n                } else if (msgType === 'image-position') {\r\n                    dispatch({\r\n                        type: 'image_position',\r\n                        value: {\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            imageid: peerId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'image-add') {\r\n                    dispatch({\r\n                        type: 'image_add',\r\n                        value: {\r\n                            name: content.name,\r\n                            id: peerId,\r\n                            username: client.idToName(peerId),\r\n                            value: content.imageId,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'image-remove') {\r\n                    dispatch({ type: 'image_remove', name: content.name });\r\n                } else if (msgType === 'screenshare-add') {\r\n                    dispatch({\r\n                        type: 'screenshare_add',\r\n                        value: {\r\n                            userid: peerId,\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            // peer: content.peer,\r\n                            defX: content.defX,\r\n                            defY: content.defY,\r\n                            status: content.status\r\n                        }\r\n                    });\r\n                } else if (msgType === 'screenshare-position') {\r\n                    dispatch({\r\n                        type: 'screenshare_position',\r\n                        value: {\r\n                            id: peerId,\r\n                            username: client.idToName(peerId),\r\n                            name: content.name,\r\n                            width: content.width,\r\n                            height: content.height,\r\n                            defX: content.defX,\r\n                            defY: content.defY\r\n                        }\r\n                    });\r\n                } else if (msgType === 'screenshare-change') {\r\n                    dispatch({\r\n                        type: 'screenshare_change',\r\n                        value: {\r\n                            userid: peerId,\r\n                            username: client.idToName(peerId),\r\n                            status: content.status\r\n                        }\r\n                    });\r\n                } else if (msgType === 'screenshare-remove') {\r\n                    dispatch({ type: 'screenshare_remove', name: content.name });\r\n                    // Navbar Handle\r\n                } else if (msgType === 'media-presence' && typeof content.type === 'string' && typeof content.status === 'string') {\r\n                    console.log('WebRTC : ---------', content, msgType)\r\n                } else if (msgType === 'debug') {\r\n                    console.log(msgType, peerId, content);\r\n                } else if (msgType === 'mic-control' && typeof content.enabled === 'boolean') {\r\n                    console.log(client, peerId, msgType, content);\r\n                    return;\r\n                } else if (msgType === 'audio-meter') {\r\n                    // dispatch({type:'user_audio', value: {audio: content.rms});\r\n                    // AudioMeter.handlePeerMessage(peerId, content);\r\n                } else if (msgType === 'file') {\r\n                    var arr = content.binaryContents.split(','),\r\n                        mime = arr[0].match(/:(.*?);/)[1],\r\n                        bstr = atob(arr[1]),\r\n                        n = bstr.length,\r\n                        u8arr = new Uint8Array(n);\r\n                    while (n--) {\r\n                        u8arr[n] = bstr.charCodeAt(n);\r\n                    }\r\n                    var blob = new Blob([u8arr], { type: mime });\r\n                    dispatch({\r\n                        type: 'chat_add',\r\n                        value: {\r\n                            username: client.idToName(peerId),\r\n                            userid: peerId,\r\n                            html: `\"${client.idToName(peerId)}\" sent a file.<br><a href='${URL.createObjectURL(\r\n                                blob\r\n                            )}' target='_blank'>Click here to download ${content.name}(${content.size}bytes)`,\r\n                            align: 'left',\r\n                            time: Date.now()\r\n                        }\r\n                    });\r\n                } else {\r\n                    // @todo FIXME: right now we don't have other messages to take care of\r\n                    console.log('peerMessage => got a peer message that is unexpected');\r\n                    console.log('            => peerId:  ' + peerId);\r\n                    console.log('            =>   name: ' + client.idToName(peerId));\r\n                    console.log('            => msgType: ' + msgType);\r\n                    console.log('            => content: ' + JSON.stringify(content));\r\n                }\r\n            })\r\n            .onStreamAccept(function (client, peerId, stream) {\r\n                var peerName = client.idToName(peerId);\r\n\r\n                window.easyrtc.sendServerMessage(\r\n                    'get_peer_position',\r\n                    peerId,\r\n                    function (msgType, position) {\r\n                        console.log('onStreamAccept: ', peerName, WebRTC.getInstance().roomName);\r\n                        dispatch({\r\n                            type: 'user_add',\r\n                            value: { id: peerId, name: peerName, stream, defPosX: position.x, defPosY: position.y }\r\n                        });\r\n                        WebRTC.getInstance().onStreamConfigurationChange();\r\n                    },\r\n                    function (errorCode, errorText) {}\r\n                );\r\n                WebRTC.getInstance().youtubes.forEach((youtube) => {\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'youtube-add', youtube);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'youtube-position', youtube);\r\n                });\r\n                WebRTC.getInstance().images.forEach((image) => {\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'image-add', image);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'image-position', image);\r\n                });\r\n                WebRTC.getInstance().screenshares.forEach((screenshare) => {\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'screenshare-add', screenshare);\r\n                    WebRTC.getInstance().client.sendPeerMessage({ rtcId: peerId }, 'screenshare-position', screenshare);\r\n                });\r\n                \r\n                // if (WebRTC.getInstance().client)\r\n                //     WebRTC.getInstance().client.sendPeerMessage({ room: WebRTC.getInstance().roomName }, 'media-presence', {\r\n                //         type: 'screenshare',\r\n                //         status: WebRTC.getInstance().enableScreenShare ? 'on' : 'off'\r\n                //     });\r\n\r\n                return;\r\n            })\r\n            .onStreamClose(function (client, peerId) {\r\n                dispatch({ type: 'image_remove_by_id', peerId });\r\n                dispatch({ type: 'youtube_remove_by_id', peerId });\r\n                dispatch({ type: 'screenshare_remove_by_id', peerId });\r\n                dispatch({ type: 'user_remove', value: { id: peerId } });\r\n\r\n                return;\r\n            })\r\n            .connect(userName, this.roomName, (client) => {\r\n                var stream = client.getLocalStream();\r\n                console.log('start local stream: ', userName, this.roomName);\r\n\r\n                window.easyrtc.sendServerMessage(\r\n                    'get_my_position',\r\n                    { clientId: client.getId(), sWidth: this.width, sHeight: this.height },\r\n                    function (msgType, position) {\r\n                        dispatch({ type: 'user_add', value: { id: 'me', name: 'Me', stream, defPosX: position.x, defPosY: position.y } });\r\n                        WebRTC.getInstance().onStreamConfigurationChange();\r\n                        WebRTC.getInstance().client = client;\r\n\r\n                        WebRTC.getInstance().updateMyPosition(position);\r\n                    },\r\n                    function (errorCode, errorText) {}\r\n                );\r\n\r\n                return;\r\n            });\r\n    }\r\n\r\n    removeChild(peer, client) {\r\n        var container = document.getElementById('screen_' + peer);\r\n        var videoEl = peer.videoEl; //it got video element\r\n        if (container && videoEl) {\r\n            container.removeChild(videoEl); // my code is breaking here\r\n        }\r\n    }\r\n\r\n    sendMessage(message) {\r\n        this.client.sendPeerMessage({ room: this.roomName }, 'chat', message);\r\n    }\r\n\r\n    updatePeerPosition(content) {\r\n        WebRTC.getInstance().dispatch({\r\n            type: 'user_position',\r\n            value: { id: content.id, defPosX: content.position.x, defPosY: content.position.y }\r\n        });\r\n    }\r\n    updateMyPosition(position) {\r\n        if (this.client) {\r\n            if (!position) position = this.myPosition;\r\n            this.myPosition = position;\r\n\r\n            this.client.sendPeerMessage({ room: this.roomName }, 'set_peer_position', {\r\n                id: this.client.getId(),\r\n                position: this.myPosition\r\n            });\r\n        }\r\n    }\r\n}\r\nexport default WebRTC;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport { ToastContainer, toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n\r\nconst Button = React.memo(props => {\r\n    const toggleStatus = () => {\r\n        if(props.onClick && props.status !== 'no')\r\n            props.onClick();\r\n        else {\r\n            toast.error('Session invalid.')\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <img id={props.id} data-v-2f32af68=\"\" className=\"stopvideo pointer has-tooltip\" src={props[props.status]} alt={props.alt} title={props.alt} onClick={ toggleStatus } />\r\n            <ToastContainer\r\n                autoClose={3000}\r\n                hideProgressBar={true}\r\n                position={toast.POSITION.BOTTOM_RIGHT}\r\n            />\r\n        </>\r\n    );\r\n})\r\nexport default Button;","export default class Utils{\r\n    static addPosition(pos, pos1){\r\n        return {x: pos.x+pos1.x, y: pos.y+pos1.y}\r\n    }\r\n    static multiplyPosition(pos, mul){\r\n        return {x: pos.x*mul, y: pos.y*mul}\r\n    }\r\n    static getPositionFromTransform(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromTransformWithScale(ele){\r\n        try{\r\n            var posArr = ele.style.transform.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)\r\n            return {x: posArr[0], y: posArr[1], scale: posArr[2]}    \r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionFromStyle(ele){\r\n        try{\r\n            return {x: ele.offsetLeft, y: ele.offsetTop}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0}\r\n        }\r\n    }\r\n    static getPositionAndSizeFromStyle(ele){\r\n        try{\r\n            var left = ele.style.left.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            var top = ele.style.top.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            var width = ele.style.width.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            var height = ele.style.height.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]\r\n            return {x: left, y: top, width: width, height: height}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {x:0, y:0, width: 0, height: 0}\r\n        }\r\n    }\r\n    static getValueFromAttr(ele, attrName){\r\n        try{\r\n            return {value: ele.getAttribute(attrName).match(/[+-]?\\d+(?:\\.\\d+)?/g).map(Number)[0]}\r\n        } catch(e){\r\n            console.error(e);\r\n            return {value: ''}\r\n        }\r\n    }\r\n    static setPositionOfHtmlElement(ele, pos){\r\n        try{\r\n            ele.style.left = pos.x + 'px';\r\n            ele.style.top = pos.y + 'px';\r\n            return true;\r\n        } catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static isInRect(rect, pos){\r\n        try{\r\n            if(pos.x >= rect.left && pos.x <= rect.right && pos.y >= rect.top && pos.y <= rect.bottom)\r\n                return true;\r\n            return false\r\n        }catch(e){\r\n            console.error(e);\r\n            return false;\r\n        }\r\n    }\r\n    static width(){\r\n        return(window.innerWidth)?\r\n        window.innerWidth:\r\n        document.documentElement.clientWidth||document.body.clientWidth||0;\r\n    }\r\n    static height(){\r\n        return(window.innerHeight)?\r\n        window.innerHeight:\r\n        document.documentElement.clientHeight||document.body.clientHeight||0;\r\n    }\r\n}","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nimport youtube from '../../images/youtube1.svg'\r\n\r\nfunction VideoDialog(props){\r\n    const dispatch = useDispatch()\r\n    const [video, setVideo] = useState('');\r\n    const [valid, setValid] = useState(false);\r\n\r\n    const handleCancel = (event) => {\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n    const ytVidId = (url) => {\r\n        var p = /^(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\?(?=.*v=((\\w|-){11}))(?:\\S+)?$/;\r\n        return (url.match(p)) ? RegExp.$1 : false;\r\n    }\r\n    const getId = (url) => {\r\n        const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n        const match = url.match(regExp);\r\n\r\n        return (match && match[2].length === 11)\r\n        ? match[2]\r\n        : null;\r\n    }\r\n    const handleChange = (event) => {\r\n        var url = video.value;\r\n        if (ytVidId(url) !== false) {\r\n            setValid(true)\r\n        } else {\r\n            setValid(false)\r\n            var element = document.getElementsByClassName(\"input-text\");\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleSubmit = (event) => {\r\n        var elementInput = document.getElementsByClassName(\"input-text\");\r\n        elementInput[0].textContent = 'YouTube video link'\r\n        elementInput[0].className = elementInput[0].className.replace(/\\berror\\b/g, \"\");\r\n\r\n        const videoId = getId(video.value);\r\n\r\n        const videoWidth = 350\r\n        const videoHeight = 240\r\n        \r\n        const draggableBack = document.getElementsByClassName('drag-container')[0]\r\n        const posMe = Utils.getPositionFromStyle(draggableBack);\r\n        const scaleMe = Utils.getValueFromAttr(draggableBack, 'curzoom').value;\r\n        const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2 ) / scaleMe\r\n        const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2 ) / scaleMe\r\n\r\n        console.log(calc_def_x, calc_def_y, posMe)  \r\n        dispatch({type: 'youtube_add', value:{name: videoId, id: 'me', username: 'me', value: videoId, width: videoWidth, \r\n            height: videoHeight, defX: calc_def_x, defY: calc_def_y, videoplay: true}})\r\n        WebRTC.getInstance().youtubeAdd({videoId: videoId, name: videoId, username: 'me', width: videoWidth, \r\n            height: videoHeight, defX: calc_def_x, defY: calc_def_y, videoplay: true})\r\n\r\n\r\n        video.value = ''\r\n        window.$('#videodialog').plainModal('close')\r\n    }\r\n\r\n\r\n    return (\r\n        <div data-v-6a2f6b36=\"\" data-v-6e496afa=\"\" id ='videodialog' aria-expanded=\"true\" data-modal=\"add-youtube\" className=\"add-youtube-modal v--modal-overlay customDlgPos\" >\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal videodialog\" >\r\n                    <img data-v-6a2f6b36 className=\"logo\" src={youtube} alt='youtube.svg' />\r\n                    <div data-v-6a2f6b36=\"\" className=\"input-text\">YouTube video link</div>\r\n                    <input data-v-6a2f6b36=\"\" type=\"text\" name='video' className=\"url\" ref={input => setVideo(input)} onChange={(e)=>handleChange(e)} />\r\n                    <div data-v-6a2f6b36=\"\" className=\"buttons\">\r\n                        <input data-v-6a2f6b36=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        <input data-v-6a2f6b36=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}\r\n                            disabled={valid ? false : true} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default VideoDialog;","import React, { useState } from 'react';\r\nimport isImageUrl from 'is-image-url'\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport WebRTC from '../../webrtc';\r\nimport Utils from '../../utils/position';\r\n\r\nfunction ImageDialog(props){\r\n    const [imagePreviewUrl, setImagePreviewUrl] = useState(null)\r\n    const [uploadClick, setUploadClick] = useState(true)\r\n    const [fileName, setFileName] = useState('')\r\n    const [imgSize, setImgSize] = useState({width: 0, height: 0})\r\n    const dispatch = useDispatch()\r\n\r\n    const handleCancel = (event) => {\r\n        event.preventDefault()\r\n        window.$('#imagedialog').plainModal('close')\r\n        setImagePreviewUrl(null)\r\n    }\r\n    const handleSubmit = (event) => {\r\n        const imageWidth = parseInt(imgSize.width/3)\r\n        const imageHeight = parseInt(imgSize.height/3)\r\n        \r\n        const draggableBack = document.getElementsByClassName('drag-container')[0]\r\n        const posMe = Utils.getPositionFromStyle(draggableBack);\r\n        const scaleMe = Utils.getValueFromAttr(draggableBack, 'curzoom').value;\r\n\r\n        const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2 ) / scaleMe\r\n        const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2 ) / scaleMe\r\n\r\n        dispatch({type: 'image_add', value:{name: fileName, id: 'me', username: 'Me', value: imagePreviewUrl, width: imageWidth, height: imageHeight, defX: calc_def_x, defY: calc_def_y}})\r\n        WebRTC.getInstance().imageAdd({imageId: imagePreviewUrl, name: fileName, width: imageWidth, height: imageHeight, defX: calc_def_x, defY: calc_def_y})\r\n\r\n        setImagePreviewUrl(null)\r\n        window.$('#imagedialog').plainModal('close')\r\n    }\r\n    const fileChangedHandler = (event) => {\r\n        let reader = new FileReader();\r\n        setFileName(event.target.files[0].name)\r\n        reader.onload = function () {\r\n            var img = new Image;\r\n            img.onload = function() {\r\n                setImgSize({width: img.width, height: img.height})\r\n            };\r\n            img.src = reader.result;\r\n        }\r\n        reader.onloadend = (e) => {\r\n            setImagePreviewUrl(reader.result)\r\n        }\r\n        reader.readAsDataURL(event.target.files[0])\r\n    }\r\n    const imageExists = (image_url) => {\r\n        var http = new XMLHttpRequest();\r\n        http.open('HEAD', image_url, false);\r\n        http.send();\r\n        return http.status !== 404;\r\n    }\r\n    const URLChangedHandler = (event) => {\r\n        var element = document.getElementsByClassName(\"label\");\r\n        if (isImageUrl(event.target.value) || imageExists(event.target.value)) {\r\n            element[0].className = element[0].className.replace(/\\berror\\b/g, \"\");\r\n            element[0].textContent = 'Image link'\r\n            setImagePreviewUrl(event.target.value)\r\n            setFileName(event.target.value)\r\n        }\r\n        else {\r\n            element[0].className += \" error\";\r\n            element[0].textContent = 'Incorrect link'\r\n        }\r\n    }\r\n    const handleUpload = (event) => {\r\n        setUploadClick(true)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementLink[0].className = elementLink[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementUpload[0].className += \" active\";\r\n    }\r\n    const handleLink = (event) => {\r\n        setUploadClick(false)\r\n        var elementUpload = document.getElementsByClassName(\"image_upload\");\r\n        var elementLink = document.getElementsByClassName(\"image_link\");\r\n        elementUpload[0].className = elementUpload[0].className.replace(/\\bactive\\b/g, \"\");\r\n        elementLink[0].className += \" active\";\r\n    }\r\n    const uploadComputer =\r\n        <div data-v-bd733764=\"\" className=\"upload-computer tab-active drop-zone\" data-id=\"upload1\" >\r\n            <div data-v-bd733764=\"\" className=\"bold\">Drag and drop, paste image here</div>\r\n            <div data-v-bd733764=\"\" className=\"gray\">or</div>\r\n            <input type=\"file\" name=\"file-4\" id=\"file-4\" className=\"inputfile\" onChange={(e)=>fileChangedHandler(e)} />\r\n            <label htmlFor=\"file-4\">BROWSE...</label>\r\n        </div>\r\n    const preview =\r\n        <div data-v-bd733764=\"\" className=\"preview\">\r\n            <img className=\"imgPreview\" src={imagePreviewUrl} height=\"200\" alt=\"preview...\" />\r\n        </div>\r\n    const linkURL =\r\n        <div data-v-bd733764=\"\" className=\"upload-link\">\r\n            <div data-v-bd733764=\"\" className=\"label\">Image link</div>\r\n            <input data-v-bd733764=\"\" type=\"text\" className=\"link\" onChange={(e)=>URLChangedHandler(e)} />\r\n        </div>\r\n    return (\r\n        <div data-v-bd733764=\"\" data-v-6e496afa=\"\" id ='imagedialog' aria-expanded=\"true\" data-modal=\"add-image\" className=\"add-image-modal v--modal-overlay customDlgPos\">\r\n            <div className=\"v--modal-background-click\">\r\n                <div className=\"v--modal-top-right\"></div>\r\n                <div role=\"dialog\" aria-modal=\"true\" className=\"v--modal-box modal imagedialog\" >\r\n                    <div data-v-bd733764=\"\" className=\"header\">\r\n                        <button data-v-bd733764=\"\" data-id=\"upload1\" className=\"image_upload active\" onClick={(e)=>handleUpload(e)} >Upload</button>\r\n                        <button data-v-bd733764=\"\" data-id=\"upload2\" className=\"image_link\" onClick={(e)=>handleLink(e)} >URL</button>\r\n                    </div>\r\n                    {\r\n                        uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : uploadClick && !imagePreviewUrl\r\n                        ? uploadComputer\r\n                        : null\r\n                    }\r\n                    {\r\n                        !uploadClick && imagePreviewUrl\r\n                        ? preview\r\n                        : !uploadClick && !imagePreviewUrl\r\n                        ? linkURL\r\n                        : null\r\n                    }\r\n                    <div data-v-bd733764=\"\" className=\"buttons\">\r\n                        <input data-v-bd733764=\"\" type=\"button\" value=\"CANCEL\" className=\"cancel\" onClick={(e)=>handleCancel(e)} />\r\n                        { imagePreviewUrl && <input data-v-bd733764=\"\" type=\"submit\" value=\"OK\" className=\"ok\" onClick={(e)=>handleSubmit(e)}/>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default ImageDialog;","import React, { useState, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport WebRTC from '../../webrtc';\r\nimport Button from '../button';\r\nimport Dialog from '../dialog';\r\nimport VideoDialog from '../dialog/videodlg';\r\nimport ImageDialog from '../dialog/imagedlg';\r\n\r\nimport userssvg from '../../images/users.svg';\r\nimport youtube from '../../images/youtube.svg';\r\nimport uploadimage from '../../images/uploadimage.svg';\r\nimport sharedscreen_on from '../../images/screenshare-on.svg';\r\nimport sharedscreen_off from '../../images/screenshare-off.svg';\r\nimport stopvideo0 from '../../images/stopvideo-0.svg';\r\nimport stopvideo1 from '../../images/stopvideo-1.svg';\r\nimport stopaudio0 from '../../images/stopaudio-0.svg';\r\nimport stopaudio1 from '../../images/stopaudio-1.svg';\r\nimport logosvg from '../../images/logo.svg';\r\nimport logosmallsvg from '../../images/logo-small.svg';\r\nimport support from '../../images/support.svg';\r\nimport close from '../../images/close.svg';\r\n\r\nimport './index.css';\r\n\r\nconst Navbar = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n    const users = useSelector((state) => state.users);\r\n    const camera = useSelector((state) => state.buttons.camera);\r\n    const mic = useSelector((state) => state.buttons.mic);\r\n    const screenshare = useSelector((state) => state.buttons.screenshare);\r\n    const self = useSelector((state) => state.screens.peer)\r\n\r\n    const toggleChange = (type1, value1) => {\r\n        dispatch({ type: type1, value: value1 === 'on' ? 'off' : 'on' });\r\n        // console.log('toogleChange: ', type1, value1)\r\n        if (type1 === 'click_camera') {\r\n            dispatch({ type: 'user_media', value: { id: 'me', type: 'camera', status: value1 === 'on' ? 'off' : 'on' } });\r\n            WebRTC.getInstance().toggleCamera(value1 === 'off');\r\n        } else if (type1 === 'click_mic') {\r\n            dispatch({ type: 'user_media', value: { id: 'me', type: 'mic', status: value1 === 'on' ? 'off' : 'on' } });\r\n            WebRTC.getInstance().toggleMic(value1 === 'off');\r\n        } else if (type1 === 'click_screenshare') {\r\n            dispatch({\r\n                type: 'screenshare_change',\r\n                value: { status: value1 === 'on' ? 'off' : 'on', userid: 'me' }\r\n            });\r\n        }\r\n    };\r\n    const handleClose = (event) => {\r\n        WebRTC.getInstance().closeClient('me');\r\n        window.location.href = '/room?space=' + props.query.space;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div data-v-2db9ff64='' className='app-header' data-v-12a888fb=''>\r\n                <a data-v-2db9ff64='' href='/' target='_blank'>\r\n                    <img data-v-2db9ff64='' className='logo' src={logosvg} alt='logosvg' style={{ display: 'none' }} />\r\n                    <img data-v-2db9ff64='' className='logo-small' src={logosmallsvg} alt='logosmallsvg' style={{ display: 'none' }} />\r\n                </a>\r\n                <div data-v-2f32af68='' className='controls'>\r\n                    <div data-v-2f32af68='' className='controls-main'>\r\n                        <div data-v-261ef19f='' data-v-2f32af68='' className='members-container'>\r\n                            <div data-v-2f32af68='' data-v-261ef19f='' className='members cus-dropdown'>\r\n                                <img data-v-2f32af68='' src={userssvg} alt='userssvg' />\r\n                                <span data-v-2f32af68='' data-v-261ef19f=''>\r\n                                    {users.length}\r\n                                </span>\r\n                                <div data-v-261ef19f='' className='cus-dropdown-content'>\r\n                                    {users.map((user) => (user.id !== 'me' ? <span key={user.id}>{user.name}</span> : null))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <Button\r\n                            on={youtube}\r\n                            off={youtube}\r\n                            no={youtube}\r\n                            alt='Youtube'\r\n                            status='on'\r\n                            onClick={() => {\r\n                                Dialog.show('videodialog');\r\n                            }}\r\n                        ></Button>\r\n                        <Button\r\n                            on={uploadimage}\r\n                            off={uploadimage}\r\n                            no={uploadimage}\r\n                            alt='Uploadimage'\r\n                            status='on'\r\n                            onClick={() => {\r\n                                Dialog.show('imagedialog');\r\n                            }}\r\n                        ></Button>\r\n                        <Button\r\n                            on={sharedscreen_on}\r\n                            off={sharedscreen_off}\r\n                            no={sharedscreen_off}\r\n                            id='screenshare'\r\n                            alt='Screenshare'\r\n                            status={ hasOwnProperty.call(self, 'peer') ? screenshare : 'no' }\r\n                            onClick={() => toggleChange('click_screenshare', screenshare)}\r\n                        ></Button>\r\n                        <Button\r\n                            on={stopvideo0}\r\n                            off={stopvideo1}\r\n                            no={stopvideo1}\r\n                            alt='Camera'\r\n                            status={camera}\r\n                            onClick={() => toggleChange('click_camera', camera)}\r\n                        ></Button>\r\n                        <Button\r\n                            on={stopaudio0}\r\n                            off={stopaudio1}\r\n                            no={stopaudio1}\r\n                            alt='Mic'\r\n                            status={mic}\r\n                            onClick={() => toggleChange('click_mic', mic)}\r\n                        ></Button>\r\n                    </div>\r\n                    <a data-v-2f32af68='' href='mailto:support@spatial.chat' className='support-link'>\r\n                        <img data-v-2f32af68='' className='support has-tooltip' src={support} alt='support' />\r\n                    </a>\r\n                    <img data-v-2f32af68='' className='close pointer' src={close} alt='close' onClick={(e) => handleClose(e)} />\r\n                </div>\r\n            </div>\r\n            <VideoDialog uname={props.query.uname} />\r\n            <ImageDialog uname={props.query.uname} />\r\n        </>\r\n    );\r\n});\r\n\r\nexport default Navbar;\r\n","import React, {PureComponent} from 'react';\r\nimport './index.css';\r\n\r\nexport default class DragBox extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.resizeXRef = React.createRef();\r\n        this.resizeYRef = React.createRef();\r\n        this.resizeXYRef = React.createRef();\r\n        this.moveRef = React.createRef();\r\n        this.myRef = React.createRef();\r\n        this.state = {\r\n            dragging: !props.draggable,\r\n            dragType: '',\r\n            rel: null, // position relative to the cursor\r\n            scale: props.scale,\r\n            position: {\r\n                x: props.initialRect.left | 0,\r\n                y: props.initialRect.top | 0\r\n            },\r\n            width: props.initialRect.width | 0,\r\n            height: props.initialRect.height | 0,\r\n            tipState: false\r\n        };\r\n    }\r\n    static getDerivedStateFromProps(props, state) {\r\n        if (props.draggable) {\r\n            const newState = {\r\n                offset: props.offset,\r\n                scale: props.scale,\r\n                style: calcStyle(props, state)\r\n            };\r\n            return newState;\r\n        } else {\r\n            const newState = {\r\n                offset: props.offset,\r\n                scale: props.scale,\r\n                style: calcStyle(props, state),\r\n                position: {\r\n                    x: props.initialRect.left,\r\n                    y: props.initialRect.top\r\n                },\r\n                width: props.initialRect.width | 0,\r\n                height: props.initialRect.height | 0\r\n            };\r\n            return newState;\r\n        }\r\n    }\r\n\r\n    // we could get away with not having this (and just having the listeners on\r\n    // our div), but then the experience would be possibly be janky. If there's\r\n    // anything w/ a higher z-index that gets in the way, then you're toast,\r\n    // etc.\r\n    componentDidUpdate(props, state) {\r\n        if (this.state.dragging && !state.dragging) {\r\n            document.addEventListener('mousemove', this.onMouseMove);\r\n            document.addEventListener('mouseup', this.onMouseUp);\r\n        } else if (!this.state.dragging && state.dragging) {\r\n            document.removeEventListener('mousemove', this.onMouseMove);\r\n            document.removeEventListener('mouseup', this.onMouseUp);\r\n        }\r\n    }\r\n    // calculate relative position to the mouse and set dragging=true\r\n    onMouseDown = (e) => {\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        // return;\r\n        // only left mouse button\r\n        if (!this.props.draggable) return;\r\n        const ele = document.elementFromPoint(e.clientX, e.clientY);\r\n        let dragType = '';\r\n        if (e.button === 0) {\r\n            switch (ele) {\r\n                case this.moveRef.current:\r\n                    dragType = 'move';\r\n                    break;\r\n                case this.resizeXRef.current:\r\n                    dragType = 'resize-x';\r\n                    break;\r\n                case this.resizeYRef.current:\r\n                    dragType = 'resize-y';\r\n                    break;\r\n                case this.resizeXYRef.current:\r\n                    dragType = 'resize-xy';\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n        }\r\n        var pos = {\r\n            left: this.myRef.current.offsetLeft,\r\n            top: this.myRef.current.offsetTop\r\n        };\r\n        this.setState({\r\n            dragging: true,\r\n            dragType,\r\n            rel: {\r\n                x: e.pageX - pos.left,\r\n                y: e.pageY - pos.top,\r\n                w: (e.pageX / this.state.scale) * 2 - this.state.width * this.props.zoom,\r\n                h: (e.pageY / this.state.scale) * 2 - this.state.height * this.props.zoom\r\n            }\r\n        });\r\n    };\r\n    onMouseUp = (e) => {\r\n        const newPos = {\r\n            x: this.myRef.current.offsetLeft / this.state.scale,\r\n            y: this.myRef.current.offsetTop / this.state.scale\r\n        };\r\n        if (this.props.onMouseUp) this.props.onMouseUp(this.myRef.current, newPos, this.state.scale);\r\n\r\n        this.setState({ dragging: false });\r\n\r\n\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onMouseMove = (e) => {\r\n        if (e.button !== 0) return;\r\n        const newPos = {\r\n            x: (e.pageX - this.state.rel.x) / this.state.scale,\r\n            y: (e.pageY - this.state.rel.y) / this.state.scale\r\n        };\r\n        switch (this.state.dragType) {\r\n            case 'move':\r\n                {\r\n                    newPos.x = Math.max(1, Math.min(this.myRef.current.parentNode.parentNode.clientWidth / this.state.scale - 1, newPos.x));\r\n                    newPos.y = Math.max(\r\n                        1,\r\n                        Math.min(this.myRef.current.parentNode.parentNode.clientHeight / this.state.scale - 1, newPos.y)\r\n                    );\r\n\r\n                    this.setState({\r\n                        position: newPos\r\n                    });\r\n                }\r\n                break;\r\n            case 'resize-x':\r\n                {\r\n                    const w = Math.max(20, (e.pageX / this.state.scale) * 2 - this.state.rel.w);\r\n                    if (this.props.aspect) {\r\n                        this.setState({\r\n                            width: w,\r\n                            height: (w / this.props.initialRect.width) * this.props.initialRect.height\r\n                        });\r\n                    } else {\r\n                        this.setState({ width: w });\r\n                    }\r\n                }\r\n                break;\r\n            case 'resize-y':\r\n                {\r\n                    const h = Math.max(20, (e.pageY / this.state.scale) * 2 - this.state.rel.h);\r\n                    if (this.props.aspect) {\r\n                        this.setState({\r\n                            height: h,\r\n                            width: (h / this.props.initialRect.height) * this.props.initialRect.width\r\n                        });\r\n                    } else {\r\n                        this.setState({ height: h });\r\n                    }\r\n                }\r\n                break;\r\n            case 'resize-xy':\r\n                {\r\n                    const w = Math.max(20, (e.pageX / this.state.scale) * 2 - this.state.rel.w);\r\n                    const h = Math.max(20, (e.pageY / this.state.scale) * 2 - this.state.rel.h);\r\n                    if (this.props.aspect) {\r\n                        this.setState({\r\n                            width: w,\r\n                            height: (w / this.props.initialRect.width) * this.props.initialRect.height\r\n                        });\r\n                    } else {\r\n                        this.setState({ width: w, height: h });\r\n                    }\r\n                }\r\n                break;\r\n            default:\r\n        }\r\n        if (this.props.onMouseMove) this.props.onMouseMove(this.myRef.current, newPos, this.state.scale);\r\n\r\n        // e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n\r\n    handleClickSmall = (e) => {\r\n        const pos = {\r\n            x: this.state.position.x * this.props.scale,\r\n            y: this.state.position.y * this.props.scale\r\n        };\r\n        if (this.props.onClickSmall) this.props.onClickSmall(pos);\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                onMouseEnter={(e) => {\r\n                    if (this.props.type === 'circle' && !this.state.tipState) {\r\n                        this.setState({ tipState: true });\r\n                    }\r\n                    if (this.props.type !== 'circle' && this.state.tipState) {\r\n                        this.setState({ tipState: false });\r\n                    }\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    if (this.state.tipState) this.setState({ tipState: false });\r\n                }}\r\n            >\r\n                <div\r\n                    ref={this.myRef}\r\n                    className={`drag-box ${this.props.type}`}\r\n                    style={this.state.style}\r\n                    onMouseUp={this.onMouseUp}\r\n                    onMouseDown={this.onMouseDown}\r\n                >\r\n                    {this.props.sizable && <div className=\"drag-size-x\" ref={this.resizeXRef} onMouseDown={this.onMouseDown} />}\r\n                    {this.props.sizable && <div className=\"drag-size-y\" ref={this.resizeYRef} onMouseDown={this.onMouseDown} />}\r\n                    {this.props.sizable && <div className=\"drag-size-xy\" ref={this.resizeXYRef} onMouseDown={this.onMouseDown} />}\r\n                    <div className={'drag-' + this.props.dragType} ref={this.moveRef} onMouseDown={this.onMouseDown} />\r\n                    {/* <div\r\n                        className={this.props.dragType === 'title' ? 'drag-title' : 'drag-move'}\r\n                        ref={this.moveRef}\r\n                        onMouseDown={this.onMouseDown}\r\n                    /> */}\r\n                    {this.props.children}\r\n                    {this.state.tipState && (\r\n                        <div className=\"tip\">\r\n                            <span className=\"tip-pan\"> {this.props.tip} </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {this.state.style.small && (\r\n                    <div\r\n                        className=\"circle-arrow\"\r\n                        style={{\r\n                            ...this.state.style,\r\n                            borderColor: this.props.draggable ? 'yellow' : 'white',\r\n                            transform: `translate(-50%, -50%) rotate(${this.state.style.angle}deg)`\r\n                        }}\r\n                        onMouseDown={this.handleClickSmall}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction calcStyle(props, state) {\r\n    const style = {\r\n        left: props.draggable ? state.position.x * props.scale : props.initialRect.left * props.scale,\r\n        top: props.draggable ? state.position.y * props.scale : props.initialRect.top * props.scale,\r\n        width: props.draggable ? state.width * props.zoom : props.initialRect.width * props.zoom,\r\n        height: props.draggable ? state.height * props.zoom : props.initialRect.height * props.zoom,\r\n        zIndex: props.zIndex | 0,\r\n        transform: `translate(-50%, -50%) scale(${props.scale})`\r\n    };\r\n    const stage = document.getElementById('stage');\r\n    if (props.type === 'circle' && stage) {\r\n        const smallCircleSize = 70;\r\n        const offset = calcOffest(\r\n            {\r\n                left: -props.offset.x,\r\n                top: -props.offset.y,\r\n                right: -props.offset.x + stage.clientWidth,\r\n                bottom: -props.offset.y + stage.clientHeight\r\n            },\r\n            { x: style.left, y: style.top },\r\n            smallCircleSize\r\n        );\r\n\r\n        if (offset) {\r\n            style.small = true;\r\n            style.angle =\r\n                -45 +\r\n                (180 / Math.PI) *\r\n                    Math.atan2(-props.offset.y + stage.clientHeight / 2 - style.top, -props.offset.x + stage.clientWidth / 2 - style.left);\r\n            style.width = smallCircleSize;\r\n            style.height = smallCircleSize;\r\n            style.left = offset.x;\r\n            style.top = offset.y;\r\n            style.transform = `translate(-50%, -50%)`;\r\n        }\r\n    }\r\n    return style;\r\n}\r\n\r\nfunction calcOffest(parentRect, pos, smallCircleSize) {\r\n    var offset = { x: pos.x, y: pos.y };\r\n    if (pos.x > parentRect.left && pos.x < parentRect.right && pos.y > parentRect.top && pos.y < parentRect.bottom) return null;\r\n    if (pos.x <= parentRect.left) offset.x = parentRect.left + smallCircleSize / 2 + 20;\r\n    if (pos.x >= parentRect.right) offset.x = parentRect.right - smallCircleSize / 2 - 20;\r\n    if (pos.y <= parentRect.top) offset.y = parentRect.top + smallCircleSize / 2 + 20;\r\n    if (pos.y >= parentRect.bottom) offset.y = parentRect.bottom - smallCircleSize / 2 - 20;\r\n    return offset;\r\n}\r\n","import Peer from 'peerjs';\r\n\r\nclass MyPeer extends Peer {\r\n  constructor(props) {\r\n    super({\r\n      host: 'screen-sharing-web.herokuapp.com',\r\n      path: '/myapp',\r\n      port: 443,\r\n      secure: true,\r\n      key: 'peerjs',\r\n      debug: 0,\r\n    });\r\n  }\r\n}\r\n\r\nexport default MyPeer;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport DragBox from '../draggable/DragBox';\r\nimport WebRTC from '../../webrtc';\r\nimport Peer from '../../RTCMulti';\r\nimport Utils from '../../utils/position';\r\n\r\nimport './index.css';\r\n\r\nconst Screen = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n    const videoRef = useRef(null);\r\n    const peer = new Peer(process.env.NODE_ENV === 'production');\r\n\r\n    useEffect(() => {\r\n        var video = document.getElementById(props.user.stream.id);\r\n        if (video) {\r\n            window.easyrtc.setVideoObjectSrc(video, props.user.stream);\r\n        }\r\n\r\n        // console.log('props.user : -----------', props.user, peer);\r\n        if (props.user.id === 'me' && peer._id === null) {\r\n            props.onGoToFirstPosition({\r\n                x: props.sceneZoom ? props.user.defPosX / props.sceneZoom : props.user.defPosX,\r\n                y: props.sceneZoom ? props.user.defPosY / props.sceneZoom : props.user.defPosX\r\n            });\r\n\r\n            if (!navigator || !navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia) {\r\n                console.error('Use google chrome!');\r\n                return;\r\n            }\r\n            // Connect peer\r\n            peer.on('open', (id) => {\r\n                // console.log('peer open : ---------', id, peer);\r\n\r\n                const draggableBack = document.getElementsByClassName('drag-container')[0];\r\n                const posMe = Utils.getPositionFromStyle(draggableBack);\r\n                const scaleMe = Utils.getValueFromAttr(draggableBack, 'curzoom').value;\r\n\r\n                const calc_def_x = (Math.abs(-posMe.x) + Utils.width() / 2) / scaleMe;\r\n                const calc_def_y = (Math.abs(-posMe.y) + Utils.height() / 2) / scaleMe;\r\n\r\n                const opt = { width: 600, height: 450 };\r\n                dispatch({\r\n                    type: 'set_peer',\r\n                    value: { peer: peer, id: id }\r\n                });\r\n                dispatch({\r\n                    type: 'screenshare_add',\r\n                    value: {\r\n                        userid: 'me',\r\n                        username: 'Me',\r\n                        name: id,\r\n                        width: opt.width,\r\n                        height: opt.height,\r\n                        defX: calc_def_x,\r\n                        defY: calc_def_y,\r\n                        status: 'off'\r\n                    }\r\n                });\r\n                WebRTC.getInstance().screenShareAdd({\r\n                    name: id,\r\n                    width: opt.width,\r\n                    height: opt.height,\r\n                    defX: calc_def_x,\r\n                    defY: calc_def_y,\r\n                    status: 'off'\r\n                });\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) videoRef.current.volume = props.zoom === 0.5 ? 0 : props.zoom;\r\n    }, [props.zoom]);\r\n\r\n    const handleDrag = (node, pos, scale) => {\r\n        WebRTC.getInstance().updateMyPosition({ x: pos.x, y: pos.y });\r\n        dispatch({ type: 'user_position', value: { id: props.user.id, defPosX: pos.x * scale, defPosY: pos.y * scale } });\r\n\r\n        if (props.onDrag) props.onDrag(node, props.user, pos, scale);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <DragBox\r\n                type={'circle'}\r\n                offset={props.pos}\r\n                scale={props.sceneZoom}\r\n                initialRect={{\r\n                    left: props.user.defPosX,\r\n                    top: props.user.defPosY,\r\n                    width: 100,\r\n                    height: 100\r\n                }}\r\n                zIndex={50}\r\n                onClickSmall={props.onClickSmall}\r\n                onMouseMove={handleDrag}\r\n                tip={props.user.name}\r\n                draggable={props.user.id === 'me' ? true : false}\r\n                zoom={props.zoom ? props.zoom : 1}\r\n                dragType={'body'}\r\n            >\r\n                <div\r\n                    key={props.user.id}\r\n                    className=\"screen\"\r\n                    id={props.user.id}\r\n                    style={{\r\n                        width: '100%',\r\n                        height: '100%',\r\n                        borderRadius: '50%',\r\n                        border: props.user.id === 'me' ? '2px solid #dcdb53' : '2px solid'\r\n                    }}\r\n                    tabIndex={0}\r\n                >\r\n                    <video\r\n                        ref={videoRef}\r\n                        className=\"video\"\r\n                        style={{ borderRadius: '50%' }}\r\n                        id={props.user.stream.id}\r\n                        controls=\"\"\r\n                        loop=\"\"\r\n                        muted={'me' === props.user.id}\r\n                    ></video>\r\n                </div>\r\n            </DragBox>\r\n        </>\r\n    );\r\n});\r\n\r\nexport default Screen;\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { PropTypes } from 'react';\r\nimport YouTube from 'react-youtube';\r\nimport DragBox from '../draggable/DragBox';\r\nimport './index.css';\r\nimport MicMute1 from '../../images/mic-mute.svg';\r\nimport MicMute0 from '../../images/mic-mute1.svg';\r\nimport closevideo from '../../images/closevideo.svg';\r\nimport WebRTC from '../../webrtc';\r\n\r\nimport Utils from '../../utils/position';\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst YoutubeUpload = React.memo((props) => {\r\n    const videoRef = useRef(null);\r\n    const dbRef = useRef(null);\r\n    const dispatch = useDispatch();\r\n    const [youtubeMute, setYoutubeMute] = useState('off');\r\n    const youtubeMuteAudio = 'youtubeAudio_' + props.video.value;\r\n\r\n    var realCurTime = 0;\r\n    const opts = {\r\n        playerVars: {\r\n            autoplay: 1,\r\n            origin: 'https://webrtc.bcisummit.com',\r\n            // origin: 'http://localhost:3000/conference',\r\n            enablejsapi: 1,\r\n            loop: 1,\r\n            autohide: 1,\r\n            showinfo: 0,\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) {\r\n            videoRef.current.internalPlayer.unMute();\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) {\r\n            if (props.video.videoplay) {\r\n                videoRef.current.internalPlayer.seekTo(props.video.curtime);\r\n                videoRef.current.internalPlayer.playVideo();\r\n            } else videoRef.current.internalPlayer.pauseVideo();\r\n        }\r\n    }, [props.video.videoplay]);\r\n\r\n    useEffect(() => {\r\n        if (videoRef && videoRef.current) videoRef.current.internalPlayer.setVolume(props.volume * 100 * (youtubeMute === 'off' ? 1 : 0));\r\n    }, [youtubeMute, props.volume]);\r\n\r\n    const handleDragMeForYoutube = (node, pos, scale) => {\r\n        dispatch({\r\n            type: 'youtube_position',\r\n            value: {\r\n                name: props.video.name,\r\n                width: node.clientWidth,\r\n                height: node.clientHeight,\r\n                defX: pos.x,\r\n                defY: pos.y\r\n            }\r\n        });\r\n        WebRTC.getInstance().youtubePosition({\r\n            name: props.video.name,\r\n            width: node.clientWidth,\r\n            height: node.clientHeight,\r\n            defX: pos.x,\r\n            defY: pos.y\r\n        });\r\n    };\r\n    const handleClose = (value) => {\r\n        dispatch({ type: 'youtube_remove', name: value });\r\n        WebRTC.getInstance().youtubeRemove({ name: value });\r\n    };\r\n    const handleYouTubePlay = (event) => {\r\n        dispatch({ type: 'youtube_play', value: { name: props.video.name, videoplay: true, curtime: realCurTime } });\r\n        WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: true, curtime: realCurTime, videoplaying: true });\r\n    };\r\n    const handleYouTubePause = (event) => {\r\n        dispatch({ type: 'youtube_play', value: { name: props.video.name, videoplay: false, curtime: realCurTime } });\r\n        WebRTC.getInstance().youtubePlay({ name: props.video.name, videoplay: false, curtime: realCurTime, videoplaying: false });\r\n    };\r\n    const handleStateChange = (e) => {\r\n        const currentTime = videoRef.current.internalPlayer.getCurrentTime();\r\n        currentTime.then(function (result) {\r\n            realCurTime = result;\r\n        });\r\n    };\r\n    const toggleChange = () => {\r\n        console.log(youtubeMute)\r\n        if (youtubeMute == 'on') {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute1;\r\n                setYoutubeMute('off');\r\n            }\r\n        } else {\r\n            if (videoRef.current) {\r\n                document.getElementById(youtubeMuteAudio).src = MicMute0;\r\n                setYoutubeMute('on');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <DragBox\r\n            type=\"rectangle\"\r\n            ref={dbRef}\r\n            offset={props.pos}\r\n            scale={props.sceneZoom}\r\n            initialRect={{ left: props.video.defX, top: props.video.defY, width: props.video.width, height: props.video.height }}\r\n            zIndex={props.video.id === 'me' ? 10 : 5}\r\n            onResize={handleDragMeForYoutube}\r\n            onMouseUp={handleDragMeForYoutube}\r\n            draggable={props.video.id === 'me' ? true : false}\r\n            sizable={props.video.id === 'me' ? true : false}\r\n            zoom={1}\r\n            aspect\r\n            dragType=\"title\"\r\n        >\r\n            <div\r\n                data-v-c1f79ed4=\"\"\r\n                data-v-6e496afa=\"\"\r\n                data-v-7e3fe256=\"\"\r\n                key={props.video.id}\r\n                className=\"youtube-el\"\r\n                style={{ width: '100%' }}\r\n                style={{ zIndex: props.video.id === 'me' ? 10 : 5 }}\r\n            >\r\n                <div data-v-a995c326=\"\" data-v-c1f79ed4=\"\" className=\"header pointer hidden\">\r\n                    <div data-v-a995c326=\"\" className=\"title\">\r\n                        Pinned by {props.video.username}\r\n                    </div>\r\n                    {props.video.id === 'me' && (\r\n                        <div onClick={() => handleClose(props.video.name)}>\r\n                            <img data-v-6a2f6b36 className=\"close\" src={closevideo} alt=\"closevideo.svg\" />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div data-v-c1f79ed4=\"\" className={`player ${props.video.id === 'me' ? null : 'pointer-events-none'}`}>\r\n                    <YouTube\r\n                        ref={videoRef}\r\n                        videoId={props.video.value}\r\n                        opts={opts}\r\n                        onPlay={props.video.id === 'me' ? (e) => handleYouTubePlay(e) : null}\r\n                        onPause={props.video.id === 'me' ? (e) => handleYouTubePause(e) : null}\r\n                        onStateChange={(e) => handleStateChange(e)}\r\n                    />\r\n                </div>\r\n                {props.video.id === 'me' ? null : (\r\n                    <img\r\n                        onClick={() => toggleChange()}\r\n                        data-v-c1f79ed4=\"\"\r\n                        id={youtubeMuteAudio}\r\n                        svg-inline=\"\"\r\n                        src={MicMute1}\r\n                        className=\"mute\"\r\n                        alt=\"youtubeAudio\"\r\n                    ></img>\r\n                )}\r\n            </div>\r\n            {props.video.id === 'me' && (\r\n                <div onClick={() => handleClose(props.video.name)} className=\"cus_close\">\r\n                    <img data-v-6a2f6b36 src={closevideo} alt=\"closevideo.svg\" />\r\n                </div>\r\n            )}\r\n            \r\n        </DragBox>\r\n    );\r\n});\r\nexport default YoutubeUpload;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport DragBox from '../draggable/DragBox'\r\n\r\nimport './index.css';\r\nimport closeimage from '../../images/closevideo.svg'\r\nimport WebRTC from '../../webrtc';\r\n\r\nconst ImageUpload = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const handleImageDrag = (node, pos, scale) => {\r\n        imageHandle(node, pos, scale);\r\n    }\r\n    const handleImageResize = (node, pos, scale) => {\r\n        imageHandle(node, pos, scale);\r\n    }\r\n    function imageHandle (node, pos, scale) {\r\n        WebRTC.getInstance().imagePosition({ name: props.image.name, width: node.clientWidth, height: node.clientHeight, defX: pos.x, defY: pos.y })\r\n        dispatch({type: 'image_position', value: { name: props.image.name, width: node.clientWidth, height: node.clientHeight, defX: pos.x, defY: pos.y } })\r\n    }\r\n    const handleClose = (value) => {\r\n        dispatch({type: 'image_remove', name: value})\r\n        WebRTC.getInstance().imageRemove({name: value})\r\n    }\r\n\r\n    return (\r\n        <DragBox\r\n            type=\"rectangle\"\r\n            offset={ props.pos }\r\n            scale={ props.sceneZoom }\r\n            initialRect={{ left: props.image.defX, top: props.image.defY, width: props.image.width, height: props.image.height }}\r\n            zIndex={ props.image.id === 'me' ? 10 : 5 }\r\n            onMouseUp={handleImageDrag}\r\n            onResize={handleImageResize}\r\n            draggable = { props.image.id === 'me' ? true : false }\r\n            sizable = { props.image.id === 'me' ? true : false } \r\n            zoom={1}\r\n            aspect\r\n            dragType='all'\r\n        >\r\n            <div key={props.image.id} className='cus_content'>\r\n                <div className=\"cus_header pointer hidden\" style={{ zIndex: props.image.id === 'me' ? 10 : 5 }}>\r\n                    <div className=\"cus_title\">Pinned by {props.image.username}</div>\r\n                </div>\r\n                <img src={props.image.value} className=\"image-frame\" alt=\"map-transparent\" />\r\n            </div>\r\n            {props.image.id==='me' &&\r\n                <div onClick={() => handleClose(props.image.name)} className=\"cus_close\" >\r\n                    <img data-v-6a2f6b36 src={closeimage} alt='closevideo.svg' />\r\n                </div>\r\n            }\r\n        </DragBox>\r\n    );\r\n})\r\nexport default ImageUpload;","import React from 'react';\r\nimport './index.css';\r\n\r\nexport default class DragContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n    }\r\n    state = {\r\n        pos: { x: 0, y: 0 },\r\n        dragging: false,\r\n        rel: null, // position relative to the cursor\r\n        sceneZoom: 1\r\n    };\r\n    // we could get away with not having this (and just having the listeners on\r\n    // our div), but then the experience would be possibly be janky. If there's\r\n    // anything w/ a higher z-index that gets in the way, then you're toast,\r\n    // etc.\r\n    componentDidUpdate(props, state) {\r\n        if (this.state.dragging && !state.dragging) {\r\n            document.addEventListener('mousemove', this.onMouseMove);\r\n            document.addEventListener('mouseup', this.onMouseUp);\r\n        } else if (!this.state.dragging && state.dragging) {\r\n            document.removeEventListener('mousemove', this.onMouseMove);\r\n            document.removeEventListener('mouseup', this.onMouseUp);\r\n        }\r\n    }\r\n    // calculate relative position to the mouse and set dragging=true\r\n    onMouseDown = (e) => {\r\n        // only left mouse button\r\n        const ele = document.elementFromPoint(e.clientX, e.clientY);\r\n        if (e.button !== 0 && ele !== this.myRef.current) return;\r\n        var pos = {\r\n            left: e.target.offsetLeft,\r\n            top: e.target.offsetTop\r\n        };\r\n        this.setState({\r\n            dragging: true,\r\n            rel: {\r\n                x: e.pageX - pos.left,\r\n                y: e.pageY - pos.top\r\n            }\r\n        });\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onMouseUp = (e) => {\r\n        this.setState({ dragging: false });\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onMouseMove = (e) => {\r\n        if (!this.state.dragging) return;\r\n        const newPos = {\r\n            x: e.pageX - this.state.rel.x,\r\n            y: e.pageY - this.state.rel.y\r\n        };\r\n        if (this.props.onMove) {\r\n            this.props.onMove(this.myRef.current, DragContainer.positionToParent(this.props, this.props.sceneZoom, newPos));\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    };\r\n    onWheel = (ev) => {\r\n        const stage = document.getElementById('stage');\r\n        var cursor_x = ev.clientX - stage.offsetLeft,\r\n            cursor_y = ev.clientY - stage.offsetTop;\r\n        // console.log(cursor_x, cursor_y);\r\n        var newZoom = Math.min(\r\n            this.props.maxZoom ? this.props.maxZoom : 3,\r\n            Math.max(this.props.minZoom ? this.props.minZoom : 0.5, this.state.sceneZoom + (ev.deltaY < 0 ? 0.1 : -0.1))\r\n        );\r\n        newZoom = DragContainer.zoomToParent(this.props, newZoom);\r\n        const newPos = {\r\n            x: this.myRef.current.offsetLeft,\r\n            y: this.myRef.current.offsetTop\r\n        };\r\n        newPos.x = newPos.x - ((cursor_x - newPos.x) * (newZoom - this.state.sceneZoom)) / this.state.sceneZoom;\r\n        newPos.y = newPos.y - ((cursor_y - newPos.y) * (newZoom - this.state.sceneZoom)) / this.state.sceneZoom;\r\n        \r\n        if (this.props.onZoom) {\r\n            this.props.onZoom(this.myRef.current, newZoom, DragContainer.positionToParent(this.props, newZoom, newPos));\r\n        }\r\n    };\r\n    static zoomToParent = (props, zoom) => {\r\n        if (props.fitParent) {\r\n            const stage = document.getElementById('stage');\r\n            if (stage) return Math.max(Math.max(zoom, stage.clientWidth / props.width), stage.clientHeight / props.height);\r\n        }\r\n        return zoom;\r\n    };\r\n    static positionToParent = (props, zoom, pos) => {\r\n        const newPos = { ...pos };\r\n        if (props.fitParent) {\r\n            const stage = document.getElementById('stage');\r\n            if (stage) {\r\n                newPos.x = Math.min(0, Math.max(-props.width * zoom + stage.clientWidth, pos.x));\r\n                newPos.y = Math.min(0, Math.max(-props.height * zoom + stage.clientHeight, pos.y));\r\n            }\r\n        }\r\n        return newPos;\r\n    };\r\n    static getDerivedStateFromProps(props, state) {\r\n        return {\r\n            pos: DragContainer.positionToParent(props, props.sceneZoom, props.position),\r\n            sceneZoom: DragContainer.zoomToParent(props, props.sceneZoom)\r\n        };\r\n    }\r\n    render() {\r\n        return (\r\n            <div\r\n                className=\"drag-container\"\r\n                onWheel={this.onWheel}\r\n                ref={this.myRef}\r\n                onMouseDown={this.onMouseDown}\r\n                style={{\r\n                    border: `${this.props.debug ? 3 : 0}px solid red`,\r\n                    position: 'relative',\r\n                    left: this.state.pos.x + 'px',\r\n                    top: this.state.pos.y + 'px',\r\n                    background: `url(${this.props.background})`,\r\n                    backgroundSize: 'cover',\r\n                    width: this.props.width * this.state.sceneZoom,\r\n                    height: this.props.height * this.state.sceneZoom,\r\n                    // transform: `scale(${this.state.zoom})`,\r\n                }}\r\n                curzoom={this.state.sceneZoom}\r\n            >\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DragBox from '../draggable/DragBox';\r\n\r\nimport './index.css';\r\n// import Peer from '../../RTCMulti';\r\nimport WebRTC from '../../webrtc';\r\n\r\nconst ScreenShare = React.memo((props) => {\r\n    const dispatch = useDispatch();\r\n    const self = useSelector((state) => state.screens.peer)\r\n    const screenshare = useSelector((state) => state.buttons.screenshare);\r\n    const videoShareRef = useRef(null);\r\n    const [isNavigatorSelect, setIsNavigatorSelect] = useState(false);\r\n    var _mediaStream = null;\r\n\r\n    useEffect(() => {\r\n        if (self.peer && props.screenshare.status === 'on') {\r\n            if (props.screenshare.userid === 'me') {\r\n                // console.log('share session : ---------', props.screenshare)\r\n\r\n                self.peer.on('connection', (conn) => {\r\n                    // console.log('connection : --------- ', self.peer, _mediaStream)\r\n\r\n                    conn.on('data', (id) => {\r\n                        if (_mediaStream !== null && self.peer) {\r\n                            // console.log('data mediaStream : ---------', id, _mediaStream);\r\n\r\n                            self.peer.call(id, _mediaStream);\r\n                        }\r\n                    });\r\n\r\n                    conn.on('error', () => {\r\n                        console.error('Connection with self.peer was broken');\r\n                    });\r\n                });\r\n\r\n                navigator.mediaDevices\r\n                    .getDisplayMedia({ video: { width: 1280, height: 720 } })\r\n                    .then((mediaStream) => {\r\n                        setIsNavigatorSelect(true);\r\n                        if (videoShareRef.current) {\r\n                            videoShareRef.current.srcObject = mediaStream;\r\n                            videoShareRef.current.play();\r\n                            _mediaStream = mediaStream;\r\n                            // console.log('mediastream : ---------- ', _mediaStream)\r\n                        } else {\r\n                            console.error('No video tag reference!');\r\n                        }\r\n\r\n                        // console.log('getDisplayMedia : ---------', self.peer)\r\n\r\n                        WebRTC.getInstance().screenShareChange(props.screenshare.status === 'on');\r\n\r\n                        _mediaStream.getVideoTracks()[0].onended = () => {\r\n                            dispatch({\r\n                                type: 'screenshare_change',\r\n                                value: { status: props.screenshare.status === 'on' ? 'off' : 'on', userid: 'me' }\r\n                            });\r\n                            dispatch({ type: 'click_screenshare', value: screenshare === 'on' ? 'off' : 'on' });\r\n\r\n                            WebRTC.getInstance().screenShareChange(props.screenshare.status === 'off');\r\n                            document.getElementById('screenshare').src = '/static/media/screenshare-off.44d81ce8.svg';\r\n                        };\r\n                    })\r\n                    .catch(function (err) {\r\n                        //log to console first\r\n                        console.log(err);\r\n                        if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {\r\n                            //required track is missing\r\n                            console.log('NotFoundError, DevicesNotFoundError');\r\n                        } else if (err.name === 'NotReadableError' || err.name === 'TrackStartError') {\r\n                            //webcam or mic are already in use\r\n                            console.log('NotReadableError, TrackStartError');\r\n                        } else if (err.name === 'OverconstrainedError' || err.name === 'ConstraintNotSatisfiedError') {\r\n                            //constraints can not be satisfied by avb. devices\r\n                            console.log('OverconstrainedError, ConstraintNotSatisfiedError');\r\n                        } else if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {\r\n                            //permission denied in browser\r\n                            dispatch({\r\n                                type: 'screenshare_change',\r\n                                value: { status: 'off', userid: 'me' }\r\n                            });\r\n                            dispatch({ type: 'click_screenshare', value: screenshare === 'on' ? 'off' : 'on' });\r\n                            document.getElementById('screenshare').src = '/static/media/screenshare-off.44d81ce8.svg';\r\n                        } else if (err.name === 'TypeError' || err.name === 'TypeError') {\r\n                            //empty constraints object\r\n                            console.log('TypeError');\r\n                        } else {\r\n                            //other errors\r\n                            console.log('Error: ' + err.name);\r\n                        }\r\n                    });\r\n            } else {\r\n                // console.log('watch session : -------------', props.screenshare, props.screenshare.name)\r\n\r\n                const conn = self.peer.connect(props.screenshare.name);\r\n                conn.on('open', () => {\r\n                    // console.log('watch open : --------- ', self.peer, self.id)\r\n                    if (self.peer) {\r\n                        conn.send(self.id);\r\n                    }\r\n                });\r\n\r\n                self.peer &&\r\n                    self.peer.on('call', (call) => {\r\n                        // console.log('call : --------- ', call)\r\n\r\n                        call.answer();\r\n\r\n                        call.on('stream', (incoming) => {\r\n                            // console.log('stream : ------------', incoming);\r\n                            if (videoShareRef.current !== null) {\r\n                                videoShareRef.current.srcObject = incoming;\r\n                                if (incoming.active) {\r\n                                    videoShareRef.current.play();\r\n                                    incoming.getTracks().forEach((track) => {\r\n                                        track.addEventListener('ended', () => {\r\n                                            console.info('Stream ended.');\r\n                                        });\r\n                                    });\r\n                                } else {\r\n                                    incoming.onaddtrack = () => {\r\n                                        if (videoShareRef.current) {\r\n                                            videoShareRef.current.play();\r\n                                        }\r\n                                    };\r\n                                }\r\n                            }\r\n                            console.info('Connected');\r\n                        });\r\n\r\n                        call.on('error', (error) => {\r\n                            console.error(error);\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    }, [props.screenshare.status]);\r\n\r\n    const handleScreenShareDragAndResize = (node, pos, scale) => {\r\n        WebRTC.getInstance().screenSharePosition({\r\n            name: props.screenshare.name,\r\n            width: node.clientWidth,\r\n            height: node.clientHeight,\r\n            defX: pos.x,\r\n            defY: pos.y\r\n        });\r\n\r\n        dispatch({\r\n            type: 'screenshare_position',\r\n            value: { name: props.screenshare.name, width: node.clientWidth, height: node.clientHeight, defX: pos.x, defY: pos.y }\r\n        });\r\n    };\r\n\r\n    return props.screenshare.status === 'on' ? (\r\n        <DragBox\r\n            type=\"rectangle\"\r\n            offset={props.pos}\r\n            scale={props.sceneZoom}\r\n            initialRect={{\r\n                left: props.screenshare.defX,\r\n                top: props.screenshare.defY,\r\n                width: props.screenshare.width,\r\n                height: props.screenshare.height\r\n            }}\r\n            zIndex={props.screenshare.userid === 'me' ? 20 : 15}\r\n            onMouseUp={handleScreenShareDragAndResize}\r\n            onResize={handleScreenShareDragAndResize}\r\n            draggable={props.screenshare.userid === 'me' ? true : false}\r\n            sizable={props.screenshare.userid === 'me' ? true : false}\r\n            zoom={props.zoom ? props.zoom : 1}\r\n            aspect\r\n            dragType=\"all\"\r\n        >\r\n            <video\r\n                ref={videoShareRef}\r\n                className=\"screenshare\"\r\n                id={props.screenshare.name}\r\n                controls=\"\"\r\n                loop=\"\"\r\n                style={{ display: isNavigatorSelect ? 'block' : props.screenshare.userid !== 'me' ? 'block' : 'none' }}\r\n                muted={'me' === props.screenshare.userid}\r\n            ></video>\r\n        </DragBox>\r\n    ) : null;\r\n});\r\nexport default ScreenShare;\r\n","import React, { Component, useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n// import { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport * as qs from 'query-string';\r\n\r\nimport Navbar from '../components/navbar';\r\nimport WebRTC from '../webrtc';\r\nimport Screen from '../components/screen';\r\nimport YoutubeUpload from '../components/youtubeupload';\r\nimport ImageUpload from '../components/imageupload';\r\nimport DragContainer from '../components/draggable/DragContainer';\r\nimport ScreenShare from '../components/screenshare';\r\n\r\nimport img_small from '../images/map-small@2x.0c2a372b.png';\r\nimport img_big from '../images/map-big@2x.44a3f15c.png';\r\n\r\nimport './index.css';\r\nimport { faMousePointer } from '@fortawesome/free-solid-svg-icons';\r\n\r\nfunction Conference(props) {\r\n    const dispatch = useDispatch();\r\n    const query = qs.parse(props.location.search);\r\n    const users = useSelector((state) => state.users);\r\n    const videos = useSelector((state) => state.screens.videos);\r\n    const images = useSelector((state) => state.screens.images);\r\n    const screenshares = useSelector((state) => state.screens.screenshares);\r\n    const [userClose, setUserClose] = useState(false);\r\n    const [pos, setPos] = useState({ x: 0, y: 0 });\r\n    const [mePos, setMePos] = useState({ x:0, y: 0 });\r\n    const [sceneZoom, setSceneZoom] = useState(1);\r\n\r\n    // console.log('Conference : screenshare: ------------- ', screenshares)\r\n    useEffect(() => {\r\n        WebRTC.getInstance().startConference(dispatch, null, query.space, query.uname);\r\n    }, []);\r\n \r\n    const handleSetUserClose = (value) => {\r\n        setUserClose(value);\r\n    };\r\n    const handleDrag = (dom, pos) => {\r\n        setPos(pos);\r\n    };\r\n    const handleZoom = (dom, zoom, position) => {\r\n        setSceneZoom(zoom);\r\n        setPos(position);\r\n    };\r\n    const handleClickSmall = (smallPos) => {\r\n        const stage = document.getElementById('stage');\r\n        setPos({\r\n            x: Math.max(Math.min(0, stage.clientWidth / 2 - smallPos.x)),\r\n            y: Math.min(0, stage.clientHeight / 2 - smallPos.y)\r\n        });\r\n    };\r\n    const handleGoToFirstPosition = (pos) => {\r\n        handleClickSmall(pos);\r\n    };\r\n    const handleDragMe = (node, me, pos, scale) => {\r\n        setMePos(pos);\r\n    };\r\n    const calcZoom = (user) => {\r\n        if (user.id === 'me' && mePos.x === 0 && mePos.y === 0) {\r\n            setMePos({ x: user.defPosX, y: user.defPosY });\r\n        } \r\n        if (user.id !== 'me') { \r\n            const dist = Math.max(\r\n                1,\r\n                Math.sqrt((mePos.x - user.defPosX) * (mePos.x - user.defPosX) + (mePos.y - user.defPosY) * (mePos.y - user.defPosY))\r\n            );\r\n            const scaleVal = Math.max(0.5, Math.min(1, 150 / dist));\r\n            return scaleVal;\r\n        }\r\n        return 1;\r\n    };\r\n    const calcVolume = (video) => {\r\n        const dist = getDistanceByRectAndPosition(\r\n            {\r\n                left: video.defX - video.width / 2,\r\n                right: video.defX + video.width / 2,\r\n                top: video.defY - video.height / 2,\r\n                bottom: video.defY + video.height / 2\r\n            }, mePos\r\n        );\r\n\r\n        const volume = dist === 0 ? 1 : Math.max(0, Math.min(1, Math.pow(100 / dist, 4)));\r\n        return volume < 0.01 ? 0 : volume;\r\n    }\r\n    const getDistanceByPosition = (p1, p2) => {\r\n        return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\r\n    };\r\n    const getDistanceByRectAndPosition = (rect, pos) => {\r\n        let distance = -1;\r\n        if (pos.x > rect.left && pos.x < rect.right) {\r\n            distance = Math.min(Math.abs(pos.y - rect.top), Math.abs(pos.y - rect.bottom));\r\n        }\r\n        if (pos.y > rect.top && pos.y < rect.bottom) {\r\n            if (distance === -1) distance = Math.min(Math.abs(pos.x - rect.left), Math.abs(pos.x - rect.right));\r\n            else distance = 0;\r\n        }\r\n        if (distance >= 0) return distance;\r\n        return Math.min(\r\n            Math.min(\r\n                getDistanceByPosition(pos, { x: rect.left, y: rect.top }),\r\n                getDistanceByPosition(pos, { x: rect.left, y: rect.bottom })\r\n            ),\r\n            Math.min(\r\n                getDistanceByPosition(pos, { x: rect.right, y: rect.top }),\r\n                getDistanceByPosition(pos, { x: rect.right, y: rect.bottom })\r\n            )\r\n        );\r\n    };\r\n    return (\r\n        <div className=\"App\">\r\n            <div\r\n                id=\"stage\"\r\n                style={{\r\n                    position: 'relative',\r\n                    overflow: 'hidden',\r\n                    backgroundImage: `url(${img_small})`,\r\n                    width: '100vw',\r\n                    height: '100vh',\r\n                    left: 0,\r\n                    top: 0\r\n                }}\r\n            >\r\n                <Navbar onSetUserClose={handleSetUserClose} videos={videos} images={images} query={query} />\r\n                <DragContainer\r\n                    // debug\r\n                    fitParent\r\n                    background={img_big}\r\n                    width={WebRTC.getInstance().width}\r\n                    height={WebRTC.getInstance().height}\r\n                    position={pos}\r\n                    sceneZoom={sceneZoom}\r\n                    onMove={handleDrag}\r\n                    onZoom={handleZoom}\r\n                    maxZoom={3}\r\n                    minZoom={0.2}\r\n                >\r\n                    {users.map((user) => (\r\n                        <Screen\r\n                            key={user.id}\r\n                            pos={pos}\r\n                            sceneZoom={sceneZoom}\r\n                            zoom={calcZoom(user)}\r\n                            user={user}\r\n                            onClickSmall={handleClickSmall}\r\n                            onDrag={user.id === 'me' ? handleDragMe : null}\r\n                            onGoToFirstPosition={handleGoToFirstPosition}\r\n                        />\r\n                    ))}\r\n                    {videos.map((video) => (\r\n                        <YoutubeUpload\r\n                            key={video.name}\r\n                            video={video}\r\n                            pos={pos}\r\n                            mePos={mePos}\r\n                            sceneZoom={sceneZoom}\r\n                            userClose={userClose}\r\n                            room={query.space}\r\n                            volume={calcVolume(video)}\r\n                        />\r\n                    ))}\r\n                    {images.map((image) => (\r\n                        <ImageUpload\r\n                            key={image.value}\r\n                            image={image}\r\n                            pos={pos}\r\n                            sceneZoom={sceneZoom}\r\n                            userClose={userClose}\r\n                            room={query.space}\r\n                        />\r\n                    ))}\r\n                    {screenshares.map((screenshare) => (\r\n                        <ScreenShare\r\n                            key={screenshare.name}\r\n                            screenshare={screenshare}\r\n                            pos={pos}\r\n                            sceneZoom={sceneZoom}\r\n                            room={query.space}\r\n                        />\r\n                    ))}\r\n                </DragContainer>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Conference;\r\n","import React, { useState } from \"react\";\r\nimport ReactSpinner from 'react-spinkit'\r\n// import {Redirect} from 'react-router-dom';\r\nimport * as qs from 'query-string'\r\n\r\nimport WebRTC from '../webrtc';\r\nimport Utils from '../utils/position'\r\nimport logosvg from '../images/logo.svg'\r\nimport logosmallsvg from '../images/logo-small.svg'\r\nimport joinbtn from '../images/joinbtn.svg'\r\nimport Footer from '../components/footer';\r\nimport './index.css';\r\n\r\nfunction Room(props) {\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [sendingEmail, setSendingEmail] = useState(false);\r\n    const [userName, setUserName] = useState('');\r\n    const query = qs.parse(props.location.search);\r\n\r\n    const handleChange = (event) => {\r\n        event.preventDefault();\r\n\r\n        const { value } = event.target;\r\n        if (value.length > 0) {\r\n            setIsVerified(true);\r\n            setUserName(value);\r\n        }\r\n        else\r\n            setIsVerified(false);\r\n    }\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        setSendingEmail(true)\r\n        \r\n        window.localStorage.setItem('o', true)\r\n        window.localStorage.setItem('t', 'video-meeting')\r\n        window.localStorage.setItem('r', query.space)\r\n        window.localStorage.setItem('r', 'tryme')\r\n        window.localStorage.setItem('userName', userName)\r\n\r\n        setTimeout(()=>{\r\n            props.history.push('/conference?space='+query.space+'&uname='+userName);\r\n        }, 2500);\r\n    }\r\n    \r\n    return (\r\n    <div data-v-12a888fb=\"\" className=\"space\">\r\n        <div data-v-2db9ff64=\"\" style={{ position: 'absolute', right: '10%', top: '5%'}} data-v-12a888fb=\"\">\r\n            <div data-v-2f32af68=\"\" >\r\n                {query.space}\r\n            </div>\r\n        </div>\r\n        <div data-v-a74c9690=\"\" data-v-12a888fb=\"\" className=\"entrance ent-div\">\r\n            <form data-v-a74c9690=\"\" className=\"form\" onSubmit={(e)=>handleSubmit(e)}>\r\n                <input data-v-a74c9690=\"\" type=\"text\" placeholder=\"Your Name\" className=\"name\" onChange={(e)=>handleChange(e)}/>\r\n                <button data-v-a74c9690=\"\" type=\"submit\" disabled={!isVerified} className=\"pointer\">\r\n                    {sendingEmail\r\n                    ? <ReactSpinner name='three-bounce' />\r\n                    : <img src={joinbtn} alt='joinbtn' />\r\n                    }\r\n                </button>\r\n            </form>\r\n        </div>\r\n        <Footer />\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default Room;\r\n","import React from 'react'\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tRoute\r\n} from 'react-router-dom'\r\nimport './App.css'\r\nimport Home from './views/home'\r\nimport Conference from './views/conference'\r\nimport Room from './views/room'\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path=\"/login\" component={Home}></Route>\r\n\t\t\t\t\t<Route path=\"/room\" component={Room}></Route>\r\n\t\t\t\t\t<Route path=\"/conference\" component={Conference}></Route>\r\n\t\t\t\t\t<Route path=\"/\" component={Home}></Route>\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport rootReducer from './reducers';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nconst store = createStore (\r\n  rootReducer,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/closevideo.7b864b90.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube.43fef7ea.svg\";","module.exports = __webpack_public_path__ + \"static/media/uploadimage.a7edbc9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.da4bdda8.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-small.e1cf996c.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-off.44d81ce8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-1.e529fa66.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-1.7268da01.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute.9a8a5f6e.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e50007f4.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.c4f7f08f.svg\";","module.exports = __webpack_public_path__ + \"static/media/youtube1.3933bad6.svg\";","module.exports = __webpack_public_path__ + \"static/media/users.78454788.svg\";","module.exports = __webpack_public_path__ + \"static/media/screenshare-on.341a9dd8.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopvideo-0.34d55c9b.svg\";","module.exports = __webpack_public_path__ + \"static/media/stopaudio-0.e55d1c5b.svg\";","module.exports = __webpack_public_path__ + \"static/media/support.dc413a12.svg\";","module.exports = __webpack_public_path__ + \"static/media/close.81170d04.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-mute1.c0d28aa1.svg\";","module.exports = __webpack_public_path__ + \"static/media/map-small@2x.0c2a372b.0c2a372b.png\";","module.exports = __webpack_public_path__ + \"static/media/map-big@2x.44a3f15c.9880d0f9.png\";","module.exports = __webpack_public_path__ + \"static/media/joinbtn.d5e1ecf0.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo-mark.8e118226.svg\";"],"sourceRoot":""}